{"version":3,"sources":["components/ControlPanel.js","components/User.js","components/DominantUser.js","components/Room.js","components/Meeting.js","App.js","index.js","components/helpers.js"],"names":["ControlPanel","username","handleUsernameChange","roomName","handleRoomNameChange","handleSubmit","Container","className","fluid","Row","src","width","height","Form","onSubmit","Label","Group","Control","size","type","value","onChange","placeholder","Button","variant","helpers","require","User","muteYourAudio","unmuteYourAudio","user","mute","local","useState","videoTracks","setVideoTracks","audioTracks","setAudioTracks","muted","setMute","vmute","setVmute","videoref","useRef","audioref","locals","console","log","identity","toggleMute","toggleVmute","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","addToRemoteDataLabel","newText","dataTrackSID","div","startClass","remoteDataLabel","document","getElementById","innerHTML","setTimeout","classList","remove","add","useEffect","forEach","on","bind","kind","isEnabled","data","JSON","parse","emojiData","sid","d","dataDiv","createElement","setAttribute","appendChild","attachRemoteDataTrack","v","a","removeAllListeners","videoTrack","attach","current","detach","audioTrack","id","icon","faCamera","ref","autoPlay","faMicrophoneSlash","DominantUser","room","videoTrackss","setVideoTrackss","audioTrackss","setAudioTrackss","emotion","setEmotion","dominant","setDominant","emoji","emotiontext","fetchSentiment","getUrl","name","fetch","method","headers","then","res","json","startRecording","audioElement","lengthInMS","recorder","MediaRecorder","ondataavailable","event","push","start","delayInMS","stopped","Promise","resolve","reject","onstop","onerror","recorded","state","stop","all","videoSnapshotInterval","setInterval","videoElement","mediaStreamTrack","ImageCapture","grabFrame","bitmap","canvas","getContext","drawImage","toBlob","blob","reader","FileReader","addEventListener","result","fetchUrl","body","readAsDataURL","catch","error","clearInterval","audioSnapshotInterval","MediaStreamer","MediaStream","addTrack","navigator","mediaDevices","getUserMedia","audio","recordedChunks","recordedBlob","Blob","recordAudio","faLaughBeam","faAngry","faSadTear","faFrownOpen","faTired","faMeh","faGrinStars","faMehBlank","faUsers","Room","intervalID","sentiment_intervalID","meetingname","token","logout","test","setRoom","setUser","newDomName","setNewDomName","videomute","setVideomute","deafenmute","setDeafenmute","LocalDataTrack","takeSnapshot","users","localParticipant","entries","next","updateUserSentiments","u","restartSentiment","window","dataTrack","participantConnected","new_user","prevusers","participantDisconnected","gone_user","p","ParticipantNewDominantSpeaker","participantRemoteVideoMuted","addToLocalDataLabel","localDataLabel","emojiButtonHandler","emojiText","target","currentRoom","send","stringify","emojiButtonGroup","getElementsByClassName","i","length","activateEmojiButtons","localDataTrack","addLocalData","Video","connect","dominantSpeaker","video","publishTrack","participants","tracks","trackPublication","disconnect","mutecallback","useCallback","mutevideocallback","muteYourVideo","unmuteYourVideo","defeancallback","logoutcallback","remoteParticipants","index","Col","sm","onClick","faMicrophone","faVideoSlash","faVideo","faTimes","faHeadphones","style","padding","marginRight","Meeting","setUsername","setRoomName","setToken","roomname_change","username_change","submit","preventDefault","App","ReactDOM","render","StrictMode","muteOrUnmuteYourMedia","action","disable","enable","exports","participantMutedOrUnmutedMedia","onMutedMedia","onUnmutedMedia","participant"],"mappings":"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","file":"static/js/main.e0c7fbcc.chunk.js","sourcesContent":["import React from 'react';\nimport {Container, Row, Form, Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst ControlPanel = ({\n  username,\n  handleUsernameChange,\n  roomName,\n  handleRoomNameChange,\n  handleSubmit\n}) => {\n  return (\n    <Container className=\"controlpanel\" fluid>\n      <Row className=\"cmilogo\">\n        <img src= \"/cuemeinlogo.png\" width=\"400\" height=\"400\"></img>\n      </Row> \n      <Row className=\"control\">\n          <Form onSubmit={handleSubmit}>\n            <Form.Label className=\"meeting\">Join a Meeting</Form.Label>\n\n            <Form.Group>\n            <Form.Label className=\"name\">Name:</Form.Label>\n            <Form.Control className=\"inputname\" size=\"lg\" type=\"name\" value={username}  onChange={handleUsernameChange} placeholder=\"User ID\" />\n            </Form.Group>\n\n            <Form.Group>\n            <Form.Label className=\"meetingname\">Meeting name:</Form.Label>\n            <Form.Control className=\"inputmeetingname\" size=\"lg\" type=\"meetingname\"  value={roomName}  onChange={handleRoomNameChange} placeholder=\"Room Name\" />\n            </Form.Group>\n\n            <Button variant=\"success\" type=\"submit\" >JOIN</Button>\n          </Form>\n        {/* <form onSubmit={handleSubmit}>\n          <h1>Enter a Meeting</h1>\n          <div>\n            <label htmlFor=\"name\">Name:</label>\n            <input\n              type=\"text\"\n              id=\"field\"\n              value={username}\n              onChange={handleUsernameChange}\n              required\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"room\">Meeting name:</label>\n            <input\n              type=\"text\"\n              id=\"room\"\n              value={roomName}\n              onChange={handleRoomNameChange}\n              required\n            />\n          </div>\n          <button type=\"submit\">Submit</button>\n        </form> */}\n      </Row>\n    </Container>\n  );\n};\n\nexport default ControlPanel;","import React, { useState, useEffect, useRef } from \"react\";\n// import {Container, Row, Col, Button} from 'react-bootstrap'\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMicrophoneSlash, faCamera } from \"@fortawesome/free-solid-svg-icons\";\n\nconst helpers = require(\"./helpers\");\nconst muteYourAudio = helpers.muteYourAudio;\nconst unmuteYourAudio = helpers.unmuteYourAudio;\n\nconst User = ({ user, mute, local = \"\" }) => {\n  const [videoTracks, setVideoTracks] = useState([]);\n  const [audioTracks, setAudioTracks] = useState([]);\n  const [muted, setMute] = useState(false);\n  const [vmute, setVmute] = useState(false);\n  const [reaction, setReaction] = useState(\"\");\n  // const [emotion, setEmotion] = useState(null);\n  // const [emotion_style, setEmotion_Style] = useState(\"participant-video\");\n\n  const videoref = useRef();\n  const audioref = useRef();\n  let locals = \"black-box\";\n\n  console.log(\"User.js\", user.identity);\n\n  const toggleMute = (muted) => {\n    setMute(muted);\n    console.log(\"toggle mute\", muted);\n  };\n\n  const toggleVmute = (muted) => {\n    console.log(\"toggleVmute\", muted);\n    setVmute(muted);\n  };\n\n  const trackpubsToTracks = (trackMap) =>\n    Array.from(trackMap.values())\n      .map((publication) => publication.track)\n      .filter((track) => track !== null);\n\n  function attachRemoteDataTrack(div, track) {\n    console.log(div);\n    let d = document.getElementById(div);\n    console.log(d, \"user.id DIV\");\n    let dataDiv = document.createElement(\"div\");\n    dataDiv.setAttribute(\"id\", track.sid);\n    dataDiv.setAttribute(\"class\", \"emoji\");\n    d.appendChild(dataDiv);\n  }\n  function animateDataLabel(div, startClass) {\n    setTimeout(function () {\n      div.classList.remove(startClass);\n    }, 5000);\n    div.classList.add(startClass);\n  }\n\n  function addToRemoteDataLabel(newText, dataTrackSID) {\n    let remoteDataLabel = document.getElementById(dataTrackSID);\n    remoteDataLabel.innerHTML = newText;\n    animateDataLabel(remoteDataLabel, \"appear\");\n  }\n\n  useEffect(() => {\n    setVideoTracks(trackpubsToTracks(user.videoTracks));\n    setAudioTracks(trackpubsToTracks(user.audioTracks));\n\n    user.videoTracks.forEach((track) => {\n      track.on(\"trackEnabled\", toggleVmute.bind(this, false));\n      track.on(\"trackDisabled\", toggleVmute.bind(this, true));\n    });\n\n    user.audioTracks.forEach((track) => {\n      track.on(\"trackEnabled\", toggleMute.bind(this, false));\n      track.on(\"trackDisabled\", toggleMute.bind(this, true));\n    });\n\n    const trackSubscribed = (track) => {\n      console.log(track, \"track subs\");\n      if (track.kind === \"video\") {\n        setVmute(!track.isEnabled);\n        setVideoTracks((videoTracks) => [...videoTracks, track]);\n      } else if (track.kind === \"audio\") {\n        setMute(!track.isEnabled);\n        setAudioTracks((audioTracks) => [...audioTracks, track]);\n      } else if (track.kind == \"data\") {\n        // Registering addToRemoteDataLabel(...) event handler Remote Data Track receive\n        track.on(\"message\", (data) => {\n          console.log(\"DATA REACTION\");\n          console.log(JSON.parse(data).emojiData, track.sid);\n          console.log(JSON.parse(data).user, \"reaction id\");\n          // setReaction(JSON.parse(data).emojiData);\n          attachRemoteDataTrack(JSON.parse(data).user, track);\n          addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\n        });\n        // Attaching the data track to a display label\n        //attachRemoteDataTrack(JSON.parse(data).id, track);\n        console.log(\"TRACK\");\n        console.log(\"TRACK\", track);\n      }\n    };\n\n    const trackUnsubscribed = (track) => {\n      if (track.kind === \"video\") {\n        setVideoTracks((videoTracks) => videoTracks.filter((v) => v !== track));\n      } else if (track.kind === \"audio\") {\n        setAudioTracks((audioTracks) => audioTracks.filter((a) => a !== track));\n      }\n      // else if (track.kind === \"data\") {\n      //   document.getElementById(track.sid).remove();\n      // }\n    };\n\n    user.on(\"trackSubscribed\", trackSubscribed);\n    user.on(\"trackUnsubscribed\", trackUnsubscribed);\n\n    return () => {\n      setVideoTracks([]);\n      setAudioTracks([]);\n      user.removeAllListeners();\n    };\n  }, [user]);\n\n  useEffect(() => {\n    const videoTrack = videoTracks[0];\n    if (videoTrack) {\n      console.log(\"User.js attach()\", user.identity);\n      videoTrack.attach(videoref.current);\n      return () => {\n        console.log(\"User.js detach()\", user.identity);\n        videoTrack.detach();\n      };\n    }\n  }, [videoTracks]);\n\n  useEffect(() => {\n    const audioTrack = audioTracks[0];\n    if (audioTrack) {\n      audioTrack.attach(audioref.current);\n      return () => {\n        audioTrack.detach();\n      };\n    }\n  }, [audioTracks]);\n\n  if (local === \"i\") {\n    locals = \"participant-video-emptyi\";\n  } else {\n    locals = \"participant-video-empty\";\n  }\n\n  return (\n    <div className=\"user-camera\">\n      <div id={user.sid} className=\"user-camera-reaction\"></div>\n\n      <div className=\"user-camera-box\">\n        {vmute ? (\n          <div className=\"black-box\">fds</div>\n        ) : (\n          // <video className={\"participant-video-empty\"} height=\"120\"></video>\n          \"\"\n        )}\n        {vmute ? (\n          <FontAwesomeIcon\n            className={\"empty-icon-video\"}\n            icon={faCamera}\n            size=\"2x\"\n          />\n        ) : (\n          // <video className={\"participant-video-empty\"} height=\"120\"></video>\n          \"\"\n        )}\n\n        {vmute ? (\n          <video className={locals} width=\"100%\" ref={videoref} />\n        ) : (\n          // <video className={\"participant-video-empty\"} height=\"120\"></video>\n          <video\n            className={\"participant-video\"}\n            width=\"100%\"\n            ref={videoref}\n            autoPlay={true}\n          />\n        )}\n      </div>\n\n      <div className=\"participant-border\">\n        <div className=\"participant-border-name\">{user.identity}</div>\n\n        {muted ? (\n          <div className=\"muted-bg\">\n            <FontAwesomeIcon\n              className={\"muted\"}\n              icon={faMicrophoneSlash}\n              size=\"1x\"\n            />\n          </div>\n        ) : (\n          \"\"\n        )}\n      </div>\n      {mute ? (\n        <audio ref={audioref} autoPlay={true} muted />\n      ) : (\n        <audio ref={audioref} autoPlay={true} muted />\n      )}\n    </div>\n  );\n};\n\nexport default User;\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Row, Col, Button, Container } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMehBlank,\n  faGrinStars,\n  faMeh,\n  faTired,\n  faFrownOpen,\n  faSadTear,\n  faLaughBeam,\n  faAngry,\n  faUsers,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst DominantUser = ({ room }) => {\n  const [videoTrackss, setVideoTrackss] = useState([]);\n  const [audioTrackss, setAudioTrackss] = useState([]);\n  const [emotion, setEmotion] = useState(\"-\");\n  const [emotion_style, setEmotion_Style] = useState(\"participant-video\");\n  const [dominant, setDominant] = useState(null);\n\n  const videoref = useRef();\n  const audioref = useRef();\n\n  function attachRemoteDataTrack(div, track) {\n    console.log(div);\n    let d = document.getElementById(div);\n    console.log(d, \"user.id DIV\");\n    let dataDiv = document.createElement(\"div\");\n    dataDiv.setAttribute(\"id\", track.sid);\n    dataDiv.setAttribute(\"class\", \"emoji\");\n    d.appendChild(dataDiv);\n  }\n\n  function addToRemoteDataLabel(newText, dataTrackSID) {\n    let remoteDataLabel = document.getElementById(dataTrackSID);\n    remoteDataLabel.innerHTML = newText;\n    // animateDataLabel(remoteDataLabel, \"appear\");\n  }\n\n  useEffect(() => {\n    const ParticipantDominantSpeaker = (user) => {\n      setDominant(user);\n      console.log(\"new dominant speaker Dominant.js\");\n    };\n    if (room !== null) {\n      room.on(\"dominantSpeakerChanged\", ParticipantDominantSpeaker);\n    }\n  }, [room]);\n\n  const trackpubsToTracks = (trackMap) =>\n    Array.from(trackMap.values())\n      .map((publication) => publication.track)\n      .filter((track) => track !== null);\n\n  useEffect(() => {\n    if (dominant != null) {\n      setVideoTrackss(trackpubsToTracks(dominant.videoTracks));\n      setAudioTrackss(trackpubsToTracks(dominant.audioTracks));\n\n      const trackSubscribed = (track) => {\n        if (track.kind === \"video\") {\n          setVideoTrackss((videoTracks) => [...videoTracks, track]);\n        } else if (track.kind === \"audio\") {\n          setAudioTrackss((audioTracks) => [...audioTracks, track]);\n        } else if (track.kind == \"data\") {\n          track.on(\"message\", (data) => {\n            // attachRemoteDataTrack(JSON.parse(data).user, track);\n            // addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\n            console.log(\n              JSON.parse(data).user,\n              JSON.parse(data).emojiData,\n              JSON.parse(data).identity,\n              \"Dominant-REACTION\"\n            );\n          });\n        }\n      };\n\n      const trackUnsubscribed = (track) => {\n        if (track.kind === \"video\") {\n          setVideoTrackss((videoTracks) =>\n            videoTracks.filter((v) => v !== track)\n          );\n        } else if (track.kind === \"audio\") {\n          setAudioTrackss((audioTracks) =>\n            audioTracks.filter((v) => v !== track)\n          );\n        }\n      };\n\n      dominant.on(\"trackSubscribed\", trackSubscribed);\n      dominant.on(\"trackUnsubscribed\", trackUnsubscribed);\n\n      return () => {\n        setVideoTrackss([]);\n        setAudioTrackss([]);\n        dominant.removeAllListeners();\n      };\n    }\n  }, [dominant]);\n\n  const takeSnapshot = (videoElement) => {\n    var imageCapture = new ImageCapture(videoElement);\n    imageCapture\n      .grabFrame()\n      .then((bitmap) => {\n        let canvas = document.createElement(\"canvas\");\n        canvas.width = bitmap.width;\n        canvas.height = bitmap.height;\n        let context = canvas.getContext(\"2d\");\n\n        context.drawImage(bitmap, 0, 0);\n        canvas.toBlob(function (blob) {\n          var reader = new FileReader();\n          reader.addEventListener(\"loadend\", () => {\n            fetch(reader.result)\n              .then((res) => res.blob())\n              .then((blob) => {\n                const fetchUrl =\n                  \"/video/snapShot?identity=\" +\n                  dominant.identity +\n                  \"&room=\" +\n                  room.name;\n                fetch(fetchUrl, {\n                  method: \"POST\",\n                  body: blob,\n                  headers: {\n                    \"Content-Type\": \"application/octet-stream\",\n                  },\n                }).then(() => {\n                  //Update the UI Sentiment to display the most up-to-date sentiment, according to backend\n                  fetchSentiment();\n                });\n              });\n          });\n          reader.readAsDataURL(blob);\n        }, \"image/jpeg\");\n      })\n      .catch(function (error) {\n        console.log(\"takePhoto() error: \", error);\n      });\n  };\n\n  const fetchSentiment = async () => {\n    const getUrl =\n      \"/emotion?identity=\" + dominant.identity + \"&room=\" + room.name;\n    const data = await fetch(getUrl, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }).then((res) => res.json());\n\n    setEmotion(data);\n  };\n\n  const startRecording = (audioElement, lengthInMS) => {\n    let recorder = new MediaRecorder(audioElement);\n    let data = [];\n\n    recorder.ondataavailable = (event) => data.push(event.data);\n    recorder.start();\n    // console.log(recorder.state + \" for \" + lengthInMS / 1000 + \" seconds...\");\n\n    let stopped = new Promise((resolve, reject) => {\n      recorder.onstop = resolve;\n      recorder.onerror = (event) => reject(event.name);\n    });\n\n    let recorded = wait(lengthInMS).then(\n      () => recorder.state == \"recording\" && recorder.stop()\n    );\n\n    return Promise.all([stopped, recorded]).then(() => data);\n  };\n\n  const recordAudio = (audioElement, lengthInMS) => {\n    const MediaStreamer = new MediaStream();\n    MediaStreamer.addTrack(audioElement);\n    const recorder = new MediaRecorder(MediaStreamer);\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: true,\n      })\n      .then(() => startRecording(MediaStreamer, lengthInMS))\n      .then((recordedChunks) => {\n        let recordedBlob = new Blob(recordedChunks, {\n          type: \"application/octet-stream\",\n        });\n        var reader = new FileReader();\n        reader.addEventListener(\"loadend\", () => {\n          fetch(reader.result)\n            .then((res) => res.blob())\n            .then((recordedBlob) => {\n              const fetchUrl =\n                \"/audio/snapShot?identity=\" +\n                dominant.identity +\n                \"&room=\" +\n                room.name;\n              fetch(fetchUrl, {\n                method: \"POST\",\n                body: recordedBlob,\n                headers: {\n                  \"Content-Type\": \"application/octet-stream\",\n                },\n              }).then(() => {\n                //Update the UI Sentiment to display the most up-to-date sentiment, according to backend\n                fetchSentiment();\n              });\n            });\n        });\n        reader.readAsDataURL(recordedBlob);\n      });\n  };\n\n  function wait(delayInMS) {\n    return new Promise((resolve) => setTimeout(resolve, delayInMS));\n  }\n\n  function stop(stream) {\n    stream.getTracks().forEach((track) => track.stop());\n    console.log(\"Recording stopped\");\n  }\n\n  useEffect(() => {\n    if (dominant != null) {\n      const videoTrack = videoTrackss[0];\n      if (videoTrack) {\n        videoTrack.attach(videoref.current);\n      }\n      // return () => {\n      //   console.log(\"User.js detach()\");\n      //   videoTrack.detach();\n      // };\n    }\n  }, [videoTrackss]);\n\n  //Takes a snapshot, which calls to backend API to update emotion, every time there is a change in who the Dominant User is AND every 2 seconds\n  useEffect(() => {\n    const videoSnapshotInterval = setInterval(() => {\n      if (dominant != null && videoTrackss[0].isEnabled) {\n        const videoTrack = videoTrackss[0];\n        if (videoTrack) {\n          takeSnapshot(videoTrack.mediaStreamTrack);\n        }\n      }\n    }, 2000);\n    return () => {\n      clearInterval(videoSnapshotInterval);\n    }\n  }, [videoTrackss]);\n\n  //Start a new audio recording interval and stop the old one for parsing every 6 seconds\n  useEffect(() => {\n    const intervalInMS = 10000;\n    const audioSnapshotInterval = setInterval(() => {\n      console.log(\"New function called\");\n      if (dominant != null && !videoTrackss[0].isEnabled) {\n        const audioTrack = audioTrackss[0];\n        if (audioTrack) {\n          // audioTrack.attach(audioref.current);\n          recordAudio(audioTrack.mediaStreamTrack, intervalInMS);\n        }\n      }\n    }, intervalInMS);\n    return () => {\n      clearInterval(audioSnapshotInterval);\n      //TODO: Place something here that stops the recordAudio function for the previous dominant user\n      //when the dominant user changes. This will allow the interval to restart for the new\n      //dominant user right when the change happens, giving us more accurate audio (hopefully)\n    };\n  }, [audioTrackss]);\n\n  let emoji;\n  let emotiontext;\n  if (emotion.emotion === \"happiness\") {\n    emoji = (\n      // <img\n      //   className=\"dominant-emotion-happy-img\"\n      //   src=\"https://img.icons8.com/color/48/000000/happy--v1.png\"\n      // />\n\n      <FontAwesomeIcon\n        className={\"dominant-emotion-happy emotion\"}\n        icon={faLaughBeam}\n        size=\"2x\"\n      />\n    );\n\n    emotiontext = \"HAPPY\";\n  } else if (emotion.emotion === \"anger\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-angry emotion\"}\n        icon={faAngry}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"ANGRY\";\n  } else if (emotion.emotion === \"sadness\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-sadness emotion\"}\n        icon={faSadTear}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"SADNESS\";\n  } else if (emotion.emotion === \"fear\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-fear emotion\"}\n        icon={faFrownOpen}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"FEAR\";\n  } else if (emotion.emotion === \"disgust\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-disgust emotion\"}\n        icon={faTired}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"DISGUST\";\n  } else if (emotion.emotion === \"neutral\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-neutral emotion\"}\n        icon={faMeh}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"NEUTRAL\";\n  } else if (emotion.emotion === \"surprise\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-surprised emotion\"}\n        icon={faGrinStars}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"SURPRISE\";\n  } else if (emotion.emotion === \"-\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-undefined emotion\"}\n        icon={faMehBlank}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"UNDEFINED\";\n  }\n\n  return (\n    <Row className=\"dominant-camera\">\n      <div id={\"das\"} className=\"dominant-camera-reaction\"></div>\n\n      {dominant ? (\n        <video\n          className={\"participant-video-dominant\"}\n          width=\"100%\"\n          height=\"100%\"\n          ref={videoref}\n          autoPlay={true}\n        />\n      ) : (\n        <div className={\"default-video-dominant\"}>\n          <FontAwesomeIcon\n            className={\"dominant-camera-default\"}\n            icon={faUsers}\n            size=\"2x\"\n          />\n        </div>\n      )}\n\n      <div className=\"dominant-border-emotion-icon\">\n        <h3 className=\"dominant-border-emotion-header\">Emotion</h3>\n        <div className=\"dominant-icon\">{emoji}</div>\n      </div>\n\n      <div className=\"dominant-border\">\n        {dominant ? (\n          <div className=\"dominant-border-name\">{dominant.identity}</div>\n        ) : (\n          \"\"\n        )}\n        <div className=\"dominant-border-emotion-background\">\n          <div className=\"dominant-border-emotion-text\">{emotiontext}</div>\n        </div>\n      </div>\n    </Row>\n  );\n};\n\nexport default DominantUser;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport Video from \"twilio-video\";\nimport User from \"./User\";\nimport DominantUser from \"./DominantUser\";\nimport { Container, Row, Col, Button, Navbar, Nav } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faTimes,\n  faVideoSlash,\n  faMicrophoneSlash,\n  faMicrophone,\n  faDesktop,\n  faVideo,\n  faThumbsUp,\n  faHeadphones,\n  faRssSquare,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst Room = ({ meetingname, token, emotion, logout, test }) => {\n  const [room, setRoom] = useState(null);\n  const [user, setUser] = useState([]);\n  //create user array here\n  //implement\n  const [newDomName, setNewDomName] = useState(\"\");\n  const [mute, setMute] = useState(false);\n  const [videomute, setVideomute] = useState(false);\n  const [deafenmute, setDeafenmute] = useState(false);\n  var intervalID;\n  var sentiment_intervalID;\n\n  // const reaction = require(\"./reaction\");\n  // const activateEmojiButtons = reaction.activateEmojiButtons;\n  // const addLocalData = reaction.addLocalData;\n  // activateEmojiButtons();\n  // addLocalData();\n  // const dataTrack = reaction.dataTrack;\n\n  const helpers = require(\"./helpers\");\n  const muteYourAudio = helpers.muteYourAudio;\n  const unmuteYourAudio = helpers.unmuteYourAudio;\n\n  const { LocalDataTrack } = require(`twilio-video`);\n\n  console.log(\"Room.js render\");\n\n  const takeSnapshot = (room, users) => {\n    if (!room.localParticipant.videoTracks.entries().next()) {\n      var videoElement = room.localParticipant.videoTracks.entries().next()\n        .value[1].track.mediaStreamTrack;\n      var imageCapture = new ImageCapture(videoElement);\n      imageCapture\n        .grabFrame()\n        .then((bitmap) => {\n          console.log(\"bitmap :\", bitmap);\n          let canvas = document.createElement(\"canvas\");\n          canvas.width = bitmap.width;\n          canvas.height = bitmap.height;\n          let context = canvas.getContext(\"2d\");\n\n          context.drawImage(bitmap, 0, 0);\n          canvas.toBlob(function (blob) {\n            // console.log(blob);\n            var reader = new FileReader();\n            reader.addEventListener(\"loadend\", () => {\n              fetch(reader.result)\n                .then((res) => res.blob())\n                .then((blob) => {\n                  // console.log(\"here is your binary: \", blob);\n                  fetch(\n                    \"/video/snapShot?identity=\" +\n                      room.localParticipant.identity +\n                      \"&room=\" +\n                      room.name,\n                    {\n                      method: \"POST\",\n                      body: blob,\n                      headers: {\n                        \"Content-Type\": \"application/octet-stream\",\n                      },\n                    }\n                  );\n                });\n            });\n            reader.readAsDataURL(blob);\n          }, \"image/jpeg\");\n        })\n        .catch(function (error) {\n          console.log(\"takePhoto() error: \", error);\n        });\n    }\n  };\n\n  //passing array here\n  //user state = array for rendering\n  const updateUserSentiments = (users) => {\n    console.log(users);\n    users.forEach((u) => {\n      fetch(\"/video/emotion?identity=\" + u.identity + \"&room=\" + room.name, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((res) => {\n        u.emotion = res.body.emotion;\n      });\n    });\n  };\n\n  const restartSentiment = (user) => {\n    if (sentiment_intervalID) {\n      window.clearInterval(sentiment_intervalID);\n    }\n    sentiment_intervalID = window.setInterval(\n      updateUserSentiments,\n      10000,\n      user\n    );\n  };\n\n  useEffect(() => {\n    console.log(\"dominant speacjer Room.js effect\");\n\n    const participantConnected = (new_user) => {\n      console.log(\"Room.js - particiapnt connected\", new_user);\n      //add user to array\n      setUser((prevusers) => [...prevusers, new_user]);\n\n      restartSentiment(user);\n    };\n\n    const participantDisconnected = (gone_user) => {\n      console.log(\"Room.js - particiapnt disconnected\", gone_user, user);\n\n      //remove user from array\n      setUser((prevusers) => prevusers.filter((p) => p !== gone_user));\n      // setUser((prevusers) => prevusers.splice(prevusers.indexOf(gone_user), 1));\n      restartSentiment(user);\n      console.log(user);\n    };\n\n    const ParticipantNewDominantSpeaker = (user) => {\n      if (user !== null) {\n        // console.log(\"new dominant speaker Room.js\");\n        setNewDomName(user.identity);\n      } else if (user === null) {\n        setNewDomName(null);\n      }\n    };\n\n    const participantRemoteVideoMuted = (track, user) => {\n      // console.log(\"Room.js - Track disable\", track, user);\n    };\n\n    const participantRemotedAudioMuted = (track, user) => {};\n\n    let dataTrack; // add this at the top with the other variable declarations\n\n    function addToLocalDataLabel(newText) {\n      let localDataLabel = document.getElementById(\"datalocal\");\n      localDataLabel.innerHTML = newText;\n      animateDataLabel(localDataLabel, \"appear\");\n    }\n\n    function sendDataToRoom(data, id, identity) {\n      dataTrack.send(\n        JSON.stringify({\n          emojiData: data,\n          user: id,\n          identity: identity,\n        })\n      );\n    }\n\n    function emojiButtonHandler(event) {\n      let emojiButton = event.target;\n      let emojiText = emojiButton.innerHTML;\n      addToLocalDataLabel(emojiText);\n\n      setRoom((currentRoom) => {\n        console.log(\"id\", currentRoom);\n        sendDataToRoom(\n          emojiText,\n          currentRoom.localParticipant.sid,\n          currentRoom.identity\n        );\n        return currentRoom;\n      });\n      console.log(\"id\", room, \"fdsafsadas\");\n    }\n\n    function activateEmojiButtons() {\n      let emojiButtonGroup = document.getElementsByClassName(\"emojibuttons\");\n      let emojiButton;\n      for (let i = 0; i < emojiButtonGroup.length; i++) {\n        emojiButton = emojiButtonGroup[i];\n        emojiButton.addEventListener(\"click\", emojiButtonHandler);\n      }\n    }\n\n    activateEmojiButtons();\n\n    function addLocalData() {\n      // Creates a Local Data Track\n      var localDataTrack = new LocalDataTrack();\n      dataTrack = localDataTrack;\n    }\n    addLocalData();\n\n    function animateDataLabel(div, startClass) {\n      setTimeout(function () {\n        div.classList.remove(startClass);\n      }, 1000);\n      div.classList.add(startClass);\n    }\n\n    Video.connect(token, {\n      name: meetingname,\n      dominantSpeaker: true,\n      audio: true,\n      video: true,\n    }).then((room) => {\n      console.log(\"Room.js - line 59 - video.connect\", room);\n      setRoom(room);\n      // Publishing the local Data Track to the Room\n      // room.localParticipant.publishTrack(dataTrack);\n      //intervalID = window.setInterval(takeSnapshot, 10000, room,user);\n      room.on(\"participantConnected\", participantConnected);\n      room.on(\"participantDisconnected\", participantDisconnected);\n      room.on(\"dominantSpeakerChanged\", ParticipantNewDominantSpeaker);\n      room.on(\"trackDisabled\", participantRemoteVideoMuted);\n      room.localParticipant.publishTrack(dataTrack);\n      room.participants.forEach(participantConnected);\n      intervalID = window.setInterval(takeSnapshot, 50000, room, user);\n    });\n\n    return () => {\n      if (intervalID) {\n        window.clearInterval(intervalID);\n      }\n      setRoom((currentRoom) => {\n        if (currentRoom && currentRoom.localParticipant.state === \"connected\") {\n          currentRoom.localParticipant.tracks.forEach(function (\n            trackPublication\n          ) {\n            trackPublication.track.stop();\n          });\n          console.log(\"disconnect!!!!!!\");\n          currentRoom.disconnect();\n          return null;\n        } else {\n          return currentRoom;\n        }\n      });\n    };\n  }, [meetingname, token]);\n\n  const mutecallback = useCallback(() => {\n    console.log(\"called mutecallback, button pressed\");\n    if (mute === false && room !== null) {\n      helpers.muteYourAudio(room);\n      setMute(true);\n    } else if (mute === true && room !== null) {\n      helpers.unmuteYourAudio(room);\n      setMute(false);\n    }\n  }, [mute, room]);\n\n  const mutevideocallback = useCallback(() => {\n    console.log(\"called mutevideocallback, button pressed\");\n    if (videomute === false && room !== null) {\n      helpers.muteYourVideo(room);\n      setVideomute(true);\n    } else if (videomute === true && room !== null) {\n      helpers.unmuteYourVideo(room);\n      setVideomute(false);\n    }\n  }, [videomute, room]);\n\n  const defeancallback = useCallback(() => {\n    console.log(\"called deafencallback, button pressed\");\n    if (deafenmute === false && room !== null) {\n      muteYourAudio(room);\n      setDeafenmute(true);\n    } else if (deafenmute === true && room != null) {\n      unmuteYourAudio(room);\n      setDeafenmute(false);\n    }\n  }, [room, deafenmute]);\n\n  const logoutcallback = useCallback(() => {\n    console.log(\"testing - line 125!!!!!!\", room);\n    if (room && room.localParticipant.state === \"connected\") {\n      room.localParticipant.tracks.forEach(function (trackPublication) {\n        if (\n          trackPublication.track.kind == \"video\" ||\n          trackPublication.track.kind == \"audio\"\n        ) {\n          trackPublication.track.stop();\n        }\n      });\n      //debugger;\n      room.disconnect();\n    }\n    logout();\n  }, [room]);\n\n  const remoteParticipants = user.map((user, index) => (\n    <User key={index} user={user} mute={deafenmute} />\n  ));\n\n  return (\n    <div className=\"room\">\n      <Container className=\"cameras\" fluid=\"true\">\n        <Row className=\"cameras-row\">\n          <Col sm={2} className=\"local-participant\">\n            {room ? (\n              <div className=\"local-participant-camera\">\n                <User\n                  key={room.localParticipant.sid}\n                  user={room.localParticipant}\n                  mute={deafenmute}\n                  local={\"i\"}\n                />\n                <div id=\"datalocal\" className=\"emoji\"></div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"remote-participants\">{remoteParticipants}</div>\n          </Col>\n          <Col sm={10} className=\"dominant\">\n            <DominantUser\n              className=\"dominant-user\"\n              key={\"dominant\"}\n              room={room}\n            />\n            <div className=\"dominant-header-bg\">\n              <div className=\"dominant-header\">\n                <div className=\"dominant-header-room\">\n                  Room Name: {meetingname}\n                </div>\n                <div className=\"dominant-header-speaker\">\n                  Talking: {newDomName}\n                </div>\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n      <Container fluid=\"true\">\n        <div className=\"toolbar\">\n          <div className=\"toolbar-items\">\n            <div className=\"logoutbutton\">\n              <button\n                className=\"logoutbutton-btn danger\"\n                onClick={logoutcallback}\n              >\n                LOG OUT\n              </button>\n            </div>\n            <div className=\"btns-toolbar\">\n              <div className=\"col-audio\">\n                {mute ? (\n                  <button className=\"btn1 info\" onClick={mutecallback}>\n                    <span className=\"btn2\">Mute</span>\n                    <FontAwesomeIcon\n                      className=\"btnsize\"\n                      icon={faMicrophoneSlash}\n                    />\n                  </button>\n                ) : (\n                  <button className=\"btn1 info\" onClick={mutecallback}>\n                    <span className=\"btn2\">Mute</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faMicrophone} />\n                  </button>\n                )}\n              </div>\n              <div className=\"col-video\">\n                {videomute ? (\n                  <button className=\"btn1 info\" onClick={mutevideocallback}>\n                    <span className=\"btn2\">Camera</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faVideoSlash} />\n                  </button>\n                ) : (\n                  <button className=\"btn1 info\" onClick={mutevideocallback}>\n                    <span className=\"btn2\">Camera</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faVideo} />\n                  </button>\n                )}\n              </div>\n              <div className=\"col-silence\">\n                {deafenmute ? (\n                  <button className=\"btn1 info\" onClick={defeancallback}>\n                    <span className=\"btn2\">Silence</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faTimes} />\n                  </button>\n                ) : (\n                  <button className=\"btn1 info\" onClick={defeancallback}>\n                    <span className=\"btn2\">Silence</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faHeadphones} />\n                  </button>\n                )}\n              </div>\n            </div>\n            <div className=\"col-emoji\">\n              <div\n                className=\"emojiPanel\"\n                style={{\n                  padding: \"1rem\",\n                }}\n              >\n                <div className=\"reaction-container\">\n                  <span className=\"reaction-label-like\">Like</span>\n                  <button\n                    id=\"emoji-wink\"\n                    className=\"btn3 warning emojibuttons\"\n                    style={{\n                      marginRight: \"1rem\",\n                    }}\n                  >\n                    <span className=\"reaction-entity\">&#128077;</span>\n                  </button>\n                </div>\n\n                <div className=\"reaction-container\">\n                  <span className=\"reaction-label-dislike\">Dislike</span>\n                  <button\n                    id=\"emoji-eyes\"\n                    className=\"btn3 warning emojibuttons\"\n                    style={{\n                      marginRight: \"1rem\",\n                    }}\n                  >\n                    <span className=\"reaction-entity\">&#128078;</span>\n                  </button>\n                </div>\n\n                <div className=\"reaction-container\">\n                  <span className=\"reaction-label-love\">Love</span>\n                  <button\n                    id=\"emoji-heart\"\n                    className=\"btn3 warning emojibuttons\"\n                    style={{\n                      marginRight: \"1rem\",\n                    }}\n                  >\n                    <span className=\"reaction-entity\">&#10084;</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Container>\n    </div>\n  );\n};\n\nexport default Room;\n","import React, { useState, useCallback } from \"react\";\nimport ControlPanel from \"./ControlPanel\";\nimport Room from \"./Room\";\n\nconst Meeting = () => {\n  const [username, setUsername] = useState(\"\");\n  const [meetingname, setRoomName] = useState(\"\");\n  const [token, setToken] = useState(null);\n\n  const roomname_change = useCallback((event) => {\n    setRoomName(event.target.value);\n  }, []);\n\n  const username_change = useCallback((event) => {\n    setUsername(event.target.value);\n  }, []);\n\n  const submit = useCallback(\n    async (event) => {\n      event.preventDefault();\n\n      const data = await fetch(\"/video/token\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          identity: username,\n          room: meetingname,\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((res) => res.json());\n\n      setToken(data.token);\n    },\n    [meetingname, username]\n  );\n\n  const logout = useCallback((event) => {\n    setToken(null);\n  }, []);\n\n  let result;\n  if (token) {\n    result = <Room meetingname={meetingname} token={token} logout={logout} />;\n  } else {\n    result = (\n      <ControlPanel\n        username={username}\n        roomName={meetingname}\n        handleUsernameChange={username_change}\n        handleRoomNameChange={roomname_change}\n        handleSubmit={submit}\n      />\n    );\n  }\n  return result;\n};\n\nexport default Meeting;\n","import React from \"react\";\nimport Meeting from \"./components/Meeting\";\n// import {BrowserFouter as Router, Switch, Route} from \"react-router-dom\"\n\nfunction App() {\n  return (\n    <div>\n      <Meeting />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport \"./css/App.css\";\nimport \"./css/style.css\";\n\nimport App from \"./App\";\n\n// import reportWebVitals from './reportWebVitals';\n\n// button.addEventListener('click', () => {\n//   Twilio.Video.createLocalVideoTrack().then(track => {\n//     container.append(track.attach());\n//     button.remove();\n//   });\n//   button.remove();\n// })\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"body\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","\n\n/**\n * Mute/unmute your media in a Room.\n * @param {Room} room - The Room you have joined\n * @param {'audio'|'video'} kind - The type of media you want to mute/unmute\n * @param {'mute'|'unmute'} action - Whether you want to mute/unmute\n */\nfunction muteOrUnmuteYourMedia(room, kind, action) {\n  const publications = kind === 'audio'\n    ? room.localParticipant.audioTracks\n    : room.localParticipant.videoTracks;\n\n  publications.forEach(function(publication) {\n    if (action === 'mute') {\n      console.log(\"disable local audio\");\n      publication.track.disable();\n    } else {\n      publication.track.enable();\n    }\n  });\n}\n\n/**\n * Mute your audio in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction muteYourAudio(room) {\n  muteOrUnmuteYourMedia(room, 'audio', 'mute');\n}\n\n/**\n * Mute your video in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction muteYourVideo(room) {\n  muteOrUnmuteYourMedia(room, 'video', 'mute');\n}\n\n/**\n * Unmute your audio in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction unmuteYourAudio(room) {\n  muteOrUnmuteYourMedia(room, 'audio', 'unmute');\n}\n\n/**\n * Unmute your video in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction unmuteYourVideo(room) {\n  muteOrUnmuteYourMedia(room, 'video', 'unmute');\n}\n\n/**\n * A RemoteParticipant muted or unmuted its media.\n * @param {Room} room - The Room you have joined\n * @param {function} onMutedMedia - Called when a RemoteParticipant muted its media\n * @param {function} onUnmutedMedia - Called when a RemoteParticipant unmuted its media\n * @returns {void}\n */\nfunction participantMutedOrUnmutedMedia(room, onMutedMedia, onUnmutedMedia) {\n  room.on('trackSubscribed', function(track, publication, participant) {\n    track.on('disabled', function() {\n      return onMutedMedia(track, participant);\n    });\n    track.on('enabled', function() {\n      return onUnmutedMedia(track, participant);\n    });\n  });\n}\n\nexports.muteYourAudio = muteYourAudio;\nexports.muteYourVideo = muteYourVideo;\nexports.unmuteYourAudio = unmuteYourAudio;\nexports.unmuteYourVideo = unmuteYourVideo;\nexports.participantMutedOrUnmutedMedia = participantMutedOrUnmutedMedia;"],"sourceRoot":""}