{"ast":null,"code":"import _regeneratorRuntime from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useCallback}from\"react\";import{Row,Col,Button,Container}from\"react-bootstrap\";import\"bootstrap/dist/css/bootstrap.min.css\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faMehBlank,faGrinStars,faMeh,faTired,faFrownOpen,faSadTear,faLaughBeam,faAngry,faUsers}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DominantUser=function DominantUser(_ref){var room=_ref.room;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),videoTrackss=_useState2[0],setVideoTrackss=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),audioTrackss=_useState4[0],setAudioTrackss=_useState4[1];var _useState5=useState(\"-\"),_useState6=_slicedToArray(_useState5,2),emotion=_useState6[0],setEmotion=_useState6[1];var _useState7=useState(\"participant-video\"),_useState8=_slicedToArray(_useState7,2),emotion_style=_useState8[0],setEmotion_Style=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),dominant=_useState10[0],setDominant=_useState10[1];var videoref=useRef();var audioref=useRef();function attachRemoteDataTrack(div,track){console.log(div);var d=document.getElementById(div);console.log(d,\"user.id DIV\");var dataDiv=document.createElement(\"div\");dataDiv.setAttribute(\"id\",track.sid);dataDiv.setAttribute(\"class\",\"emoji\");d.appendChild(dataDiv);}function addToRemoteDataLabel(newText,dataTrackSID){var remoteDataLabel=document.getElementById(dataTrackSID);remoteDataLabel.innerHTML=newText;// animateDataLabel(remoteDataLabel, \"appear\");\n}useEffect(function(){var ParticipantDominantSpeaker=function ParticipantDominantSpeaker(user){setDominant(user);console.log(\"new dominant speaker Dominant.js\");};if(room!==null){room.on(\"dominantSpeakerChanged\",ParticipantDominantSpeaker);}},[room]);var trackpubsToTracks=function trackpubsToTracks(trackMap){return Array.from(trackMap.values()).map(function(publication){return publication.track;}).filter(function(track){return track!==null;});};useEffect(function(){if(dominant!=null){setVideoTrackss(trackpubsToTracks(dominant.videoTracks));setAudioTrackss(trackpubsToTracks(dominant.audioTracks));var trackSubscribed=function trackSubscribed(track){if(track.kind===\"video\"){setVideoTrackss(function(videoTracks){return[].concat(_toConsumableArray(videoTracks),[track]);});}else if(track.kind===\"audio\"){setAudioTrackss(function(audioTracks){return[].concat(_toConsumableArray(audioTracks),[track]);});}else if(track.kind==\"data\"){track.on(\"message\",function(data){// attachRemoteDataTrack(JSON.parse(data).user, track);\n// addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\nconsole.log(JSON.parse(data).user,JSON.parse(data).emojiData,JSON.parse(data).identity,\"Dominant-REACTION\");});}};var trackUnsubscribed=function trackUnsubscribed(track){if(track.kind===\"video\"){setVideoTrackss(function(videoTracks){return videoTracks.filter(function(v){return v!==track;});});}else if(track.kind===\"audio\"){setAudioTrackss(function(audioTracks){return audioTracks.filter(function(v){return v!==track;});});}};dominant.on(\"trackSubscribed\",trackSubscribed);dominant.on(\"trackUnsubscribed\",trackUnsubscribed);return function(){setVideoTrackss([]);setAudioTrackss([]);dominant.removeAllListeners();};}},[dominant]);var takeSnapshot=function takeSnapshot(videoElement){var imageCapture=new ImageCapture(videoElement);imageCapture.grabFrame().then(function(bitmap){var canvas=document.createElement(\"canvas\");canvas.width=bitmap.width;canvas.height=bitmap.height;var context=canvas.getContext(\"2d\");context.drawImage(bitmap,0,0);canvas.toBlob(function(blob){var reader=new FileReader();reader.addEventListener(\"loadend\",function(){fetch(reader.result).then(function(res){return res.blob();}).then(function(blob){var fetchUrl=\"/video/snapShot?identity=\"+dominant.identity+\"&room=\"+room.name;fetch(fetchUrl,{method:\"POST\",body:blob,headers:{\"Content-Type\":\"application/octet-stream\"}}).then(function(){//Update the UI Sentiment to display the most up-to-date sentiment, according to backend\nfetchSentiment();});});});reader.readAsDataURL(blob);},\"image/jpeg\");}).catch(function(error){console.log(\"takePhoto() error: \",error);});};var fetchSentiment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getUrl,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getUrl=\"/emotion?identity=\"+dominant.identity+\"&room=\"+room.name;_context.next=3;return fetch(getUrl,{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();});case 3:data=_context.sent;setEmotion(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchSentiment(){return _ref2.apply(this,arguments);};}();var startRecording=function startRecording(audioElement,lengthInMS){var recorder=new MediaRecorder(audioElement);var data=[];recorder.ondataavailable=function(event){return data.push(event.data);};recorder.start();// console.log(recorder.state + \" for \" + lengthInMS / 1000 + \" seconds...\");\nvar stopped=new Promise(function(resolve,reject){recorder.onstop=resolve;recorder.onerror=function(event){return reject(event.name);};});var recorded=wait(lengthInMS).then(function(){return recorder.state==\"recording\"&&recorder.stop();});return Promise.all([stopped,recorded]).then(function(){return data;});};var recordAudio=function recordAudio(audioElement,lengthInMS){var MediaStreamer=new MediaStream();MediaStreamer.addTrack(audioElement);var recorder=new MediaRecorder(MediaStreamer);navigator.mediaDevices.getUserMedia({audio:true}).then(function(){return startRecording(MediaStreamer,lengthInMS);}).then(function(recordedChunks){var recordedBlob=new Blob(recordedChunks,{type:\"application/octet-stream\"});var reader=new FileReader();reader.addEventListener(\"loadend\",function(){fetch(reader.result).then(function(res){return res.blob();}).then(function(recordedBlob){var fetchUrl=\"/audio/snapShot?identity=\"+dominant.identity+\"&room=\"+room.name;fetch(fetchUrl,{method:\"POST\",body:recordedBlob,headers:{\"Content-Type\":\"application/octet-stream\"}}).then(function(){//Update the UI Sentiment to display the most up-to-date sentiment, according to backend\nfetchSentiment();});});});reader.readAsDataURL(recordedBlob);});};function wait(delayInMS){return new Promise(function(resolve){return setTimeout(resolve,delayInMS);});}function stop(stream){stream.getTracks().forEach(function(track){return track.stop();});console.log(\"Recording stopped\");}useEffect(function(){if(dominant!=null){var videoTrack=videoTrackss[0];if(videoTrack){videoTrack.attach(videoref.current);}// return () => {\n//   console.log(\"User.js detach()\");\n//   videoTrack.detach();\n// };\n}},[videoTrackss]);//Takes a snapshot, which calls to backend API to update emotion, every time there is a change in who the Dominant User is AND every 2 seconds\nuseEffect(function(){var videoSnapshotInterval=setInterval(function(){if(dominant!=null&&videoTrackss[0].isEnabled){var videoTrack=videoTrackss[0];if(videoTrack){takeSnapshot(videoTrack.mediaStreamTrack);}}},2000);return function(){clearInterval(videoSnapshotInterval);};},[videoTrackss]);//Start a new audio recording interval and stop the old one for parsing every 6 seconds\nuseEffect(function(){var intervalInMS=10000;var audioSnapshotInterval=setInterval(function(){console.log(\"New function called\");if(dominant!=null&&!videoTrackss[0].isEnabled){var audioTrack=audioTrackss[0];if(audioTrack){// audioTrack.attach(audioref.current);\nrecordAudio(audioTrack.mediaStreamTrack,intervalInMS);}}},intervalInMS);return function(){clearInterval(audioSnapshotInterval);//TODO: Place something here that stops the recordAudio function for the previous dominant user\n//when the dominant user changes. This will allow the interval to restart for the new\n//dominant user right when the change happens, giving us more accurate audio (hopefully)\n};},[audioTrackss]);var emoji;var emotiontext;if(emotion.emotion===\"happiness\"){emoji=/*#__PURE__*/ // <img\n//   className=\"dominant-emotion-happy-img\"\n//   src=\"https://img.icons8.com/color/48/000000/happy--v1.png\"\n// />\n_jsx(FontAwesomeIcon,{className:\"dominant-emotion-happy emotion\",icon:faLaughBeam,size:\"2x\"});emotiontext=\"HAPPY\";}else if(emotion.emotion===\"anger\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-angry emotion\",icon:faAngry,size:\"2x\"});emotiontext=\"ANGRY\";}else if(emotion.emotion===\"sadness\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-sadness emotion\",icon:faSadTear,size:\"2x\"});emotiontext=\"SADNESS\";}else if(emotion.emotion===\"fear\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-fear emotion\",icon:faFrownOpen,size:\"2x\"});emotiontext=\"FEAR\";}else if(emotion.emotion===\"disgust\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-disgust emotion\",icon:faTired,size:\"2x\"});emotiontext=\"DISGUST\";}else if(emotion.emotion===\"neutral\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-neutral emotion\",icon:faMeh,size:\"2x\"});emotiontext=\"NEUTRAL\";}else if(emotion.emotion===\"surprise\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-surprised emotion\",icon:faGrinStars,size:\"2x\"});emotiontext=\"SURPRISE\";}else if(emotion.emotion===\"-\"){emoji=/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-emotion-undefined emotion\",icon:faMehBlank,size:\"2x\"});emotiontext=\"UNDEFINED\";}return/*#__PURE__*/_jsxs(Row,{className:\"dominant-camera\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"das\",className:\"dominant-camera-reaction\"}),dominant?/*#__PURE__*/_jsx(\"video\",{className:\"participant-video-dominant\",width:\"100%\",height:\"100%\",ref:videoref,autoPlay:true}):/*#__PURE__*/_jsx(\"div\",{className:\"default-video-dominant\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"dominant-camera-default\",icon:faUsers,size:\"2x\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dominant-border-emotion-icon\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"dominant-border-emotion-header\",children:\"Emotion\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dominant-icon\",children:emoji})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dominant-border\",children:[dominant?/*#__PURE__*/_jsx(\"div\",{className:\"dominant-border-name\",children:dominant.identity}):\"\",/*#__PURE__*/_jsx(\"div\",{className:\"dominant-border-emotion-background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dominant-border-emotion-text\",children:emotiontext})})]})]});};export default DominantUser;","map":{"version":3,"sources":["/Users/javierjimenez/cuemeinDeploy/capstone/src/components/DominantUser.js"],"names":["React","useState","useEffect","useRef","useCallback","Row","Col","Button","Container","FontAwesomeIcon","faMehBlank","faGrinStars","faMeh","faTired","faFrownOpen","faSadTear","faLaughBeam","faAngry","faUsers","DominantUser","room","videoTrackss","setVideoTrackss","audioTrackss","setAudioTrackss","emotion","setEmotion","emotion_style","setEmotion_Style","dominant","setDominant","videoref","audioref","attachRemoteDataTrack","div","track","console","log","d","document","getElementById","dataDiv","createElement","setAttribute","sid","appendChild","addToRemoteDataLabel","newText","dataTrackSID","remoteDataLabel","innerHTML","ParticipantDominantSpeaker","user","on","trackpubsToTracks","trackMap","Array","from","values","map","publication","filter","videoTracks","audioTracks","trackSubscribed","kind","data","JSON","parse","emojiData","identity","trackUnsubscribed","v","removeAllListeners","takeSnapshot","videoElement","imageCapture","ImageCapture","grabFrame","then","bitmap","canvas","width","height","context","getContext","drawImage","toBlob","blob","reader","FileReader","addEventListener","fetch","result","res","fetchUrl","name","method","body","headers","fetchSentiment","readAsDataURL","catch","error","getUrl","json","startRecording","audioElement","lengthInMS","recorder","MediaRecorder","ondataavailable","event","push","start","stopped","Promise","resolve","reject","onstop","onerror","recorded","wait","state","stop","all","recordAudio","MediaStreamer","MediaStream","addTrack","navigator","mediaDevices","getUserMedia","audio","recordedChunks","recordedBlob","Blob","type","delayInMS","setTimeout","stream","getTracks","forEach","videoTrack","attach","current","videoSnapshotInterval","setInterval","isEnabled","mediaStreamTrack","clearInterval","intervalInMS","audioSnapshotInterval","audioTrack","emoji","emotiontext"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Row, Col, Button, Container } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMehBlank,\n  faGrinStars,\n  faMeh,\n  faTired,\n  faFrownOpen,\n  faSadTear,\n  faLaughBeam,\n  faAngry,\n  faUsers,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst DominantUser = ({ room }) => {\n  const [videoTrackss, setVideoTrackss] = useState([]);\n  const [audioTrackss, setAudioTrackss] = useState([]);\n  const [emotion, setEmotion] = useState(\"-\");\n  const [emotion_style, setEmotion_Style] = useState(\"participant-video\");\n  const [dominant, setDominant] = useState(null);\n\n  const videoref = useRef();\n  const audioref = useRef();\n\n  function attachRemoteDataTrack(div, track) {\n    console.log(div);\n    let d = document.getElementById(div);\n    console.log(d, \"user.id DIV\");\n    let dataDiv = document.createElement(\"div\");\n    dataDiv.setAttribute(\"id\", track.sid);\n    dataDiv.setAttribute(\"class\", \"emoji\");\n    d.appendChild(dataDiv);\n  }\n\n  function addToRemoteDataLabel(newText, dataTrackSID) {\n    let remoteDataLabel = document.getElementById(dataTrackSID);\n    remoteDataLabel.innerHTML = newText;\n    // animateDataLabel(remoteDataLabel, \"appear\");\n  }\n\n  useEffect(() => {\n    const ParticipantDominantSpeaker = (user) => {\n      setDominant(user);\n      console.log(\"new dominant speaker Dominant.js\");\n    };\n    if (room !== null) {\n      room.on(\"dominantSpeakerChanged\", ParticipantDominantSpeaker);\n    }\n  }, [room]);\n\n  const trackpubsToTracks = (trackMap) =>\n    Array.from(trackMap.values())\n      .map((publication) => publication.track)\n      .filter((track) => track !== null);\n\n  useEffect(() => {\n    if (dominant != null) {\n      setVideoTrackss(trackpubsToTracks(dominant.videoTracks));\n      setAudioTrackss(trackpubsToTracks(dominant.audioTracks));\n\n      const trackSubscribed = (track) => {\n        if (track.kind === \"video\") {\n          setVideoTrackss((videoTracks) => [...videoTracks, track]);\n        } else if (track.kind === \"audio\") {\n          setAudioTrackss((audioTracks) => [...audioTracks, track]);\n        } else if (track.kind == \"data\") {\n          track.on(\"message\", (data) => {\n            // attachRemoteDataTrack(JSON.parse(data).user, track);\n            // addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\n            console.log(\n              JSON.parse(data).user,\n              JSON.parse(data).emojiData,\n              JSON.parse(data).identity,\n              \"Dominant-REACTION\"\n            );\n          });\n        }\n      };\n\n      const trackUnsubscribed = (track) => {\n        if (track.kind === \"video\") {\n          setVideoTrackss((videoTracks) =>\n            videoTracks.filter((v) => v !== track)\n          );\n        } else if (track.kind === \"audio\") {\n          setAudioTrackss((audioTracks) =>\n            audioTracks.filter((v) => v !== track)\n          );\n        }\n      };\n\n      dominant.on(\"trackSubscribed\", trackSubscribed);\n      dominant.on(\"trackUnsubscribed\", trackUnsubscribed);\n\n      return () => {\n        setVideoTrackss([]);\n        setAudioTrackss([]);\n        dominant.removeAllListeners();\n      };\n    }\n  }, [dominant]);\n\n  const takeSnapshot = (videoElement) => {\n    var imageCapture = new ImageCapture(videoElement);\n    imageCapture\n      .grabFrame()\n      .then((bitmap) => {\n        let canvas = document.createElement(\"canvas\");\n        canvas.width = bitmap.width;\n        canvas.height = bitmap.height;\n        let context = canvas.getContext(\"2d\");\n\n        context.drawImage(bitmap, 0, 0);\n        canvas.toBlob(function (blob) {\n          var reader = new FileReader();\n          reader.addEventListener(\"loadend\", () => {\n            fetch(reader.result)\n              .then((res) => res.blob())\n              .then((blob) => {\n                const fetchUrl =\n                  \"/video/snapShot?identity=\" +\n                  dominant.identity +\n                  \"&room=\" +\n                  room.name;\n                fetch(fetchUrl, {\n                  method: \"POST\",\n                  body: blob,\n                  headers: {\n                    \"Content-Type\": \"application/octet-stream\",\n                  },\n                }).then(() => {\n                  //Update the UI Sentiment to display the most up-to-date sentiment, according to backend\n                  fetchSentiment();\n                });\n              });\n          });\n          reader.readAsDataURL(blob);\n        }, \"image/jpeg\");\n      })\n      .catch(function (error) {\n        console.log(\"takePhoto() error: \", error);\n      });\n  };\n\n  const fetchSentiment = async () => {\n    const getUrl =\n      \"/emotion?identity=\" + dominant.identity + \"&room=\" + room.name;\n    const data = await fetch(getUrl, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }).then((res) => res.json());\n\n    setEmotion(data);\n  };\n\n  const startRecording = (audioElement, lengthInMS) => {\n    let recorder = new MediaRecorder(audioElement);\n    let data = [];\n\n    recorder.ondataavailable = (event) => data.push(event.data);\n    recorder.start();\n    // console.log(recorder.state + \" for \" + lengthInMS / 1000 + \" seconds...\");\n\n    let stopped = new Promise((resolve, reject) => {\n      recorder.onstop = resolve;\n      recorder.onerror = (event) => reject(event.name);\n    });\n\n    let recorded = wait(lengthInMS).then(\n      () => recorder.state == \"recording\" && recorder.stop()\n    );\n\n    return Promise.all([stopped, recorded]).then(() => data);\n  };\n\n  const recordAudio = (audioElement, lengthInMS) => {\n    const MediaStreamer = new MediaStream();\n    MediaStreamer.addTrack(audioElement);\n    const recorder = new MediaRecorder(MediaStreamer);\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: true,\n      })\n      .then(() => startRecording(MediaStreamer, lengthInMS))\n      .then((recordedChunks) => {\n        let recordedBlob = new Blob(recordedChunks, {\n          type: \"application/octet-stream\",\n        });\n        var reader = new FileReader();\n        reader.addEventListener(\"loadend\", () => {\n          fetch(reader.result)\n            .then((res) => res.blob())\n            .then((recordedBlob) => {\n              const fetchUrl =\n                \"/audio/snapShot?identity=\" +\n                dominant.identity +\n                \"&room=\" +\n                room.name;\n              fetch(fetchUrl, {\n                method: \"POST\",\n                body: recordedBlob,\n                headers: {\n                  \"Content-Type\": \"application/octet-stream\",\n                },\n              }).then(() => {\n                //Update the UI Sentiment to display the most up-to-date sentiment, according to backend\n                fetchSentiment();\n              });\n            });\n        });\n        reader.readAsDataURL(recordedBlob);\n      });\n  };\n\n  function wait(delayInMS) {\n    return new Promise((resolve) => setTimeout(resolve, delayInMS));\n  }\n\n  function stop(stream) {\n    stream.getTracks().forEach((track) => track.stop());\n    console.log(\"Recording stopped\");\n  }\n\n  useEffect(() => {\n    if (dominant != null) {\n      const videoTrack = videoTrackss[0];\n      if (videoTrack) {\n        videoTrack.attach(videoref.current);\n      }\n      // return () => {\n      //   console.log(\"User.js detach()\");\n      //   videoTrack.detach();\n      // };\n    }\n  }, [videoTrackss]);\n\n  //Takes a snapshot, which calls to backend API to update emotion, every time there is a change in who the Dominant User is AND every 2 seconds\n  useEffect(() => {\n    const videoSnapshotInterval = setInterval(() => {\n      if (dominant != null && videoTrackss[0].isEnabled) {\n        const videoTrack = videoTrackss[0];\n        if (videoTrack) {\n          takeSnapshot(videoTrack.mediaStreamTrack);\n        }\n      }\n    }, 2000);\n    return () => {\n      clearInterval(videoSnapshotInterval);\n    }\n  }, [videoTrackss]);\n\n  //Start a new audio recording interval and stop the old one for parsing every 6 seconds\n  useEffect(() => {\n    const intervalInMS = 10000;\n    const audioSnapshotInterval = setInterval(() => {\n      console.log(\"New function called\");\n      if (dominant != null && !videoTrackss[0].isEnabled) {\n        const audioTrack = audioTrackss[0];\n        if (audioTrack) {\n          // audioTrack.attach(audioref.current);\n          recordAudio(audioTrack.mediaStreamTrack, intervalInMS);\n        }\n      }\n    }, intervalInMS);\n    return () => {\n      clearInterval(audioSnapshotInterval);\n      //TODO: Place something here that stops the recordAudio function for the previous dominant user\n      //when the dominant user changes. This will allow the interval to restart for the new\n      //dominant user right when the change happens, giving us more accurate audio (hopefully)\n    };\n  }, [audioTrackss]);\n\n  let emoji;\n  let emotiontext;\n  if (emotion.emotion === \"happiness\") {\n    emoji = (\n      // <img\n      //   className=\"dominant-emotion-happy-img\"\n      //   src=\"https://img.icons8.com/color/48/000000/happy--v1.png\"\n      // />\n\n      <FontAwesomeIcon\n        className={\"dominant-emotion-happy emotion\"}\n        icon={faLaughBeam}\n        size=\"2x\"\n      />\n    );\n\n    emotiontext = \"HAPPY\";\n  } else if (emotion.emotion === \"anger\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-angry emotion\"}\n        icon={faAngry}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"ANGRY\";\n  } else if (emotion.emotion === \"sadness\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-sadness emotion\"}\n        icon={faSadTear}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"SADNESS\";\n  } else if (emotion.emotion === \"fear\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-fear emotion\"}\n        icon={faFrownOpen}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"FEAR\";\n  } else if (emotion.emotion === \"disgust\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-disgust emotion\"}\n        icon={faTired}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"DISGUST\";\n  } else if (emotion.emotion === \"neutral\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-neutral emotion\"}\n        icon={faMeh}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"NEUTRAL\";\n  } else if (emotion.emotion === \"surprise\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-surprised emotion\"}\n        icon={faGrinStars}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"SURPRISE\";\n  } else if (emotion.emotion === \"-\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-undefined emotion\"}\n        icon={faMehBlank}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"UNDEFINED\";\n  }\n\n  return (\n    <Row className=\"dominant-camera\">\n      <div id={\"das\"} className=\"dominant-camera-reaction\"></div>\n\n      {dominant ? (\n        <video\n          className={\"participant-video-dominant\"}\n          width=\"100%\"\n          height=\"100%\"\n          ref={videoref}\n          autoPlay={true}\n        />\n      ) : (\n        <div className={\"default-video-dominant\"}>\n          <FontAwesomeIcon\n            className={\"dominant-camera-default\"}\n            icon={faUsers}\n            size=\"2x\"\n          />\n        </div>\n      )}\n\n      <div className=\"dominant-border-emotion-icon\">\n        <h3 className=\"dominant-border-emotion-header\">Emotion</h3>\n        <div className=\"dominant-icon\">{emoji}</div>\n      </div>\n\n      <div className=\"dominant-border\">\n        {dominant ? (\n          <div className=\"dominant-border-name\">{dominant.identity}</div>\n        ) : (\n          \"\"\n        )}\n        <div className=\"dominant-border-emotion-background\">\n          <div className=\"dominant-border-emotion-text\">{emotiontext}</div>\n        </div>\n      </div>\n    </Row>\n  );\n};\n\nexport default DominantUser;\n"]},"metadata":{},"sourceType":"module"}