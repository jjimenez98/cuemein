{"ast":null,"code":"import _regeneratorRuntime from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/javierjimenez/cuemeinDeploy/capstone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from\"react\";import ControlPanel from\"./ControlPanel\";import Room from\"./Room\";import{jsx as _jsx}from\"react/jsx-runtime\";var Meeting=function Meeting(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),meetingname=_useState4[0],setRoomName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),token=_useState6[0],setToken=_useState6[1];var roomname_change=useCallback(function(event){setRoomName(event.target.value);},[]);var username_change=useCallback(function(event){setUsername(event.target.value);},[]);var submit=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch(\"/video/token\",{method:\"POST\",body:JSON.stringify({identity:username,room:meetingname}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();});case 3:data=_context.sent;setToken(data.token);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[meetingname,username]);var logout=useCallback(function(event){setToken(null);},[]);var result;if(token){result=/*#__PURE__*/_jsx(Room,{meetingname:meetingname,token:token,logout:logout});}else{result=/*#__PURE__*/_jsx(ControlPanel,{username:username,roomName:meetingname,handleUsernameChange:username_change,handleRoomNameChange:roomname_change,handleSubmit:submit});}return result;};export default Meeting;","map":{"version":3,"sources":["/Users/javierjimenez/cuemeinDeploy/capstone/src/components/Meeting.js"],"names":["React","useState","useCallback","ControlPanel","Room","Meeting","username","setUsername","meetingname","setRoomName","token","setToken","roomname_change","event","target","value","username_change","submit","preventDefault","fetch","method","body","JSON","stringify","identity","room","headers","then","res","json","data","logout","result"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,WAA1B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,C,2CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAAmCN,QAAQ,CAAC,EAAD,CAA3C,yCAAOO,WAAP,eAAoBC,WAApB,eACA,eAA0BR,QAAQ,CAAC,IAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,eAAe,CAAGV,WAAW,CAAC,SAACW,KAAD,CAAW,CAC7CJ,WAAW,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAFkC,CAEhC,EAFgC,CAAnC,CAIA,GAAMC,CAAAA,eAAe,CAAGd,WAAW,CAAC,SAACW,KAAD,CAAW,CAC7CN,WAAW,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAFkC,CAEhC,EAFgC,CAAnC,CAIA,GAAME,CAAAA,MAAM,CAAGf,WAAW,0FACxB,iBAAOW,KAAP,2HACEA,KAAK,CAACK,cAAN,GADF,sBAGqBC,CAAAA,KAAK,CAAC,cAAD,CAAiB,CACvCC,MAAM,CAAE,MAD+B,CAEvCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,QAAQ,CAAElB,QADS,CAEnBmB,IAAI,CAAEjB,WAFa,CAAf,CAFiC,CAMvCkB,OAAO,CAAE,CACP,eAAgB,kBADT,CAN8B,CAAjB,CAAL,CAShBC,IATgB,CASX,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EATW,CAHrB,QAGQC,IAHR,eAcEnB,QAAQ,CAACmB,IAAI,CAACpB,KAAN,CAAR,CAdF,sDADwB,+DAiBxB,CAACF,WAAD,CAAcF,QAAd,CAjBwB,CAA1B,CAoBA,GAAMyB,CAAAA,MAAM,CAAG7B,WAAW,CAAC,SAACW,KAAD,CAAW,CACpCF,QAAQ,CAAC,IAAD,CAAR,CACD,CAFyB,CAEvB,EAFuB,CAA1B,CAIA,GAAIqB,CAAAA,MAAJ,CACA,GAAItB,KAAJ,CAAW,CACTsB,MAAM,cAAG,KAAC,IAAD,EAAM,WAAW,CAAExB,WAAnB,CAAgC,KAAK,CAAEE,KAAvC,CAA8C,MAAM,CAAEqB,MAAtD,EAAT,CACD,CAFD,IAEO,CACLC,MAAM,cACJ,KAAC,YAAD,EACE,QAAQ,CAAE1B,QADZ,CAEE,QAAQ,CAAEE,WAFZ,CAGE,oBAAoB,CAAEQ,eAHxB,CAIE,oBAAoB,CAAEJ,eAJxB,CAKE,YAAY,CAAEK,MALhB,EADF,CASD,CACD,MAAOe,CAAAA,MAAP,CACD,CApDD,CAsDA,cAAe3B,CAAAA,OAAf","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport ControlPanel from \"./ControlPanel\";\nimport Room from \"./Room\";\n\nconst Meeting = () => {\n  const [username, setUsername] = useState(\"\");\n  const [meetingname, setRoomName] = useState(\"\");\n  const [token, setToken] = useState(null);\n\n  const roomname_change = useCallback((event) => {\n    setRoomName(event.target.value);\n  }, []);\n\n  const username_change = useCallback((event) => {\n    setUsername(event.target.value);\n  }, []);\n\n  const submit = useCallback(\n    async (event) => {\n      event.preventDefault();\n\n      const data = await fetch(\"/video/token\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          identity: username,\n          room: meetingname,\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((res) => res.json());\n\n      setToken(data.token);\n    },\n    [meetingname, username]\n  );\n\n  const logout = useCallback((event) => {\n    setToken(null);\n  }, []);\n\n  let result;\n  if (token) {\n    result = <Room meetingname={meetingname} token={token} logout={logout} />;\n  } else {\n    result = (\n      <ControlPanel\n        username={username}\n        roomName={meetingname}\n        handleUsernameChange={username_change}\n        handleRoomNameChange={roomname_change}\n        handleSubmit={submit}\n      />\n    );\n  }\n  return result;\n};\n\nexport default Meeting;\n"]},"metadata":{},"sourceType":"module"}