{"ast":null,"code":"/* eslint no-undefined:0 */\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar average = require('./average');\n\nvar SenderOrReceiverReport = require('./senderorreceiverreport');\n\nvar sum = require('./sum');\n/**\n * @interface SenderSummary\n * @property {number} bitrate\n * @property {number} [rtt] - s (undefined in Chrome)\n */\n\n/**\n * @extends SenderOrReceiverReport\n * @property {number} [rtt] - s (undefined in Chrome)\n */\n\n\nvar SenderReport = function (_super) {\n  __extends(SenderReport, _super);\n  /**\n   * Construct a {@link SenderReport}.\n   * @param {StatsId} id\n   * @param {TrackId} trackId\n   * @param {number} bitrate - bps\n   * @param {number} [rtt] - s\n   */\n\n\n  function SenderReport(id, trackId, bitrate, rtt) {\n    var _this = _super.call(this, id, trackId, bitrate) || this;\n\n    Object.defineProperties(_this, {\n      rtt: {\n        enumerable: true,\n        value: rtt\n      }\n    });\n    return _this;\n  }\n  /**\n   * Create a {@link SenderReport}.\n   * @param {string} trackId\n   * @param {RTCStats} olderStats\n   * @param {RTCStats} newerStats\n   * @param {RTCRemoteInboundRtpStreamStats} [newerRemoteStats]\n   * @returns {SenderReport}\n   */\n\n\n  SenderReport.of = function (trackId, olderStats, newerStats, newerRemoteStats) {\n    if (olderStats.id !== newerStats.id) {\n      throw new Error('RTCStats IDs must match');\n    }\n\n    var secondsElapsed = (newerStats.timestamp - olderStats.timestamp) / 1000;\n    var deltaBytesSent = newerStats.bytesSent - olderStats.bytesSent;\n    var bitrate = secondsElapsed > 0 ? deltaBytesSent / secondsElapsed * 8 : 0;\n    var rtt = newerRemoteStats && typeof newerRemoteStats.roundTripTime === 'number' ? newerRemoteStats.roundTripTime / 1000 : undefined;\n    return new SenderReport(olderStats.id, trackId, bitrate, rtt);\n  };\n  /**\n   * Summarize {@link SenderReport}s by summing and averaging their values.\n   * @param {Array<SenderReport>} reports\n   * @returns {SenderSummary}\n   */\n\n\n  SenderReport.summarize = function (reports) {\n    var bitrate = sum(reports.map(function (report) {\n      return report.bitrate;\n    }));\n    var rtt = average(reports.map(function (report) {\n      return report.rtt;\n    }));\n    return {\n      bitrate: bitrate,\n      rtt: rtt\n    };\n  };\n\n  return SenderReport;\n}(SenderOrReceiverReport);\n\nmodule.exports = SenderReport;","map":{"version":3,"sources":["../../lib/stats/senderreport.js"],"names":[],"mappings":"AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAM,OAAO,GAAG,OAAO,CAAC,WAAD,CAAvB;;AACA,IAAM,sBAAsB,GAAG,OAAO,CAAC,0BAAD,CAAtC;;AACA,IAAM,GAAG,GAAG,OAAO,CAAC,OAAD,CAAnB;AAEA;;;;AAIG;;AAEH;;;AAGG;;;AACH,IAAA,YAAA,GAAA,UAAA,MAAA,EAAA;AAA2B,EAAA,SAAA,CAAA,YAAA,EAAA,MAAA,CAAA;AACzB;;;;;;AAMG;;;AACH,WAAA,YAAA,CAAY,EAAZ,EAAgB,OAAhB,EAAyB,OAAzB,EAAkC,GAAlC,EAAqC;AAArC,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,EAAN,EAAU,OAAV,EAAmB,OAAnB,KAA2B,IAD7B;;AAEE,IAAA,MAAM,CAAC,gBAAP,CAAwB,KAAxB,EAA8B;AAC5B,MAAA,GAAG,EAAE;AACH,QAAA,UAAU,EAAE,IADT;AAEH,QAAA,KAAK,EAAE;AAFJ;AADuB,KAA9B;;AAMD;AAED;;;;;;;AAOG;;;AACI,EAAA,YAAA,CAAA,EAAA,GAAP,UAAU,OAAV,EAAmB,UAAnB,EAA+B,UAA/B,EAA2C,gBAA3C,EAA2D;AACzD,QAAI,UAAU,CAAC,EAAX,KAAkB,UAAU,CAAC,EAAjC,EAAqC;AACnC,YAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN;AACD;;AACD,QAAM,cAAc,GAAG,CAAC,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,SAAnC,IAAgD,IAAvE;AACA,QAAM,cAAc,GAAG,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,SAAzD;AACA,QAAM,OAAO,GAAG,cAAc,GAAG,CAAjB,GACX,cAAc,GAAG,cAAlB,GAAoC,CADxB,GAEZ,CAFJ;AAGA,QAAM,GAAG,GAAG,gBAAgB,IAAI,OAAO,gBAAgB,CAAC,aAAxB,KAA0C,QAA9D,GACR,gBAAgB,CAAC,aAAjB,GAAiC,IADzB,GAER,SAFJ;AAGA,WAAO,IAAI,YAAJ,CAAiB,UAAU,CAAC,EAA5B,EAAgC,OAAhC,EAAyC,OAAzC,EAAkD,GAAlD,CAAP;AACD,GAbM;AAeP;;;;AAIG;;;AACI,EAAA,YAAA,CAAA,SAAA,GAAP,UAAiB,OAAjB,EAAwB;AACtB,QAAM,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,GAAR,CAAY,UAAA,MAAA,EAAM;AAAI,aAAA,MAAM,CAAN,OAAA;AAAc,KAApC,CAAD,CAAnB;AACA,QAAM,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,GAAR,CAAY,UAAA,MAAA,EAAM;AAAI,aAAA,MAAM,CAAN,GAAA;AAAU,KAAhC,CAAD,CAAnB;AACA,WAAO;AACL,MAAA,OAAO,EAAA,OADF;AAEL,MAAA,GAAG,EAAA;AAFE,KAAP;AAID,GAPM;;AAQT,SAAA,YAAA;AAAC,CAtDD,CAA2B,sBAA3B,CAAA;;AAwDA,MAAM,CAAC,OAAP,GAAiB,YAAjB","sourceRoot":"","sourcesContent":["/* eslint no-undefined:0 */\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar average = require('./average');\nvar SenderOrReceiverReport = require('./senderorreceiverreport');\nvar sum = require('./sum');\n/**\n * @interface SenderSummary\n * @property {number} bitrate\n * @property {number} [rtt] - s (undefined in Chrome)\n */\n/**\n * @extends SenderOrReceiverReport\n * @property {number} [rtt] - s (undefined in Chrome)\n */\nvar SenderReport = /** @class */ (function (_super) {\n    __extends(SenderReport, _super);\n    /**\n     * Construct a {@link SenderReport}.\n     * @param {StatsId} id\n     * @param {TrackId} trackId\n     * @param {number} bitrate - bps\n     * @param {number} [rtt] - s\n     */\n    function SenderReport(id, trackId, bitrate, rtt) {\n        var _this = _super.call(this, id, trackId, bitrate) || this;\n        Object.defineProperties(_this, {\n            rtt: {\n                enumerable: true,\n                value: rtt\n            }\n        });\n        return _this;\n    }\n    /**\n     * Create a {@link SenderReport}.\n     * @param {string} trackId\n     * @param {RTCStats} olderStats\n     * @param {RTCStats} newerStats\n     * @param {RTCRemoteInboundRtpStreamStats} [newerRemoteStats]\n     * @returns {SenderReport}\n     */\n    SenderReport.of = function (trackId, olderStats, newerStats, newerRemoteStats) {\n        if (olderStats.id !== newerStats.id) {\n            throw new Error('RTCStats IDs must match');\n        }\n        var secondsElapsed = (newerStats.timestamp - olderStats.timestamp) / 1000;\n        var deltaBytesSent = newerStats.bytesSent - olderStats.bytesSent;\n        var bitrate = secondsElapsed > 0\n            ? (deltaBytesSent / secondsElapsed) * 8\n            : 0;\n        var rtt = newerRemoteStats && typeof newerRemoteStats.roundTripTime === 'number'\n            ? newerRemoteStats.roundTripTime / 1000\n            : undefined;\n        return new SenderReport(olderStats.id, trackId, bitrate, rtt);\n    };\n    /**\n     * Summarize {@link SenderReport}s by summing and averaging their values.\n     * @param {Array<SenderReport>} reports\n     * @returns {SenderSummary}\n     */\n    SenderReport.summarize = function (reports) {\n        var bitrate = sum(reports.map(function (report) { return report.bitrate; }));\n        var rtt = average(reports.map(function (report) { return report.rtt; }));\n        return {\n            bitrate: bitrate,\n            rtt: rtt\n        };\n    };\n    return SenderReport;\n}(SenderOrReceiverReport));\nmodule.exports = SenderReport;\n//# sourceMappingURL=senderreport.js.map"]},"metadata":{},"sourceType":"script"}