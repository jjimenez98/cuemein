{"ast":null,"code":"'use strict';\n/**\n * Monitor the network connection status to detect interruptions and handoffs.\n */\n\nvar NetworkMonitor = function () {\n  /**\n   * Construct a {@link NetworkMonitor}.\n   * @param {function} onNetworkChanged\n   * @param {*} [options]\n   */\n  function NetworkMonitor(onNetworkChanged, options) {\n    var _this = this;\n\n    options = Object.assign({\n      navigator: navigator,\n      window: window\n    }, options);\n    var nav = options.navigator;\n    var connection = nav.connection || {\n      type: null\n    };\n    var type = connection.type;\n\n    var _a = connection.type ? {\n      _events: {\n        value: ['change', 'typechange']\n      },\n      _listener: {\n        value: function value() {\n          var networkChanged = type !== _this.type && _this.isOnline;\n          type = _this.type;\n\n          if (networkChanged) {\n            onNetworkChanged();\n          }\n        }\n      },\n      _target: {\n        value: connection\n      }\n    } : {\n      _events: {\n        value: ['online']\n      },\n      _listener: {\n        value: onNetworkChanged\n      },\n      _target: {\n        value: options.window\n      }\n    },\n        _events = _a._events,\n        _listener = _a._listener,\n        _target = _a._target;\n\n    Object.defineProperties(this, {\n      isOnline: {\n        enumerable: true,\n        get: function get() {\n          return typeof nav.onLine === 'boolean' ? nav.onLine : true;\n        }\n      },\n      type: {\n        enumerable: true,\n        get: function get() {\n          return connection.type || null;\n        }\n      },\n      _listener: _listener,\n      _events: _events,\n      _target: _target\n    });\n  }\n  /**\n   * Start the {@link NetworkMonitor}.\n   */\n\n\n  NetworkMonitor.prototype.start = function () {\n    var _this = this;\n\n    this._events.forEach(function (event) {\n      _this._target.addEventListener(event, _this._listener);\n    });\n  };\n  /**\n   * Stop the {@link NetworkMonitor}.\n   */\n\n\n  NetworkMonitor.prototype.stop = function () {\n    var _this = this;\n\n    this._events.forEach(function (event) {\n      _this._target.removeEventListener(event, _this._listener);\n    });\n  };\n\n  return NetworkMonitor;\n}();\n\nmodule.exports = NetworkMonitor;","map":{"version":3,"sources":["../../lib/util/networkmonitor.js"],"names":[],"mappings":"AAAA;AAEA;;AAEG;;AACH,IAAA,cAAA,GAAA,YAAA;AACE;;;;AAIG;AACH,WAAA,cAAA,CAAY,gBAAZ,EAA8B,OAA9B,EAAqC;AAArC,QAAA,KAAA,GAAA,IAAA;;AACE,IAAA,OAAO,GAAG,MAAM,CAAC,MAAP,CAAc;AACtB,MAAA,SAAS,EAAA,SADa;AAEtB,MAAA,MAAM,EAAA;AAFgB,KAAd,EAGP,OAHO,CAAV;AAKA,QAAM,GAAG,GAAG,OAAO,CAAC,SAApB;AACA,QAAM,UAAU,GAAG,GAAG,CAAC,UAAJ,IAAkB;AAAE,MAAA,IAAI,EAAE;AAAR,KAArC;AACA,QAAI,IAAI,GAAG,UAAU,CAAC,IAAtB;;AAEM,QAAA,EAAA,GAAkC,UAAU,CAAC,IAAX,GAAkB;AACxD,MAAA,OAAO,EAAE;AACP,QAAA,KAAK,EAAE,CAAC,QAAD,EAAW,YAAX;AADA,OAD+C;AAIxD,MAAA,SAAS,EAAE;AACT,QAAA,KAAK,EAAE,iBAAA;AACL,cAAM,cAAc,GAAG,IAAI,KAAK,KAAI,CAAC,IAAd,IAAsB,KAAI,CAAC,QAAlD;AACA,UAAA,IAAI,GAAG,KAAI,CAAC,IAAZ;;AACA,cAAI,cAAJ,EAAoB;AAClB,YAAA,gBAAgB;AACjB;AACF;AAPQ,OAJ6C;AAaxD,MAAA,OAAO,EAAE;AACP,QAAA,KAAK,EAAE;AADA;AAb+C,KAAlB,GAgBpC;AACF,MAAA,OAAO,EAAE;AACP,QAAA,KAAK,EAAE,CAAC,QAAD;AADA,OADP;AAIF,MAAA,SAAS,EAAE;AACT,QAAA,KAAK,EAAE;AADE,OAJT;AAOF,MAAA,OAAO,EAAE;AACP,QAAA,KAAK,EAAE,OAAO,CAAC;AADR;AAPP,KAhBE;AAAA,QAAE,OAAO,GAAA,EAAA,CAAA,OAAT;AAAA,QAAW,SAAS,GAAA,EAAA,CAAA,SAApB;AAAA,QAAsB,OAAO,GAAA,EAAA,CAAA,OAA7B;;AA4BN,IAAA,MAAM,CAAC,gBAAP,CAAwB,IAAxB,EAA8B;AAC5B,MAAA,QAAQ,EAAE;AACR,QAAA,UAAU,EAAE,IADJ;AAER,QAAA,GAAG,EAAA,eAAA;AACD,iBAAO,OAAO,GAAG,CAAC,MAAX,KAAsB,SAAtB,GACH,GAAG,CAAC,MADD,GAEH,IAFJ;AAGD;AANO,OADkB;AAS5B,MAAA,IAAI,EAAE;AACJ,QAAA,UAAU,EAAE,IADR;AAEJ,QAAA,GAAG,EAAA,eAAA;AACD,iBAAO,UAAU,CAAC,IAAX,IAAmB,IAA1B;AACD;AAJG,OATsB;AAe5B,MAAA,SAAS,EAAA,SAfmB;AAgB5B,MAAA,OAAO,EAAA,OAhBqB;AAiB5B,MAAA,OAAO,EAAA;AAjBqB,KAA9B;AAmBD;AAED;;AAEG;;;AACH,EAAA,cAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,SAAK,OAAL,CAAa,OAAb,CAAqB,UAAA,KAAA,EAAK;AACxB,MAAA,KAAI,CAAC,OAAL,CAAa,gBAAb,CAA8B,KAA9B,EAAqC,KAAI,CAAC,SAA1C;AACD,KAFD;AAGD,GAJD;AAMA;;AAEG;;;AACH,EAAA,cAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,SAAK,OAAL,CAAa,OAAb,CAAqB,UAAA,KAAA,EAAK;AACxB,MAAA,KAAI,CAAC,OAAL,CAAa,mBAAb,CAAiC,KAAjC,EAAwC,KAAI,CAAC,SAA7C;AACD,KAFD;AAGD,GAJD;;AAKF,SAAA,cAAA;AAAC,CAlFD,EAAA;;AAoFA,MAAM,CAAC,OAAP,GAAiB,cAAjB","sourceRoot":"","sourcesContent":["'use strict';\n/**\n * Monitor the network connection status to detect interruptions and handoffs.\n */\nvar NetworkMonitor = /** @class */ (function () {\n    /**\n     * Construct a {@link NetworkMonitor}.\n     * @param {function} onNetworkChanged\n     * @param {*} [options]\n     */\n    function NetworkMonitor(onNetworkChanged, options) {\n        var _this = this;\n        options = Object.assign({\n            navigator: navigator,\n            window: window,\n        }, options);\n        var nav = options.navigator;\n        var connection = nav.connection || { type: null };\n        var type = connection.type;\n        var _a = connection.type ? {\n            _events: {\n                value: ['change', 'typechange']\n            },\n            _listener: {\n                value: function () {\n                    var networkChanged = type !== _this.type && _this.isOnline;\n                    type = _this.type;\n                    if (networkChanged) {\n                        onNetworkChanged();\n                    }\n                }\n            },\n            _target: {\n                value: connection\n            }\n        } : {\n            _events: {\n                value: ['online']\n            },\n            _listener: {\n                value: onNetworkChanged\n            },\n            _target: {\n                value: options.window\n            }\n        }, _events = _a._events, _listener = _a._listener, _target = _a._target;\n        Object.defineProperties(this, {\n            isOnline: {\n                enumerable: true,\n                get: function () {\n                    return typeof nav.onLine === 'boolean'\n                        ? nav.onLine\n                        : true;\n                }\n            },\n            type: {\n                enumerable: true,\n                get: function () {\n                    return connection.type || null;\n                }\n            },\n            _listener: _listener,\n            _events: _events,\n            _target: _target\n        });\n    }\n    /**\n     * Start the {@link NetworkMonitor}.\n     */\n    NetworkMonitor.prototype.start = function () {\n        var _this = this;\n        this._events.forEach(function (event) {\n            _this._target.addEventListener(event, _this._listener);\n        });\n    };\n    /**\n     * Stop the {@link NetworkMonitor}.\n     */\n    NetworkMonitor.prototype.stop = function () {\n        var _this = this;\n        this._events.forEach(function (event) {\n            _this._target.removeEventListener(event, _this._listener);\n        });\n    };\n    return NetworkMonitor;\n}());\nmodule.exports = NetworkMonitor;\n//# sourceMappingURL=networkmonitor.js.map"]},"metadata":{},"sourceType":"script"}