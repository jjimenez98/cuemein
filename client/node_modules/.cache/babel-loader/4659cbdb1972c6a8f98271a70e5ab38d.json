{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syntheticVideo = void 0;\n\nfunction syntheticVideo(_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.width,\n      width = _c === void 0 ? 640 : _c,\n      _d = _b.height,\n      height = _d === void 0 ? 480 : _d;\n\n  var canvas = Object.assign(document.createElement('canvas'), {\n    width: width,\n    height: height\n  });\n  var ctx = canvas.getContext('2d');\n  ctx.fillStyle = 'green';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  var stopped = false;\n  requestAnimationFrame(function animate() {\n    if (!stopped) {\n      // draw random rect/circle.\n      var r = Math.round(Math.random() * 255);\n      var g = Math.round(Math.random() * 255);\n      var b = Math.round(Math.random() * 255);\n      var a = Math.round(Math.random() * 255);\n      ctx.fillStyle = \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + a + \")\";\n      ctx.fillRect(Math.random() * width, Math.random() * height, 50, 50);\n      requestAnimationFrame(animate);\n    }\n  });\n  var stream = canvas.captureStream(30);\n  var track = stream.getTracks()[0];\n  var originalStop = track.stop;\n\n  track.stop = function () {\n    stopped = true;\n    originalStop.call(track);\n  };\n\n  return track;\n}\n\nexports.syntheticVideo = syntheticVideo;","map":{"version":3,"sources":["../../lib/preflight/syntheticvideo.ts"],"names":[],"mappings":";;;;;;;AAIA,SAAgB,cAAhB,CAA+B,EAA/B,EAAiE;MAAlC,EAAA,GAAA,EAAA,KAAA,KAAA,CAAA,GAAgC,EAAhC,GAAkC,E;MAAhC,EAAA,GAAA,EAAA,CAAA,K;MAAA,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,GAAH,GAAM,E;MAAE,EAAA,GAAA,EAAA,CAAA,M;MAAA,MAAM,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,GAAH,GAAM,E;;AACxD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAP,CACb,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CADa,EACqB;AAAE,IAAA,KAAK,EAAA,KAAP;AAAS,IAAA,MAAM,EAAA;AAAf,GADrB,CAAf;AAIA,MAAI,GAAG,GAAG,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAAV;AACA,EAAA,GAAG,CAAC,SAAJ,GAAgB,OAAhB;AACA,EAAA,GAAG,CAAC,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,MAAM,CAAC,KAA1B,EAAiC,MAAM,CAAC,MAAxC;AACA,MAAI,OAAO,GAAG,KAAd;AACA,EAAA,qBAAqB,CAAC,SAAS,OAAT,GAAgB;AACpC,QAAI,CAAC,OAAL,EAAc;AACZ;AACA,UAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,CAAV;AACA,UAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,CAAV;AACA,UAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,CAAV;AACA,UAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,CAAV;AACA,MAAA,GAAG,CAAC,SAAJ,GAAgB,UAAQ,CAAR,GAAS,IAAT,GAAc,CAAd,GAAe,IAAf,GAAoB,CAApB,GAAqB,IAArB,GAA0B,CAA1B,GAA2B,GAA3C;AACA,MAAA,GAAG,CAAC,QAAJ,CAAa,IAAI,CAAC,MAAL,KAAgB,KAA7B,EAAoC,IAAI,CAAC,MAAL,KAAgB,MAApD,EAA4D,EAA5D,EAAgE,EAAhE;AACA,MAAA,qBAAqB,CAAC,OAAD,CAArB;AACD;AACF,GAXoB,CAArB;AAYA,MAAM,MAAM,GAAG,MAAM,CAAC,aAAP,CAAqB,EAArB,CAAf;AACA,MAAM,KAAK,GAAG,MAAM,CAAC,SAAP,GAAmB,CAAnB,CAAd;AACA,MAAM,YAAY,GAAG,KAAK,CAAC,IAA3B;;AACA,EAAA,KAAK,CAAC,IAAN,GAAa,YAAA;AACX,IAAA,OAAO,GAAG,IAAV;AACA,IAAA,YAAY,CAAC,IAAb,CAAkB,KAAlB;AACD,GAHD;;AAKA,SAAO,KAAP;AACD;;AA9BD,OAAA,CAAA,cAAA,GAAA,cAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.syntheticVideo = void 0;\nfunction syntheticVideo(_a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.width, width = _c === void 0 ? 640 : _c, _d = _b.height, height = _d === void 0 ? 480 : _d;\n    var canvas = Object.assign(document.createElement('canvas'), { width: width, height: height });\n    var ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'green';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    var stopped = false;\n    requestAnimationFrame(function animate() {\n        if (!stopped) {\n            // draw random rect/circle.\n            var r = Math.round(Math.random() * 255);\n            var g = Math.round(Math.random() * 255);\n            var b = Math.round(Math.random() * 255);\n            var a = Math.round(Math.random() * 255);\n            ctx.fillStyle = \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + a + \")\";\n            ctx.fillRect(Math.random() * width, Math.random() * height, 50, 50);\n            requestAnimationFrame(animate);\n        }\n    });\n    var stream = canvas.captureStream(30);\n    var track = stream.getTracks()[0];\n    var originalStop = track.stop;\n    track.stop = function () {\n        stopped = true;\n        originalStop.call(track);\n    };\n    return track;\n}\nexports.syntheticVideo = syntheticVideo;\n//# sourceMappingURL=syntheticvideo.js.map"]},"metadata":{},"sourceType":"script"}