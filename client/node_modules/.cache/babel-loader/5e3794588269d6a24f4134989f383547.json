{"ast":null,"code":"/* eslint new-cap:0 */\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar TrackPublication = require('./trackpublication');\n\nvar _a = require('../../util/constants'),\n    E = _a.typeErrors,\n    trackPriority = _a.trackPriority;\n/**\n * A {@link LocalTrackPublication} is a {@link LocalTrack} that has been\n * published to a {@link Room}.\n * @extends TrackPublication\n * @property {boolean} isTrackEnabled - whether the published {@link LocalTrack}\n *   is enabled\n * @property {Track.Kind} kind - kind of the published {@link LocalTrack}\n * @property {Track.Priority} priority - the publish priority of the {@link LocalTrack}\n * @property {LocalTrack} track - the {@link LocalTrack}\n */\n\n\nvar LocalTrackPublication = function (_super) {\n  __extends(LocalTrackPublication, _super);\n  /**\n   * Construct a {@link LocalTrackPublication}.\n   * @param {LocalTrackPublicationSignaling} signaling - The corresponding\n   *   {@link LocalTrackPublicationSignaling}\n   * @param {LocalTrack} track - The {@link LocalTrack}\n   * @param {function(LocalTrackPublication): void} unpublish - The callback\n   *   that unpublishes the {@link LocalTrackPublication}\n   * @param {TrackPublicationOptions} options - {@link LocalTrackPublication}\n   *   options\n   */\n\n\n  function LocalTrackPublication(signaling, track, unpublish, options) {\n    var _this = _super.call(this, track.name, signaling.sid, options) || this;\n\n    Object.defineProperties(_this, {\n      _reemitTrackEvent: {\n        value: function value() {\n          return _this.emit(_this.isTrackEnabled ? 'trackEnabled' : 'trackDisabled');\n        }\n      },\n      _signaling: {\n        value: signaling\n      },\n      _unpublish: {\n        value: unpublish\n      },\n      isTrackEnabled: {\n        enumerable: true,\n        get: function get() {\n          return this.track.kind === 'data' ? true : this.track.isEnabled;\n        }\n      },\n      kind: {\n        enumerable: true,\n        value: track.kind\n      },\n      priority: {\n        enumerable: true,\n        get: function get() {\n          return signaling.updatedPriority;\n        }\n      },\n      track: {\n        enumerable: true,\n        value: track\n      }\n    });\n    track.on('disabled', _this._reemitTrackEvent);\n    track.on('enabled', _this._reemitTrackEvent);\n    return _this;\n  }\n\n  LocalTrackPublication.prototype.toString = function () {\n    return \"[LocalTrackPublication #\" + this._instanceId + \": \" + this.trackSid + \"]\";\n  };\n  /**\n   * Update the {@link Track.Priority} of the published {@link LocalTrack}.\n   * @param {Track.Priority} priority - the new {@link Track.priority}\n   * @returns {this}\n   * @throws {RangeError}\n   */\n\n\n  LocalTrackPublication.prototype.setPriority = function (priority) {\n    var priorityValues = Object.values(trackPriority);\n\n    if (!priorityValues.includes(priority)) {\n      throw E.INVALID_VALUE('priority', priorityValues);\n    }\n\n    this._signaling.setPriority(priority);\n\n    return this;\n  };\n  /**\n   * Unpublish a {@link LocalTrackPublication}. This means that the media\n   * from this {@link LocalTrackPublication} is no longer available to the\n   * {@link Room}'s {@link RemoteParticipant}s.\n   * @returns {this}\n   */\n\n\n  LocalTrackPublication.prototype.unpublish = function () {\n    this.track.removeListener('disabled', this._reemitTrackEvent);\n    this.track.removeListener('enabled', this._reemitTrackEvent);\n\n    this._unpublish(this);\n\n    return this;\n  };\n\n  return LocalTrackPublication;\n}(TrackPublication);\n\nmodule.exports = LocalTrackPublication;","map":{"version":3,"sources":["../../../lib/media/track/localtrackpublication.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/* eslint new-cap:0 */\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TrackPublication = require('./trackpublication');\nvar _a = require('../../util/constants'), E = _a.typeErrors, trackPriority = _a.trackPriority;\n/**\n * A {@link LocalTrackPublication} is a {@link LocalTrack} that has been\n * published to a {@link Room}.\n * @extends TrackPublication\n * @property {boolean} isTrackEnabled - whether the published {@link LocalTrack}\n *   is enabled\n * @property {Track.Kind} kind - kind of the published {@link LocalTrack}\n * @property {Track.Priority} priority - the publish priority of the {@link LocalTrack}\n * @property {LocalTrack} track - the {@link LocalTrack}\n */\nvar LocalTrackPublication = /** @class */ (function (_super) {\n    __extends(LocalTrackPublication, _super);\n    /**\n     * Construct a {@link LocalTrackPublication}.\n     * @param {LocalTrackPublicationSignaling} signaling - The corresponding\n     *   {@link LocalTrackPublicationSignaling}\n     * @param {LocalTrack} track - The {@link LocalTrack}\n     * @param {function(LocalTrackPublication): void} unpublish - The callback\n     *   that unpublishes the {@link LocalTrackPublication}\n     * @param {TrackPublicationOptions} options - {@link LocalTrackPublication}\n     *   options\n     */\n    function LocalTrackPublication(signaling, track, unpublish, options) {\n        var _this = _super.call(this, track.name, signaling.sid, options) || this;\n        Object.defineProperties(_this, {\n            _reemitTrackEvent: {\n                value: function () { return _this.emit(_this.isTrackEnabled\n                    ? 'trackEnabled'\n                    : 'trackDisabled'); }\n            },\n            _signaling: {\n                value: signaling\n            },\n            _unpublish: {\n                value: unpublish\n            },\n            isTrackEnabled: {\n                enumerable: true,\n                get: function () {\n                    return this.track.kind === 'data' ? true : this.track.isEnabled;\n                }\n            },\n            kind: {\n                enumerable: true,\n                value: track.kind\n            },\n            priority: {\n                enumerable: true,\n                get: function () {\n                    return signaling.updatedPriority;\n                }\n            },\n            track: {\n                enumerable: true,\n                value: track\n            }\n        });\n        track.on('disabled', _this._reemitTrackEvent);\n        track.on('enabled', _this._reemitTrackEvent);\n        return _this;\n    }\n    LocalTrackPublication.prototype.toString = function () {\n        return \"[LocalTrackPublication #\" + this._instanceId + \": \" + this.trackSid + \"]\";\n    };\n    /**\n     * Update the {@link Track.Priority} of the published {@link LocalTrack}.\n     * @param {Track.Priority} priority - the new {@link Track.priority}\n     * @returns {this}\n     * @throws {RangeError}\n     */\n    LocalTrackPublication.prototype.setPriority = function (priority) {\n        var priorityValues = Object.values(trackPriority);\n        if (!priorityValues.includes(priority)) {\n            throw E.INVALID_VALUE('priority', priorityValues);\n        }\n        this._signaling.setPriority(priority);\n        return this;\n    };\n    /**\n     * Unpublish a {@link LocalTrackPublication}. This means that the media\n     * from this {@link LocalTrackPublication} is no longer available to the\n     * {@link Room}'s {@link RemoteParticipant}s.\n     * @returns {this}\n     */\n    LocalTrackPublication.prototype.unpublish = function () {\n        this.track.removeListener('disabled', this._reemitTrackEvent);\n        this.track.removeListener('enabled', this._reemitTrackEvent);\n        this._unpublish(this);\n        return this;\n    };\n    return LocalTrackPublication;\n}(TrackPublication));\nmodule.exports = LocalTrackPublication;\n//# sourceMappingURL=localtrackpublication.js.map"]},"metadata":{},"sourceType":"script"}