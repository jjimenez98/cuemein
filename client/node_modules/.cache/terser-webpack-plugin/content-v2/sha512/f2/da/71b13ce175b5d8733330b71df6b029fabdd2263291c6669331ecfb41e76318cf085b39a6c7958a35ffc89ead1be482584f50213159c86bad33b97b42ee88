{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},222:function(e,t,n){\"use strict\";n.r(t);var a=n(0),c=n.n(a),i=n(95),o=n.n(i),s=(n(101),n(102),n(103),n(22)),r=n.n(s),l=n(32),d=n(9),u=n(223),m=n(224),j=n(225),b=n(226),f=(n(30),n(1)),h=function(e){var t=e.username,n=e.handleUsernameChange,a=e.roomName,c=e.handleRoomNameChange,i=e.handleSubmit;return Object(f.jsxs)(u.a,{className:\"controlpanel\",fluid:!0,children:[Object(f.jsx)(m.a,{className:\"cmilogo\",children:Object(f.jsx)(\"img\",{src:\"/cuemeinlogo.png\",width:\"400\",height:\"400\"})}),Object(f.jsx)(m.a,{className:\"control\",children:Object(f.jsxs)(j.a,{onSubmit:i,children:[Object(f.jsx)(j.a.Label,{className:\"meeting\",children:\"Join a Meeting\"}),Object(f.jsxs)(j.a.Group,{children:[Object(f.jsx)(j.a.Label,{className:\"name\",children:\"Name:\"}),Object(f.jsx)(j.a.Control,{className:\"inputname\",size:\"lg\",type:\"name\",value:t,onChange:n,placeholder:\"User ID\"})]}),Object(f.jsxs)(j.a.Group,{children:[Object(f.jsx)(j.a.Label,{className:\"meetingname\",children:\"Meeting name:\"}),Object(f.jsx)(j.a.Control,{className:\"inputmeetingname\",size:\"lg\",type:\"meetingname\",value:a,onChange:c,placeholder:\"Room Name\"})]}),Object(f.jsx)(b.a,{variant:\"success\",type:\"submit\",children:\"JOIN\"})]})})]})},O=n(17),p=n(44),v=n.n(p),x=n(11),g=n(12),N=void 0,k=n(94),y=(k.muteYourAudio,k.unmuteYourAudio,function(e){var t=e.user,n=(e.mute,e.local),c=void 0===n?\"\":n,i=Object(a.useState)([]),o=Object(d.a)(i,2),s=o[0],r=o[1],l=Object(a.useState)([]),u=Object(d.a)(l,2),m=u[0],j=u[1],b=Object(a.useState)(!1),h=Object(d.a)(b,2),p=h[0],v=h[1],k=Object(a.useState)(!1),y=Object(d.a)(k,2),S=y[0],E=y[1],C=Object(a.useState)(\"\"),w=Object(d.a)(C,2),T=(w[0],w[1],Object(a.useRef)()),R=Object(a.useRef)(),P=\"black-box\";console.log(\"User.js\",t.identity);var A=function(e){v(e),console.log(\"toggle mute\",e)},D=function(e){console.log(\"toggleVmute\",e),E(e)},I=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};function L(e,t){var n,a,c=document.getElementById(t);c.innerHTML=e,n=c,a=\"appear\",setTimeout((function(){n.classList.remove(a)}),5e3),n.classList.add(a)}return Object(a.useEffect)((function(){r(I(t.videoTracks)),j(I(t.audioTracks)),t.videoTracks.forEach((function(e){e.on(\"trackEnabled\",D.bind(N,!1)),e.on(\"trackDisabled\",D.bind(N,!0))})),t.audioTracks.forEach((function(e){e.on(\"trackEnabled\",A.bind(N,!1)),e.on(\"trackDisabled\",A.bind(N,!0))}));return t.on(\"trackSubscribed\",(function(e){console.log(e,\"track subs\"),\"video\"===e.kind?(E(!e.isEnabled),r((function(t){return[].concat(Object(O.a)(t),[e])}))):\"audio\"===e.kind?(v(!e.isEnabled),j((function(t){return[].concat(Object(O.a)(t),[e])}))):\"data\"==e.kind&&(e.on(\"message\",(function(t){console.log(\"DATA REACTION\"),console.log(JSON.parse(t).emojiData,e.sid),console.log(JSON.parse(t).user,\"reaction id\"),function(e,t){console.log(e);var n=document.getElementById(e);console.log(n,\"user.id DIV\");var a=document.createElement(\"div\");a.setAttribute(\"id\",t.sid),a.setAttribute(\"class\",\"emoji\"),n.appendChild(a)}(JSON.parse(t).user,e),L(JSON.parse(t).emojiData,e.sid)})),console.log(\"TRACK\"),console.log(\"TRACK\",e))})),t.on(\"trackUnsubscribed\",(function(e){\"video\"===e.kind?r((function(t){return t.filter((function(t){return t!==e}))})):\"audio\"===e.kind&&j((function(t){return t.filter((function(t){return t!==e}))}))})),function(){r([]),j([]),t.removeAllListeners()}}),[t]),Object(a.useEffect)((function(){var e=s[0];if(e)return console.log(\"User.js attach()\",t.identity),e.attach(T.current),function(){console.log(\"User.js detach()\",t.identity),e.detach()}}),[s]),Object(a.useEffect)((function(){var e=m[0];if(e)return e.attach(R.current),function(){e.detach()}}),[m]),P=\"i\"===c?\"participant-video-emptyi\":\"participant-video-empty\",Object(f.jsxs)(\"div\",{className:\"user-camera\",children:[Object(f.jsx)(\"div\",{id:t.sid,className:\"user-camera-reaction\"}),Object(f.jsxs)(\"div\",{className:\"user-camera-box\",children:[S?Object(f.jsx)(\"div\",{className:\"black-box\",children:\"fds\"}):\"\",S?Object(f.jsx)(x.a,{className:\"empty-icon-video\",icon:g.b,size:\"2x\"}):\"\",S?Object(f.jsx)(\"video\",{className:P,width:\"100%\",ref:T}):Object(f.jsx)(\"video\",{className:\"participant-video\",width:\"100%\",ref:T,autoPlay:!0})]}),Object(f.jsxs)(\"div\",{className:\"participant-border\",children:[Object(f.jsx)(\"div\",{className:\"participant-border-name\",children:t.identity}),p?Object(f.jsx)(\"div\",{className:\"muted-bg\",children:Object(f.jsx)(x.a,{className:\"muted\",icon:g.j,size:\"1x\"})}):\"\"]}),Object(f.jsx)(\"audio\",{ref:R,autoPlay:!0,muted:!0})]})}),S=function(e){var t=e.room,n=Object(a.useState)([]),c=Object(d.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)([]),u=Object(d.a)(s,2),j=u[0],b=u[1],h=Object(a.useState)(\"-\"),p=Object(d.a)(h,2),v=p[0],N=p[1],k=Object(a.useState)(\"participant-video\"),y=Object(d.a)(k,2),S=(y[0],y[1],Object(a.useState)(null)),E=Object(d.a)(S,2),C=E[0],w=E[1],T=Object(a.useRef)();Object(a.useRef)();Object(a.useEffect)((function(){null!==t&&t.on(\"dominantSpeakerChanged\",(function(e){w(e),console.log(\"new dominant speaker Dominant.js\")}))}),[t]);var R=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};Object(a.useEffect)((function(){if(null!=C){o(R(C.videoTracks)),b(R(C.audioTracks));return C.on(\"trackSubscribed\",(function(e){\"video\"===e.kind?o((function(t){return[].concat(Object(O.a)(t),[e])})):\"audio\"===e.kind?b((function(t){return[].concat(Object(O.a)(t),[e])})):\"data\"==e.kind&&e.on(\"message\",(function(e){console.log(JSON.parse(e).user,JSON.parse(e).emojiData,JSON.parse(e).identity,\"Dominant-REACTION\")}))})),C.on(\"trackUnsubscribed\",(function(e){\"video\"===e.kind?o((function(t){return t.filter((function(t){return t!==e}))})):\"audio\"===e.kind&&b((function(t){return t.filter((function(t){return t!==e}))}))})),function(){o([]),b([]),C.removeAllListeners()}}}),[C]);var P,A,D=function(){var e=Object(l.a)(r.a.mark((function e(){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=\"/emotion?identity=\"+C.identity+\"&room=\"+t.name,e.next=3,fetch(n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return e.json()}));case 3:a=e.sent,N(a);case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e,t){var n=new MediaRecorder(e),a=[];n.ondataavailable=function(e){return a.push(e.data)},n.start();var c,i=new Promise((function(e,t){n.onstop=e,n.onerror=function(e){return t(e.name)}})),o=(c=t,new Promise((function(e){return setTimeout(e,c)}))).then((function(){return\"recording\"==n.state&&n.stop()}));return Promise.all([i,o]).then((function(){return a}))};return Object(a.useEffect)((function(){if(null!=C){var e=i[0];e&&e.attach(T.current)}}),[i]),Object(a.useEffect)((function(){var e=setInterval((function(){if(null!=C&&i[0].isEnabled){var e=i[0];e&&(n=e.mediaStreamTrack,new ImageCapture(n).grabFrame().then((function(e){var n=document.createElement(\"canvas\");n.width=e.width,n.height=e.height,n.getContext(\"2d\").drawImage(e,0,0),n.toBlob((function(e){var n=new FileReader;n.addEventListener(\"loadend\",(function(){fetch(n.result).then((function(e){return e.blob()})).then((function(e){var n=\"/video/snapShot?identity=\"+C.identity+\"&room=\"+t.name;fetch(n,{method:\"POST\",body:e,headers:{\"Content-Type\":\"application/octet-stream\"}}).then((function(){D()}))}))})),n.readAsDataURL(e)}),\"image/jpeg\")})).catch((function(e){console.log(\"takePhoto() error: \",e)})))}var n}),2e3);return function(){clearInterval(e)}}),[i]),Object(a.useEffect)((function(){var e=setInterval((function(){if(console.log(\"New function called\"),null!=C&&!i[0].isEnabled){var e=j[0];e&&function(e,n){var a=new MediaStream;a.addTrack(e),new MediaRecorder(a),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(){return I(a,n)})).then((function(e){var n=new Blob(e,{type:\"application/octet-stream\"}),a=new FileReader;a.addEventListener(\"loadend\",(function(){fetch(a.result).then((function(e){return e.blob()})).then((function(e){var n=\"/audio/snapShot?identity=\"+C.identity+\"&room=\"+t.name;fetch(n,{method:\"POST\",body:e,headers:{\"Content-Type\":\"application/octet-stream\"}}).then((function(){D()}))}))})),a.readAsDataURL(n)}))}(e.mediaStreamTrack,1e4)}}),1e4);return function(){clearInterval(e)}}),[j]),\"happiness\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-happy emotion\",icon:g.f,size:\"2x\"}),A=\"HAPPY\"):\"anger\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-angry emotion\",icon:g.a,size:\"2x\"}),A=\"ANGRY\"):\"sadness\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-sadness emotion\",icon:g.k,size:\"2x\"}),A=\"SADNESS\"):\"fear\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-fear emotion\",icon:g.c,size:\"2x\"}),A=\"FEAR\"):\"disgust\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-disgust emotion\",icon:g.m,size:\"2x\"}),A=\"DISGUST\"):\"neutral\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-neutral emotion\",icon:g.g,size:\"2x\"}),A=\"NEUTRAL\"):\"surprise\"===v.emotion?(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-surprised emotion\",icon:g.d,size:\"2x\"}),A=\"SURPRISE\"):\"-\"===v.emotion&&(P=Object(f.jsx)(x.a,{className:\"dominant-emotion-undefined emotion\",icon:g.h,size:\"2x\"}),A=\"UNDEFINED\"),Object(f.jsxs)(m.a,{className:\"dominant-camera\",children:[Object(f.jsx)(\"div\",{id:\"das\",className:\"dominant-camera-reaction\"}),C?Object(f.jsx)(\"video\",{className:\"participant-video-dominant\",width:\"100%\",height:\"100%\",ref:T,autoPlay:!0}):Object(f.jsx)(\"div\",{className:\"default-video-dominant\",children:Object(f.jsx)(x.a,{className:\"dominant-camera-default\",icon:g.n,size:\"2x\"})}),Object(f.jsxs)(\"div\",{className:\"dominant-border-emotion-icon\",children:[Object(f.jsx)(\"h3\",{className:\"dominant-border-emotion-header\",children:\"Emotion\"}),Object(f.jsx)(\"div\",{className:\"dominant-icon\",children:P})]}),Object(f.jsxs)(\"div\",{className:\"dominant-border\",children:[C?Object(f.jsx)(\"div\",{className:\"dominant-border-name\",children:C.identity}):\"\",Object(f.jsx)(\"div\",{className:\"dominant-border-emotion-background\",children:Object(f.jsx)(\"div\",{className:\"dominant-border-emotion-text\",children:A})})]})]})},E=n(96),C=function(e){var t,c,i=e.meetingname,o=e.token,s=(e.emotion,e.logout),r=(e.test,Object(a.useState)(null)),l=Object(d.a)(r,2),j=l[0],b=l[1],h=Object(a.useState)([]),p=Object(d.a)(h,2),N=p[0],k=p[1],C=Object(a.useState)(\"\"),w=Object(d.a)(C,2),T=w[0],R=w[1],P=Object(a.useState)(!1),A=Object(d.a)(P,2),D=A[0],I=A[1],L=Object(a.useState)(!1),z=Object(d.a)(L,2),U=z[0],M=z[1],Y=Object(a.useState)(!1),J=Object(d.a)(Y,2),B=J[0],F=J[1],G=n(94),V=G.muteYourAudio,H=G.unmuteYourAudio,K=n(44).LocalDataTrack;console.log(\"Room.js render\");var q=function(e,t){if(!e.localParticipant.videoTracks.entries().next()){var n=e.localParticipant.videoTracks.entries().next().value[1].track.mediaStreamTrack;new ImageCapture(n).grabFrame().then((function(t){console.log(\"bitmap :\",t);var n=document.createElement(\"canvas\");n.width=t.width,n.height=t.height,n.getContext(\"2d\").drawImage(t,0,0),n.toBlob((function(t){var n=new FileReader;n.addEventListener(\"loadend\",(function(){fetch(n.result).then((function(e){return e.blob()})).then((function(t){fetch(\"/video/snapShot?identity=\"+e.localParticipant.identity+\"&room=\"+e.name,{method:\"POST\",body:t,headers:{\"Content-Type\":\"application/octet-stream\"}})}))})),n.readAsDataURL(t)}),\"image/jpeg\")})).catch((function(e){console.log(\"takePhoto() error: \",e)}))}},Q=function(e){console.log(e),e.forEach((function(e){fetch(\"/video/emotion?identity=\"+e.identity+\"&room=\"+j.name,{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then((function(t){e.emotion=t.body.emotion}))}))},W=function(e){c&&window.clearInterval(c),c=window.setInterval(Q,1e4,e)};Object(a.useEffect)((function(){console.log(\"dominant speacjer Room.js effect\");var e,n=function(e){console.log(\"Room.js - particiapnt connected\",e),k((function(t){return[].concat(Object(O.a)(t),[e])})),W(N)},a=function(e){console.log(\"Room.js - particiapnt disconnected\",e,N),k((function(t){return t.filter((function(t){return t!==e}))})),W(N),console.log(N)},c=function(e){null!==e?R(e.identity):null===e&&R(null)},s=function(e,t){};function r(e){var t,n,a=document.getElementById(\"datalocal\");a.innerHTML=e,t=a,n=\"appear\",setTimeout((function(){t.classList.remove(n)}),1e3),t.classList.add(n)}function l(t){var n=t.target.innerHTML;r(n),b((function(t){var a,c,i;return console.log(\"id\",t),a=n,c=t.localParticipant.sid,i=t.identity,e.send(JSON.stringify({emojiData:a,user:c,identity:i})),t})),console.log(\"id\",j,\"fdsafsadas\")}return function(){for(var e=document.getElementsByClassName(\"emojibuttons\"),t=0;t<e.length;t++)e[t].addEventListener(\"click\",l)}(),function(){var t=new K;e=t}(),v.a.connect(o,{name:i,dominantSpeaker:!0,audio:!0,video:!0}).then((function(i){console.log(\"Room.js - line 59 - video.connect\",i),b(i),i.on(\"participantConnected\",n),i.on(\"participantDisconnected\",a),i.on(\"dominantSpeakerChanged\",c),i.on(\"trackDisabled\",s),i.localParticipant.publishTrack(e),i.participants.forEach(n),t=window.setInterval(q,5e4,i,N)})),function(){t&&window.clearInterval(t),b((function(e){return e&&\"connected\"===e.localParticipant.state?(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),console.log(\"disconnect!!!!!!\"),e.disconnect(),null):e}))}}),[i,o]);var X=Object(a.useCallback)((function(){console.log(\"called mutecallback, button pressed\"),!1===D&&null!==j?(G.muteYourAudio(j),I(!0)):!0===D&&null!==j&&(G.unmuteYourAudio(j),I(!1))}),[D,j]),Z=Object(a.useCallback)((function(){console.log(\"called mutevideocallback, button pressed\"),!1===U&&null!==j?(G.muteYourVideo(j),M(!0)):!0===U&&null!==j&&(G.unmuteYourVideo(j),M(!1))}),[U,j]),$=Object(a.useCallback)((function(){console.log(\"called deafencallback, button pressed\"),!1===B&&null!==j?(V(j),F(!0)):!0===B&&null!=j&&(H(j),F(!1))}),[j,B]),_=Object(a.useCallback)((function(){console.log(\"testing - line 125!!!!!!\",j),j&&\"connected\"===j.localParticipant.state&&(j.localParticipant.tracks.forEach((function(e){\"video\"!=e.track.kind&&\"audio\"!=e.track.kind||e.track.stop()})),j.disconnect()),s()}),[j]),ee=N.map((function(e,t){return Object(f.jsx)(y,{user:e,mute:B},t)}));return Object(f.jsxs)(\"div\",{className:\"room\",children:[Object(f.jsx)(u.a,{className:\"cameras\",fluid:\"true\",children:Object(f.jsxs)(m.a,{className:\"cameras-row\",children:[Object(f.jsxs)(E.a,{sm:2,className:\"local-participant\",children:[j?Object(f.jsxs)(\"div\",{className:\"local-participant-camera\",children:[Object(f.jsx)(y,{user:j.localParticipant,mute:B,local:\"i\"},j.localParticipant.sid),Object(f.jsx)(\"div\",{id:\"datalocal\",className:\"emoji\"})]}):\"\",Object(f.jsx)(\"div\",{className:\"remote-participants\",children:ee})]}),Object(f.jsxs)(E.a,{sm:10,className:\"dominant\",children:[Object(f.jsx)(S,{className:\"dominant-user\",room:j},\"dominant\"),Object(f.jsx)(\"div\",{className:\"dominant-header-bg\",children:Object(f.jsxs)(\"div\",{className:\"dominant-header\",children:[Object(f.jsxs)(\"div\",{className:\"dominant-header-room\",children:[\"Room Name: \",i]}),Object(f.jsxs)(\"div\",{className:\"dominant-header-speaker\",children:[\"Talking: \",T]})]})})]})]})}),Object(f.jsx)(u.a,{fluid:\"true\",children:Object(f.jsx)(\"div\",{className:\"toolbar\",children:Object(f.jsxs)(\"div\",{className:\"toolbar-items\",children:[Object(f.jsx)(\"div\",{className:\"logoutbutton\",children:Object(f.jsx)(\"button\",{className:\"logoutbutton-btn danger\",onClick:_,children:\"LOG OUT\"})}),Object(f.jsxs)(\"div\",{className:\"btns-toolbar\",children:[Object(f.jsx)(\"div\",{className:\"col-audio\",children:D?Object(f.jsxs)(\"button\",{className:\"btn1 info\",onClick:X,children:[Object(f.jsx)(\"span\",{className:\"btn2\",children:\"Mute\"}),Object(f.jsx)(x.a,{className:\"btnsize\",icon:g.j})]}):Object(f.jsxs)(\"button\",{className:\"btn1 info\",onClick:X,children:[Object(f.jsx)(\"span\",{className:\"btn2\",children:\"Mute\"}),Object(f.jsx)(x.a,{className:\"btnsize\",icon:g.i})]})}),Object(f.jsx)(\"div\",{className:\"col-video\",children:U?Object(f.jsxs)(\"button\",{className:\"btn1 info\",onClick:Z,children:[Object(f.jsx)(\"span\",{className:\"btn2\",children:\"Camera\"}),Object(f.jsx)(x.a,{className:\"btnsize\",icon:g.p})]}):Object(f.jsxs)(\"button\",{className:\"btn1 info\",onClick:Z,children:[Object(f.jsx)(\"span\",{className:\"btn2\",children:\"Camera\"}),Object(f.jsx)(x.a,{className:\"btnsize\",icon:g.o})]})}),Object(f.jsx)(\"div\",{className:\"col-silence\",children:B?Object(f.jsxs)(\"button\",{className:\"btn1 info\",onClick:$,children:[Object(f.jsx)(\"span\",{className:\"btn2\",children:\"Silence\"}),Object(f.jsx)(x.a,{className:\"btnsize\",icon:g.l})]}):Object(f.jsxs)(\"button\",{className:\"btn1 info\",onClick:$,children:[Object(f.jsx)(\"span\",{className:\"btn2\",children:\"Silence\"}),Object(f.jsx)(x.a,{className:\"btnsize\",icon:g.e})]})})]}),Object(f.jsx)(\"div\",{className:\"col-emoji\",children:Object(f.jsxs)(\"div\",{className:\"emojiPanel\",style:{padding:\"1rem\"},children:[Object(f.jsxs)(\"div\",{className:\"reaction-container\",children:[Object(f.jsx)(\"span\",{className:\"reaction-label-like\",children:\"Like\"}),Object(f.jsx)(\"button\",{id:\"emoji-wink\",className:\"btn3 warning emojibuttons\",style:{marginRight:\"1rem\"},children:Object(f.jsx)(\"span\",{className:\"reaction-entity\",children:\"\\ud83d\\udc4d\"})})]}),Object(f.jsxs)(\"div\",{className:\"reaction-container\",children:[Object(f.jsx)(\"span\",{className:\"reaction-label-dislike\",children:\"Dislike\"}),Object(f.jsx)(\"button\",{id:\"emoji-eyes\",className:\"btn3 warning emojibuttons\",style:{marginRight:\"1rem\"},children:Object(f.jsx)(\"span\",{className:\"reaction-entity\",children:\"\\ud83d\\udc4e\"})})]}),Object(f.jsxs)(\"div\",{className:\"reaction-container\",children:[Object(f.jsx)(\"span\",{className:\"reaction-label-love\",children:\"Love\"}),Object(f.jsx)(\"button\",{id:\"emoji-heart\",className:\"btn3 warning emojibuttons\",style:{marginRight:\"1rem\"},children:Object(f.jsx)(\"span\",{className:\"reaction-entity\",children:\"\\u2764\"})})]})]})})]})})})]})},w=function(){var e=Object(a.useState)(\"\"),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(\"\"),o=Object(d.a)(i,2),s=o[0],u=o[1],m=Object(a.useState)(null),j=Object(d.a)(m,2),b=j[0],O=j[1],p=Object(a.useCallback)((function(e){u(e.target.value)}),[]),v=Object(a.useCallback)((function(e){c(e.target.value)}),[]),x=Object(a.useCallback)(function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch(\"/video/token\",{method:\"POST\",body:JSON.stringify({identity:n,room:s}),headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return e.json()}));case 3:a=e.sent,O(a.token);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,n]),g=Object(a.useCallback)((function(e){O(null)}),[]);return b?Object(f.jsx)(C,{meetingname:s,token:b,logout:g}):Object(f.jsx)(h,{username:n,roomName:s,handleUsernameChange:v,handleRoomNameChange:p,handleSubmit:x})};var T=function(){return Object(f.jsx)(\"div\",{children:Object(f.jsx)(w,{})})};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(T,{})}),document.getElementById(\"body\"))},94:function(e,t){function n(e,t,n){(\"audio\"===t?e.localParticipant.audioTracks:e.localParticipant.videoTracks).forEach((function(e){\"mute\"===n?(console.log(\"disable local audio\"),e.track.disable()):e.track.enable()}))}t.muteYourAudio=function(e){n(e,\"audio\",\"mute\")},t.muteYourVideo=function(e){n(e,\"video\",\"mute\")},t.unmuteYourAudio=function(e){n(e,\"audio\",\"unmute\")},t.unmuteYourVideo=function(e){n(e,\"video\",\"unmute\")},t.participantMutedOrUnmutedMedia=function(e,t,n){e.on(\"trackSubscribed\",(function(e,a,c){e.on(\"disabled\",(function(){return t(e,c)})),e.on(\"enabled\",(function(){return n(e,c)}))}))}}},[[222,1,2]]]);","name":"static/js/main.e0c7fbcc.chunk.js","map":{"version":3,"sources":["static/js/main.e0c7fbcc.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","Container","Row","Form","Button","jsx_runtime","components_ControlPanel","_ref","username","handleUsernameChange","roomName","handleRoomNameChange","handleSubmit","Object","className","fluid","children","src","width","height","onSubmit","Label","Group","Control","size","type","value","onChange","placeholder","variant","toConsumableArray","es5","es5_default","index_es","free_solid_svg_icons_index_es","_this","undefined","User_helpers","components_User","muteYourAudio","unmuteYourAudio","user","_ref$local","mute","local","_useState","_useState2","videoTracks","setVideoTracks","_useState3","_useState4","audioTracks","setAudioTracks","_useState5","_useState6","muted","setMute","_useState7","_useState8","vmute","setVmute","_useState9","_useState10","videoref","audioref","locals","console","log","identity","toggleMute","toggleVmute","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","addToRemoteDataLabel","newText","dataTrackSID","div","startClass","remoteDataLabel","document","getElementById","innerHTML","setTimeout","classList","remove","add","forEach","on","bind","kind","isEnabled","concat","data","JSON","parse","emojiData","sid","d","dataDiv","createElement","setAttribute","appendChild","attachRemoteDataTrack","v","a","removeAllListeners","videoTrack","attach","current","detach","audioTrack","id","icon","ref","autoPlay","components_DominantUser","room","videoTrackss","setVideoTrackss","audioTrackss","setAudioTrackss","emotion","setEmotion","dominant","setDominant","emoji","emotiontext","fetchSentiment","_ref2","mark","_callee","getUrl","wrap","_context","prev","next","name","fetch","method","headers","then","res","json","sent","stop","apply","arguments","startRecording","audioElement","lengthInMS","recorder","MediaRecorder","ondataavailable","event","start","delayInMS","stopped","Promise","resolve","reject","onstop","onerror","recorded","state","all","videoSnapshotInterval","setInterval","videoElement","mediaStreamTrack","ImageCapture","grabFrame","bitmap","canvas","getContext","drawImage","toBlob","blob","reader","FileReader","addEventListener","result","fetchUrl","body","readAsDataURL","catch","error","clearInterval","audioSnapshotInterval","MediaStreamer","MediaStream","addTrack","navigator","mediaDevices","getUserMedia","audio","recordedChunks","recordedBlob","Blob","recordAudio","Col","components_Room","intervalID","sentiment_intervalID","meetingname","token","logout","test","setRoom","setUser","newDomName","setNewDomName","videomute","setVideomute","_useState11","_useState12","deafenmute","setDeafenmute","helpers","LocalDataTrack","takeSnapshot","users","localParticipant","entries","updateUserSentiments","u","restartSentiment","window","dataTrack","participantConnected","new_user","prevusers","participantDisconnected","gone_user","p","ParticipantNewDominantSpeaker","participantRemoteVideoMuted","addToLocalDataLabel","localDataLabel","emojiButtonHandler","emojiText","target","currentRoom","send","stringify","emojiButtonGroup","getElementsByClassName","i","length","activateEmojiButtons","localDataTrack","addLocalData","connect","dominantSpeaker","video","publishTrack","participants","tracks","trackPublication","disconnect","mutecallback","mutevideocallback","muteYourVideo","unmuteYourVideo","defeancallback","logoutcallback","remoteParticipants","index","sm","onClick","style","padding","marginRight","components_Meeting","setUsername","setRoomName","setToken","roomname_change","username_change","submit","preventDefault","_x","src_App","render","StrictMode","muteOrUnmuteYourMedia","action","disable","enable","participantMutedOrUnmutedMedia","onMutedMedia","onUnmutedMedia","participant"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 101:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 102:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 103:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 222:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(95);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/css/index.css\nvar css = __webpack_require__(101);\n\n// EXTERNAL MODULE: ./src/css/App.css\nvar App = __webpack_require__(102);\n\n// EXTERNAL MODULE: ./src/css/style.css\nvar style = __webpack_require__(103);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(22);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(32);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js\nvar Container = __webpack_require__(223);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Row.js\nvar Row = __webpack_require__(224);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 15 modules\nvar Form = __webpack_require__(225);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js + 2 modules\nvar Button = __webpack_require__(226);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.min.css\nvar bootstrap_min = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/components/ControlPanel.js\nvar ControlPanel_ControlPanel=function ControlPanel(_ref){var username=_ref.username,handleUsernameChange=_ref.handleUsernameChange,roomName=_ref.roomName,handleRoomNameChange=_ref.handleRoomNameChange,handleSubmit=_ref.handleSubmit;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{className:\"controlpanel\",fluid:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{className:\"cmilogo\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"/cuemeinlogo.png\",width:\"400\",height:\"400\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{className:\"control\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:\"meeting\",children:\"Join a Meeting\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:\"name\",children:\"Name:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{className:\"inputname\",size:\"lg\",type:\"name\",value:username,onChange:handleUsernameChange,placeholder:\"User ID\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{className:\"meetingname\",children:\"Meeting name:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{className:\"inputmeetingname\",size:\"lg\",type:\"meetingname\",value:roomName,onChange:handleRoomNameChange,placeholder:\"Room Name\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"success\",type:\"submit\",children:\"JOIN\"})]})})]});};/* harmony default export */ var components_ControlPanel = (ControlPanel_ControlPanel);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/twilio-video/es5/index.js\nvar es5 = __webpack_require__(44);\nvar es5_default = /*#__PURE__*/__webpack_require__.n(es5);\n\n// EXTERNAL MODULE: ./node_modules/@fortawesome/react-fontawesome/index.es.js\nvar index_es = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/@fortawesome/free-solid-svg-icons/index.es.js\nvar free_solid_svg_icons_index_es = __webpack_require__(12);\n\n// CONCATENATED MODULE: ./src/components/User.js\nvar _this=undefined;// import {Container, Row, Col, Button} from 'react-bootstrap'\nvar User_helpers=__webpack_require__(94);var User_muteYourAudio=User_helpers.muteYourAudio;var User_unmuteYourAudio=User_helpers.unmuteYourAudio;var User_User=function User(_ref){var user=_ref.user,mute=_ref.mute,_ref$local=_ref.local,local=_ref$local===void 0?\"\":_ref$local;var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),videoTracks=_useState2[0],setVideoTracks=_useState2[1];var _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),audioTracks=_useState4[0],setAudioTracks=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),muted=_useState6[0],setMute=_useState6[1];var _useState7=Object(react[\"useState\"])(false),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),vmute=_useState8[0],setVmute=_useState8[1];var _useState9=Object(react[\"useState\"])(\"\"),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),reaction=_useState10[0],setReaction=_useState10[1];// const [emotion, setEmotion] = useState(null);\n// const [emotion_style, setEmotion_Style] = useState(\"participant-video\");\nvar videoref=Object(react[\"useRef\"])();var audioref=Object(react[\"useRef\"])();var locals=\"black-box\";console.log(\"User.js\",user.identity);var toggleMute=function toggleMute(muted){setMute(muted);console.log(\"toggle mute\",muted);};var toggleVmute=function toggleVmute(muted){console.log(\"toggleVmute\",muted);setVmute(muted);};var trackpubsToTracks=function trackpubsToTracks(trackMap){return Array.from(trackMap.values()).map(function(publication){return publication.track;}).filter(function(track){return track!==null;});};function attachRemoteDataTrack(div,track){console.log(div);var d=document.getElementById(div);console.log(d,\"user.id DIV\");var dataDiv=document.createElement(\"div\");dataDiv.setAttribute(\"id\",track.sid);dataDiv.setAttribute(\"class\",\"emoji\");d.appendChild(dataDiv);}function animateDataLabel(div,startClass){setTimeout(function(){div.classList.remove(startClass);},5000);div.classList.add(startClass);}function addToRemoteDataLabel(newText,dataTrackSID){var remoteDataLabel=document.getElementById(dataTrackSID);remoteDataLabel.innerHTML=newText;animateDataLabel(remoteDataLabel,\"appear\");}Object(react[\"useEffect\"])(function(){setVideoTracks(trackpubsToTracks(user.videoTracks));setAudioTracks(trackpubsToTracks(user.audioTracks));user.videoTracks.forEach(function(track){track.on(\"trackEnabled\",toggleVmute.bind(_this,false));track.on(\"trackDisabled\",toggleVmute.bind(_this,true));});user.audioTracks.forEach(function(track){track.on(\"trackEnabled\",toggleMute.bind(_this,false));track.on(\"trackDisabled\",toggleMute.bind(_this,true));});var trackSubscribed=function trackSubscribed(track){console.log(track,\"track subs\");if(track.kind===\"video\"){setVmute(!track.isEnabled);setVideoTracks(function(videoTracks){return[].concat(Object(toConsumableArray[\"a\" /* default */])(videoTracks),[track]);});}else if(track.kind===\"audio\"){setMute(!track.isEnabled);setAudioTracks(function(audioTracks){return[].concat(Object(toConsumableArray[\"a\" /* default */])(audioTracks),[track]);});}else if(track.kind==\"data\"){// Registering addToRemoteDataLabel(...) event handler Remote Data Track receive\ntrack.on(\"message\",function(data){console.log(\"DATA REACTION\");console.log(JSON.parse(data).emojiData,track.sid);console.log(JSON.parse(data).user,\"reaction id\");// setReaction(JSON.parse(data).emojiData);\nattachRemoteDataTrack(JSON.parse(data).user,track);addToRemoteDataLabel(JSON.parse(data).emojiData,track.sid);});// Attaching the data track to a display label\n//attachRemoteDataTrack(JSON.parse(data).id, track);\nconsole.log(\"TRACK\");console.log(\"TRACK\",track);}};var trackUnsubscribed=function trackUnsubscribed(track){if(track.kind===\"video\"){setVideoTracks(function(videoTracks){return videoTracks.filter(function(v){return v!==track;});});}else if(track.kind===\"audio\"){setAudioTracks(function(audioTracks){return audioTracks.filter(function(a){return a!==track;});});}// else if (track.kind === \"data\") {\n//   document.getElementById(track.sid).remove();\n// }\n};user.on(\"trackSubscribed\",trackSubscribed);user.on(\"trackUnsubscribed\",trackUnsubscribed);return function(){setVideoTracks([]);setAudioTracks([]);user.removeAllListeners();};},[user]);Object(react[\"useEffect\"])(function(){var videoTrack=videoTracks[0];if(videoTrack){console.log(\"User.js attach()\",user.identity);videoTrack.attach(videoref.current);return function(){console.log(\"User.js detach()\",user.identity);videoTrack.detach();};}},[videoTracks]);Object(react[\"useEffect\"])(function(){var audioTrack=audioTracks[0];if(audioTrack){audioTrack.attach(audioref.current);return function(){audioTrack.detach();};}},[audioTracks]);if(local===\"i\"){locals=\"participant-video-emptyi\";}else{locals=\"participant-video-empty\";}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"user-camera\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:user.sid,className:\"user-camera-reaction\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"user-camera-box\",children:[vmute?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"black-box\",children:\"fds\"}):// <video className={\"participant-video-empty\"} height=\"120\"></video>\n\"\",vmute?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"empty-icon-video\",icon:free_solid_svg_icons_index_es[\"b\" /* faCamera */],size:\"2x\"}):// <video className={\"participant-video-empty\"} height=\"120\"></video>\n\"\",vmute?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{className:locals,width:\"100%\",ref:videoref}):/*#__PURE__*/ // <video className={\"participant-video-empty\"} height=\"120\"></video>\nObject(jsx_runtime[\"jsx\"])(\"video\",{className:\"participant-video\",width:\"100%\",ref:videoref,autoPlay:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"participant-border\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"participant-border-name\",children:user.identity}),muted?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"muted-bg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"muted\",icon:free_solid_svg_icons_index_es[\"j\" /* faMicrophoneSlash */],size:\"1x\"})}):\"\"]}),mute?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"audio\",{ref:audioref,autoPlay:true,muted:true}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"audio\",{ref:audioref,autoPlay:true,muted:true})]});};/* harmony default export */ var components_User = (User_User);\n// CONCATENATED MODULE: ./src/components/DominantUser.js\nvar DominantUser_DominantUser=function DominantUser(_ref){var room=_ref.room;var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),videoTrackss=_useState2[0],setVideoTrackss=_useState2[1];var _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),audioTrackss=_useState4[0],setAudioTrackss=_useState4[1];var _useState5=Object(react[\"useState\"])(\"-\"),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),emotion=_useState6[0],setEmotion=_useState6[1];var _useState7=Object(react[\"useState\"])(\"participant-video\"),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),emotion_style=_useState8[0],setEmotion_Style=_useState8[1];var _useState9=Object(react[\"useState\"])(null),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),dominant=_useState10[0],setDominant=_useState10[1];var videoref=Object(react[\"useRef\"])();var audioref=Object(react[\"useRef\"])();function attachRemoteDataTrack(div,track){console.log(div);var d=document.getElementById(div);console.log(d,\"user.id DIV\");var dataDiv=document.createElement(\"div\");dataDiv.setAttribute(\"id\",track.sid);dataDiv.setAttribute(\"class\",\"emoji\");d.appendChild(dataDiv);}function addToRemoteDataLabel(newText,dataTrackSID){var remoteDataLabel=document.getElementById(dataTrackSID);remoteDataLabel.innerHTML=newText;// animateDataLabel(remoteDataLabel, \"appear\");\n}Object(react[\"useEffect\"])(function(){var ParticipantDominantSpeaker=function ParticipantDominantSpeaker(user){setDominant(user);console.log(\"new dominant speaker Dominant.js\");};if(room!==null){room.on(\"dominantSpeakerChanged\",ParticipantDominantSpeaker);}},[room]);var trackpubsToTracks=function trackpubsToTracks(trackMap){return Array.from(trackMap.values()).map(function(publication){return publication.track;}).filter(function(track){return track!==null;});};Object(react[\"useEffect\"])(function(){if(dominant!=null){setVideoTrackss(trackpubsToTracks(dominant.videoTracks));setAudioTrackss(trackpubsToTracks(dominant.audioTracks));var trackSubscribed=function trackSubscribed(track){if(track.kind===\"video\"){setVideoTrackss(function(videoTracks){return[].concat(Object(toConsumableArray[\"a\" /* default */])(videoTracks),[track]);});}else if(track.kind===\"audio\"){setAudioTrackss(function(audioTracks){return[].concat(Object(toConsumableArray[\"a\" /* default */])(audioTracks),[track]);});}else if(track.kind==\"data\"){track.on(\"message\",function(data){// attachRemoteDataTrack(JSON.parse(data).user, track);\n// addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\nconsole.log(JSON.parse(data).user,JSON.parse(data).emojiData,JSON.parse(data).identity,\"Dominant-REACTION\");});}};var trackUnsubscribed=function trackUnsubscribed(track){if(track.kind===\"video\"){setVideoTrackss(function(videoTracks){return videoTracks.filter(function(v){return v!==track;});});}else if(track.kind===\"audio\"){setAudioTrackss(function(audioTracks){return audioTracks.filter(function(v){return v!==track;});});}};dominant.on(\"trackSubscribed\",trackSubscribed);dominant.on(\"trackUnsubscribed\",trackUnsubscribed);return function(){setVideoTrackss([]);setAudioTrackss([]);dominant.removeAllListeners();};}},[dominant]);var takeSnapshot=function takeSnapshot(videoElement){var imageCapture=new ImageCapture(videoElement);imageCapture.grabFrame().then(function(bitmap){var canvas=document.createElement(\"canvas\");canvas.width=bitmap.width;canvas.height=bitmap.height;var context=canvas.getContext(\"2d\");context.drawImage(bitmap,0,0);canvas.toBlob(function(blob){var reader=new FileReader();reader.addEventListener(\"loadend\",function(){fetch(reader.result).then(function(res){return res.blob();}).then(function(blob){var fetchUrl=\"/video/snapShot?identity=\"+dominant.identity+\"&room=\"+room.name;fetch(fetchUrl,{method:\"POST\",body:blob,headers:{\"Content-Type\":\"application/octet-stream\"}}).then(function(){//Update the UI Sentiment to display the most up-to-date sentiment, according to backend\nfetchSentiment();});});});reader.readAsDataURL(blob);},\"image/jpeg\");}).catch(function(error){console.log(\"takePhoto() error: \",error);});};var fetchSentiment=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var getUrl,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getUrl=\"/emotion?identity=\"+dominant.identity+\"&room=\"+room.name;_context.next=3;return fetch(getUrl,{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();});case 3:data=_context.sent;setEmotion(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchSentiment(){return _ref2.apply(this,arguments);};}();var startRecording=function startRecording(audioElement,lengthInMS){var recorder=new MediaRecorder(audioElement);var data=[];recorder.ondataavailable=function(event){return data.push(event.data);};recorder.start();// console.log(recorder.state + \" for \" + lengthInMS / 1000 + \" seconds...\");\nvar stopped=new Promise(function(resolve,reject){recorder.onstop=resolve;recorder.onerror=function(event){return reject(event.name);};});var recorded=wait(lengthInMS).then(function(){return recorder.state==\"recording\"&&recorder.stop();});return Promise.all([stopped,recorded]).then(function(){return data;});};var recordAudio=function recordAudio(audioElement,lengthInMS){var MediaStreamer=new MediaStream();MediaStreamer.addTrack(audioElement);var recorder=new MediaRecorder(MediaStreamer);navigator.mediaDevices.getUserMedia({audio:true}).then(function(){return startRecording(MediaStreamer,lengthInMS);}).then(function(recordedChunks){var recordedBlob=new Blob(recordedChunks,{type:\"application/octet-stream\"});var reader=new FileReader();reader.addEventListener(\"loadend\",function(){fetch(reader.result).then(function(res){return res.blob();}).then(function(recordedBlob){var fetchUrl=\"/audio/snapShot?identity=\"+dominant.identity+\"&room=\"+room.name;fetch(fetchUrl,{method:\"POST\",body:recordedBlob,headers:{\"Content-Type\":\"application/octet-stream\"}}).then(function(){//Update the UI Sentiment to display the most up-to-date sentiment, according to backend\nfetchSentiment();});});});reader.readAsDataURL(recordedBlob);});};function wait(delayInMS){return new Promise(function(resolve){return setTimeout(resolve,delayInMS);});}function stop(stream){stream.getTracks().forEach(function(track){return track.stop();});console.log(\"Recording stopped\");}Object(react[\"useEffect\"])(function(){if(dominant!=null){var videoTrack=videoTrackss[0];if(videoTrack){videoTrack.attach(videoref.current);}// return () => {\n//   console.log(\"User.js detach()\");\n//   videoTrack.detach();\n// };\n}},[videoTrackss]);//Takes a snapshot, which calls to backend API to update emotion, every time there is a change in who the Dominant User is AND every 2 seconds\nObject(react[\"useEffect\"])(function(){var videoSnapshotInterval=setInterval(function(){if(dominant!=null&&videoTrackss[0].isEnabled){var videoTrack=videoTrackss[0];if(videoTrack){takeSnapshot(videoTrack.mediaStreamTrack);}}},2000);return function(){clearInterval(videoSnapshotInterval);};},[videoTrackss]);//Start a new audio recording interval and stop the old one for parsing every 6 seconds\nObject(react[\"useEffect\"])(function(){var intervalInMS=10000;var audioSnapshotInterval=setInterval(function(){console.log(\"New function called\");if(dominant!=null&&!videoTrackss[0].isEnabled){var audioTrack=audioTrackss[0];if(audioTrack){// audioTrack.attach(audioref.current);\nrecordAudio(audioTrack.mediaStreamTrack,intervalInMS);}}},intervalInMS);return function(){clearInterval(audioSnapshotInterval);//TODO: Place something here that stops the recordAudio function for the previous dominant user\n//when the dominant user changes. This will allow the interval to restart for the new\n//dominant user right when the change happens, giving us more accurate audio (hopefully)\n};},[audioTrackss]);var emoji;var emotiontext;if(emotion.emotion===\"happiness\"){emoji=/*#__PURE__*/ // <img\n//   className=\"dominant-emotion-happy-img\"\n//   src=\"https://img.icons8.com/color/48/000000/happy--v1.png\"\n// />\nObject(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-happy emotion\",icon:free_solid_svg_icons_index_es[\"f\" /* faLaughBeam */],size:\"2x\"});emotiontext=\"HAPPY\";}else if(emotion.emotion===\"anger\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-angry emotion\",icon:free_solid_svg_icons_index_es[\"a\" /* faAngry */],size:\"2x\"});emotiontext=\"ANGRY\";}else if(emotion.emotion===\"sadness\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-sadness emotion\",icon:free_solid_svg_icons_index_es[\"k\" /* faSadTear */],size:\"2x\"});emotiontext=\"SADNESS\";}else if(emotion.emotion===\"fear\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-fear emotion\",icon:free_solid_svg_icons_index_es[\"c\" /* faFrownOpen */],size:\"2x\"});emotiontext=\"FEAR\";}else if(emotion.emotion===\"disgust\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-disgust emotion\",icon:free_solid_svg_icons_index_es[\"m\" /* faTired */],size:\"2x\"});emotiontext=\"DISGUST\";}else if(emotion.emotion===\"neutral\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-neutral emotion\",icon:free_solid_svg_icons_index_es[\"g\" /* faMeh */],size:\"2x\"});emotiontext=\"NEUTRAL\";}else if(emotion.emotion===\"surprise\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-surprised emotion\",icon:free_solid_svg_icons_index_es[\"d\" /* faGrinStars */],size:\"2x\"});emotiontext=\"SURPRISE\";}else if(emotion.emotion===\"-\"){emoji=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-emotion-undefined emotion\",icon:free_solid_svg_icons_index_es[\"h\" /* faMehBlank */],size:\"2x\"});emotiontext=\"UNDEFINED\";}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"dominant-camera\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"das\",className:\"dominant-camera-reaction\"}),dominant?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{className:\"participant-video-dominant\",width:\"100%\",height:\"100%\",ref:videoref,autoPlay:true}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"default-video-dominant\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"dominant-camera-default\",icon:free_solid_svg_icons_index_es[\"n\" /* faUsers */],size:\"2x\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"dominant-border-emotion-icon\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{className:\"dominant-border-emotion-header\",children:\"Emotion\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"dominant-icon\",children:emoji})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"dominant-border\",children:[dominant?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"dominant-border-name\",children:dominant.identity}):\"\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"dominant-border-emotion-background\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"dominant-border-emotion-text\",children:emotiontext})})]})]});};/* harmony default export */ var components_DominantUser = (DominantUser_DominantUser);\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Col.js\nvar Col = __webpack_require__(96);\n\n// CONCATENATED MODULE: ./src/components/Room.js\nvar Room_Room=function Room(_ref){var meetingname=_ref.meetingname,token=_ref.token,emotion=_ref.emotion,logout=_ref.logout,test=_ref.test;var _useState=Object(react[\"useState\"])(null),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),room=_useState2[0],setRoom=_useState2[1];var _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),user=_useState4[0],setUser=_useState4[1];//create user array here\n//implement\nvar _useState5=Object(react[\"useState\"])(\"\"),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),newDomName=_useState6[0],setNewDomName=_useState6[1];var _useState7=Object(react[\"useState\"])(false),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),mute=_useState8[0],setMute=_useState8[1];var _useState9=Object(react[\"useState\"])(false),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),videomute=_useState10[0],setVideomute=_useState10[1];var _useState11=Object(react[\"useState\"])(false),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),deafenmute=_useState12[0],setDeafenmute=_useState12[1];var intervalID;var sentiment_intervalID;// const reaction = require(\"./reaction\");\n// const activateEmojiButtons = reaction.activateEmojiButtons;\n// const addLocalData = reaction.addLocalData;\n// activateEmojiButtons();\n// addLocalData();\n// const dataTrack = reaction.dataTrack;\nvar helpers=__webpack_require__(94);var muteYourAudio=helpers.muteYourAudio;var unmuteYourAudio=helpers.unmuteYourAudio;var _require=__webpack_require__(44),LocalDataTrack=_require.LocalDataTrack;console.log(\"Room.js render\");var takeSnapshot=function takeSnapshot(room,users){if(!room.localParticipant.videoTracks.entries().next()){var videoElement=room.localParticipant.videoTracks.entries().next().value[1].track.mediaStreamTrack;var imageCapture=new ImageCapture(videoElement);imageCapture.grabFrame().then(function(bitmap){console.log(\"bitmap :\",bitmap);var canvas=document.createElement(\"canvas\");canvas.width=bitmap.width;canvas.height=bitmap.height;var context=canvas.getContext(\"2d\");context.drawImage(bitmap,0,0);canvas.toBlob(function(blob){// console.log(blob);\nvar reader=new FileReader();reader.addEventListener(\"loadend\",function(){fetch(reader.result).then(function(res){return res.blob();}).then(function(blob){// console.log(\"here is your binary: \", blob);\nfetch(\"/video/snapShot?identity=\"+room.localParticipant.identity+\"&room=\"+room.name,{method:\"POST\",body:blob,headers:{\"Content-Type\":\"application/octet-stream\"}});});});reader.readAsDataURL(blob);},\"image/jpeg\");}).catch(function(error){console.log(\"takePhoto() error: \",error);});}};//passing array here\n//user state = array for rendering\nvar updateUserSentiments=function updateUserSentiments(users){console.log(users);users.forEach(function(u){fetch(\"/video/emotion?identity=\"+u.identity+\"&room=\"+room.name,{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){u.emotion=res.body.emotion;});});};var restartSentiment=function restartSentiment(user){if(sentiment_intervalID){window.clearInterval(sentiment_intervalID);}sentiment_intervalID=window.setInterval(updateUserSentiments,10000,user);};Object(react[\"useEffect\"])(function(){console.log(\"dominant speacjer Room.js effect\");var participantConnected=function participantConnected(new_user){console.log(\"Room.js - particiapnt connected\",new_user);//add user to array\nsetUser(function(prevusers){return[].concat(Object(toConsumableArray[\"a\" /* default */])(prevusers),[new_user]);});restartSentiment(user);};var participantDisconnected=function participantDisconnected(gone_user){console.log(\"Room.js - particiapnt disconnected\",gone_user,user);//remove user from array\nsetUser(function(prevusers){return prevusers.filter(function(p){return p!==gone_user;});});// setUser((prevusers) => prevusers.splice(prevusers.indexOf(gone_user), 1));\nrestartSentiment(user);console.log(user);};var ParticipantNewDominantSpeaker=function ParticipantNewDominantSpeaker(user){if(user!==null){// console.log(\"new dominant speaker Room.js\");\nsetNewDomName(user.identity);}else if(user===null){setNewDomName(null);}};var participantRemoteVideoMuted=function participantRemoteVideoMuted(track,user){// console.log(\"Room.js - Track disable\", track, user);\n};var participantRemotedAudioMuted=function participantRemotedAudioMuted(track,user){};var dataTrack;// add this at the top with the other variable declarations\nfunction addToLocalDataLabel(newText){var localDataLabel=document.getElementById(\"datalocal\");localDataLabel.innerHTML=newText;animateDataLabel(localDataLabel,\"appear\");}function sendDataToRoom(data,id,identity){dataTrack.send(JSON.stringify({emojiData:data,user:id,identity:identity}));}function emojiButtonHandler(event){var emojiButton=event.target;var emojiText=emojiButton.innerHTML;addToLocalDataLabel(emojiText);setRoom(function(currentRoom){console.log(\"id\",currentRoom);sendDataToRoom(emojiText,currentRoom.localParticipant.sid,currentRoom.identity);return currentRoom;});console.log(\"id\",room,\"fdsafsadas\");}function activateEmojiButtons(){var emojiButtonGroup=document.getElementsByClassName(\"emojibuttons\");var emojiButton;for(var i=0;i<emojiButtonGroup.length;i++){emojiButton=emojiButtonGroup[i];emojiButton.addEventListener(\"click\",emojiButtonHandler);}}activateEmojiButtons();function addLocalData(){// Creates a Local Data Track\nvar localDataTrack=new LocalDataTrack();dataTrack=localDataTrack;}addLocalData();function animateDataLabel(div,startClass){setTimeout(function(){div.classList.remove(startClass);},1000);div.classList.add(startClass);}es5_default.a.connect(token,{name:meetingname,dominantSpeaker:true,audio:true,video:true}).then(function(room){console.log(\"Room.js - line 59 - video.connect\",room);setRoom(room);// Publishing the local Data Track to the Room\n// room.localParticipant.publishTrack(dataTrack);\n//intervalID = window.setInterval(takeSnapshot, 10000, room,user);\nroom.on(\"participantConnected\",participantConnected);room.on(\"participantDisconnected\",participantDisconnected);room.on(\"dominantSpeakerChanged\",ParticipantNewDominantSpeaker);room.on(\"trackDisabled\",participantRemoteVideoMuted);room.localParticipant.publishTrack(dataTrack);room.participants.forEach(participantConnected);intervalID=window.setInterval(takeSnapshot,50000,room,user);});return function(){if(intervalID){window.clearInterval(intervalID);}setRoom(function(currentRoom){if(currentRoom&&currentRoom.localParticipant.state===\"connected\"){currentRoom.localParticipant.tracks.forEach(function(trackPublication){trackPublication.track.stop();});console.log(\"disconnect!!!!!!\");currentRoom.disconnect();return null;}else{return currentRoom;}});};},[meetingname,token]);var mutecallback=Object(react[\"useCallback\"])(function(){console.log(\"called mutecallback, button pressed\");if(mute===false&&room!==null){helpers.muteYourAudio(room);setMute(true);}else if(mute===true&&room!==null){helpers.unmuteYourAudio(room);setMute(false);}},[mute,room]);var mutevideocallback=Object(react[\"useCallback\"])(function(){console.log(\"called mutevideocallback, button pressed\");if(videomute===false&&room!==null){helpers.muteYourVideo(room);setVideomute(true);}else if(videomute===true&&room!==null){helpers.unmuteYourVideo(room);setVideomute(false);}},[videomute,room]);var defeancallback=Object(react[\"useCallback\"])(function(){console.log(\"called deafencallback, button pressed\");if(deafenmute===false&&room!==null){muteYourAudio(room);setDeafenmute(true);}else if(deafenmute===true&&room!=null){unmuteYourAudio(room);setDeafenmute(false);}},[room,deafenmute]);var logoutcallback=Object(react[\"useCallback\"])(function(){console.log(\"testing - line 125!!!!!!\",room);if(room&&room.localParticipant.state===\"connected\"){room.localParticipant.tracks.forEach(function(trackPublication){if(trackPublication.track.kind==\"video\"||trackPublication.track.kind==\"audio\"){trackPublication.track.stop();}});//debugger;\nroom.disconnect();}logout();},[room]);var remoteParticipants=user.map(function(user,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_User,{user:user,mute:deafenmute},index);});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"room\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Container[\"a\" /* default */],{className:\"cameras\",fluid:\"true\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"cameras-row\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Col[\"a\" /* default */],{sm:2,className:\"local-participant\",children:[room?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"local-participant-camera\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_User,{user:room.localParticipant,mute:deafenmute,local:\"i\"},room.localParticipant.sid),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"datalocal\",className:\"emoji\"})]}):\"\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"remote-participants\",children:remoteParticipants})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Col[\"a\" /* default */],{sm:10,className:\"dominant\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_DominantUser,{className:\"dominant-user\",room:room},\"dominant\"),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"dominant-header-bg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"dominant-header\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"dominant-header-room\",children:[\"Room Name: \",meetingname]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"dominant-header-speaker\",children:[\"Talking: \",newDomName]})]})})]})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Container[\"a\" /* default */],{fluid:\"true\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"toolbar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"toolbar-items\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"logoutbutton\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"logoutbutton-btn danger\",onClick:logoutcallback,children:\"LOG OUT\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"btns-toolbar\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-audio\",children:mute?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"btn1 info\",onClick:mutecallback,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"btn2\",children:\"Mute\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"btnsize\",icon:free_solid_svg_icons_index_es[\"j\" /* faMicrophoneSlash */]})]}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"btn1 info\",onClick:mutecallback,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"btn2\",children:\"Mute\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"btnsize\",icon:free_solid_svg_icons_index_es[\"i\" /* faMicrophone */]})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-video\",children:videomute?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"btn1 info\",onClick:mutevideocallback,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"btn2\",children:\"Camera\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"btnsize\",icon:free_solid_svg_icons_index_es[\"p\" /* faVideoSlash */]})]}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"btn1 info\",onClick:mutevideocallback,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"btn2\",children:\"Camera\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"btnsize\",icon:free_solid_svg_icons_index_es[\"o\" /* faVideo */]})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-silence\",children:deafenmute?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"btn1 info\",onClick:defeancallback,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"btn2\",children:\"Silence\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"btnsize\",icon:free_solid_svg_icons_index_es[\"l\" /* faTimes */]})]}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"btn1 info\",onClick:defeancallback,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"btn2\",children:\"Silence\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_es[\"a\" /* FontAwesomeIcon */],{className:\"btnsize\",icon:free_solid_svg_icons_index_es[\"e\" /* faHeadphones */]})]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-emoji\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"emojiPanel\",style:{padding:\"1rem\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"reaction-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"reaction-label-like\",children:\"Like\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{id:\"emoji-wink\",className:\"btn3 warning emojibuttons\",style:{marginRight:\"1rem\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"reaction-entity\",children:\"\\uD83D\\uDC4D\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"reaction-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"reaction-label-dislike\",children:\"Dislike\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{id:\"emoji-eyes\",className:\"btn3 warning emojibuttons\",style:{marginRight:\"1rem\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"reaction-entity\",children:\"\\uD83D\\uDC4E\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"reaction-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"reaction-label-love\",children:\"Love\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{id:\"emoji-heart\",className:\"btn3 warning emojibuttons\",style:{marginRight:\"1rem\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"reaction-entity\",children:\"\\u2764\"})})]})]})})]})})})]});};/* harmony default export */ var components_Room = (Room_Room);\n// CONCATENATED MODULE: ./src/components/Meeting.js\nvar Meeting_Meeting=function Meeting(){var _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=Object(react[\"useState\"])(\"\"),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),meetingname=_useState4[0],setRoomName=_useState4[1];var _useState5=Object(react[\"useState\"])(null),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),token=_useState6[0],setToken=_useState6[1];var roomname_change=Object(react[\"useCallback\"])(function(event){setRoomName(event.target.value);},[]);var username_change=Object(react[\"useCallback\"])(function(event){setUsername(event.target.value);},[]);var submit=Object(react[\"useCallback\"])(/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(event){var data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch(\"/video/token\",{method:\"POST\",body:JSON.stringify({identity:username,room:meetingname}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();});case 3:data=_context.sent;setToken(data.token);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[meetingname,username]);var logout=Object(react[\"useCallback\"])(function(event){setToken(null);},[]);var result;if(token){result=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Room,{meetingname:meetingname,token:token,logout:logout});}else{result=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_ControlPanel,{username:username,roomName:meetingname,handleUsernameChange:username_change,handleRoomNameChange:roomname_change,handleSubmit:submit});}return result;};/* harmony default export */ var components_Meeting = (Meeting_Meeting);\n// CONCATENATED MODULE: ./src/App.js\n// import {BrowserFouter as Router, Switch, Route} from \"react-router-dom\"\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Meeting,{})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\n// import reportWebVitals from './reportWebVitals';\n// button.addEventListener('click', () => {\n//   Twilio.Video.createLocalVideoTrack().then(track => {\n//     container.append(track.attach());\n//     button.remove();\n//   });\n//   button.remove();\n// })\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"body\"));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\n/**\n * Mute/unmute your media in a Room.\n * @param {Room} room - The Room you have joined\n * @param {'audio'|'video'} kind - The type of media you want to mute/unmute\n * @param {'mute'|'unmute'} action - Whether you want to mute/unmute\n */function muteOrUnmuteYourMedia(room,kind,action){var publications=kind==='audio'?room.localParticipant.audioTracks:room.localParticipant.videoTracks;publications.forEach(function(publication){if(action==='mute'){console.log(\"disable local audio\");publication.track.disable();}else{publication.track.enable();}});}/**\n * Mute your audio in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */function muteYourAudio(room){muteOrUnmuteYourMedia(room,'audio','mute');}/**\n * Mute your video in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */function muteYourVideo(room){muteOrUnmuteYourMedia(room,'video','mute');}/**\n * Unmute your audio in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */function unmuteYourAudio(room){muteOrUnmuteYourMedia(room,'audio','unmute');}/**\n * Unmute your video in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */function unmuteYourVideo(room){muteOrUnmuteYourMedia(room,'video','unmute');}/**\n * A RemoteParticipant muted or unmuted its media.\n * @param {Room} room - The Room you have joined\n * @param {function} onMutedMedia - Called when a RemoteParticipant muted its media\n * @param {function} onUnmutedMedia - Called when a RemoteParticipant unmuted its media\n * @returns {void}\n */function participantMutedOrUnmutedMedia(room,onMutedMedia,onUnmutedMedia){room.on('trackSubscribed',function(track,publication,participant){track.on('disabled',function(){return onMutedMedia(track,participant);});track.on('enabled',function(){return onUnmutedMedia(track,participant);});});}exports.muteYourAudio=muteYourAudio;exports.muteYourVideo=muteYourVideo;exports.unmuteYourAudio=unmuteYourAudio;exports.unmuteYourVideo=unmuteYourVideo;exports.participantMutedOrUnmutedMedia=participantMutedOrUnmutedMedia;\n\n/***/ })\n\n},[[222,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/postcss-loader/src/index.js??postcss!/Users/javierjimenez/cuemeinDeploy/capstone/client/src/css/index.css","/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/postcss-loader/src/index.js??postcss!/Users/javierjimenez/cuemeinDeploy/capstone/client/src/css/App.css","/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/javierjimenez/cuemeinDeploy/capstone/client/node_modules/postcss-loader/src/index.js??postcss!/Users/javierjimenez/cuemeinDeploy/capstone/client/src/css/style.css","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/components/ControlPanel.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/components/User.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/components/DominantUser.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/components/Room.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/components/Meeting.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/App.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/index.js","/Users/javierjimenez/cuemeinDeploy/capstone/client/src/components/helpers.js"],"names":["ControlPanel","username","handleUsernameChange","roomName","handleRoomNameChange","handleSubmit","helpers","require","muteYourAudio","unmuteYourAudio","User","user","mute","local","useState","videoTracks","setVideoTracks","audioTracks","setAudioTracks","muted","setMute","vmute","setVmute","reaction","setReaction","videoref","useRef","audioref","locals","console","log","identity","toggleMute","toggleVmute","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","attachRemoteDataTrack","div","d","document","getElementById","dataDiv","createElement","setAttribute","sid","appendChild","animateDataLabel","startClass","setTimeout","classList","remove","add","addToRemoteDataLabel","newText","dataTrackSID","remoteDataLabel","innerHTML","useEffect","forEach","on","bind","trackSubscribed","kind","isEnabled","data","JSON","parse","emojiData","trackUnsubscribed","v","a","removeAllListeners","videoTrack","attach","current","detach","audioTrack","faCamera","faMicrophoneSlash","DominantUser","room","videoTrackss","setVideoTrackss","audioTrackss","setAudioTrackss","emotion","setEmotion","emotion_style","setEmotion_Style","dominant","setDominant","ParticipantDominantSpeaker","takeSnapshot","videoElement","imageCapture","ImageCapture","grabFrame","then","bitmap","canvas","width","height","context","getContext","drawImage","toBlob","blob","reader","FileReader","addEventListener","fetch","result","res","fetchUrl","name","method","body","headers","fetchSentiment","readAsDataURL","catch","error","getUrl","json","startRecording","audioElement","lengthInMS","recorder","MediaRecorder","ondataavailable","event","push","start","stopped","Promise","resolve","reject","onstop","onerror","recorded","wait","state","stop","all","recordAudio","MediaStreamer","MediaStream","addTrack","navigator","mediaDevices","getUserMedia","audio","recordedChunks","recordedBlob","Blob","type","delayInMS","stream","getTracks","videoSnapshotInterval","setInterval","mediaStreamTrack","clearInterval","intervalInMS","audioSnapshotInterval","emoji","emotiontext","faLaughBeam","faAngry","faSadTear","faFrownOpen","faTired","faMeh","faGrinStars","faMehBlank","faUsers","Room","meetingname","token","logout","test","setRoom","setUser","newDomName","setNewDomName","videomute","setVideomute","deafenmute","setDeafenmute","intervalID","sentiment_intervalID","LocalDataTrack","users","localParticipant","entries","next","value","updateUserSentiments","u","restartSentiment","window","participantConnected","new_user","prevusers","participantDisconnected","gone_user","p","ParticipantNewDominantSpeaker","participantRemoteVideoMuted","participantRemotedAudioMuted","dataTrack","addToLocalDataLabel","localDataLabel","sendDataToRoom","id","send","stringify","emojiButtonHandler","emojiButton","target","emojiText","currentRoom","activateEmojiButtons","emojiButtonGroup","getElementsByClassName","i","length","addLocalData","localDataTrack","Video","connect","dominantSpeaker","video","publishTrack","participants","tracks","trackPublication","disconnect","mutecallback","useCallback","mutevideocallback","muteYourVideo","unmuteYourVideo","defeancallback","logoutcallback","remoteParticipants","index","faMicrophone","faVideoSlash","faVideo","faTimes","faHeadphones","padding","marginRight","Meeting","setUsername","setRoomName","setToken","roomname_change","username_change","submit","preventDefault","App","ReactDOM","render","muteOrUnmuteYourMedia","action","publications","disable","enable","participantMutedOrUnmutedMedia","onMutedMedia","onUnmutedMedia","participant","exports"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React from 'react';\nimport {Container, Row, Form, Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst ControlPanel = ({\n  username,\n  handleUsernameChange,\n  roomName,\n  handleRoomNameChange,\n  handleSubmit\n}) => {\n  return (\n    <Container className=\"controlpanel\" fluid>\n      <Row className=\"cmilogo\">\n        <img src= \"/cuemeinlogo.png\" width=\"400\" height=\"400\"></img>\n      </Row> \n      <Row className=\"control\">\n          <Form onSubmit={handleSubmit}>\n            <Form.Label className=\"meeting\">Join a Meeting</Form.Label>\n\n            <Form.Group>\n            <Form.Label className=\"name\">Name:</Form.Label>\n            <Form.Control className=\"inputname\" size=\"lg\" type=\"name\" value={username}  onChange={handleUsernameChange} placeholder=\"User ID\" />\n            </Form.Group>\n\n            <Form.Group>\n            <Form.Label className=\"meetingname\">Meeting name:</Form.Label>\n            <Form.Control className=\"inputmeetingname\" size=\"lg\" type=\"meetingname\"  value={roomName}  onChange={handleRoomNameChange} placeholder=\"Room Name\" />\n            </Form.Group>\n\n            <Button variant=\"success\" type=\"submit\" >JOIN</Button>\n          </Form>\n        {/* <form onSubmit={handleSubmit}>\n          <h1>Enter a Meeting</h1>\n          <div>\n            <label htmlFor=\"name\">Name:</label>\n            <input\n              type=\"text\"\n              id=\"field\"\n              value={username}\n              onChange={handleUsernameChange}\n              required\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"room\">Meeting name:</label>\n            <input\n              type=\"text\"\n              id=\"room\"\n              value={roomName}\n              onChange={handleRoomNameChange}\n              required\n            />\n          </div>\n          <button type=\"submit\">Submit</button>\n        </form> */}\n      </Row>\n    </Container>\n  );\n};\n\nexport default ControlPanel;","import React, { useState, useEffect, useRef } from \"react\";\n// import {Container, Row, Col, Button} from 'react-bootstrap'\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMicrophoneSlash, faCamera } from \"@fortawesome/free-solid-svg-icons\";\n\nconst helpers = require(\"./helpers\");\nconst muteYourAudio = helpers.muteYourAudio;\nconst unmuteYourAudio = helpers.unmuteYourAudio;\n\nconst User = ({ user, mute, local = \"\" }) => {\n  const [videoTracks, setVideoTracks] = useState([]);\n  const [audioTracks, setAudioTracks] = useState([]);\n  const [muted, setMute] = useState(false);\n  const [vmute, setVmute] = useState(false);\n  const [reaction, setReaction] = useState(\"\");\n  // const [emotion, setEmotion] = useState(null);\n  // const [emotion_style, setEmotion_Style] = useState(\"participant-video\");\n\n  const videoref = useRef();\n  const audioref = useRef();\n  let locals = \"black-box\";\n\n  console.log(\"User.js\", user.identity);\n\n  const toggleMute = (muted) => {\n    setMute(muted);\n    console.log(\"toggle mute\", muted);\n  };\n\n  const toggleVmute = (muted) => {\n    console.log(\"toggleVmute\", muted);\n    setVmute(muted);\n  };\n\n  const trackpubsToTracks = (trackMap) =>\n    Array.from(trackMap.values())\n      .map((publication) => publication.track)\n      .filter((track) => track !== null);\n\n  function attachRemoteDataTrack(div, track) {\n    console.log(div);\n    let d = document.getElementById(div);\n    console.log(d, \"user.id DIV\");\n    let dataDiv = document.createElement(\"div\");\n    dataDiv.setAttribute(\"id\", track.sid);\n    dataDiv.setAttribute(\"class\", \"emoji\");\n    d.appendChild(dataDiv);\n  }\n  function animateDataLabel(div, startClass) {\n    setTimeout(function () {\n      div.classList.remove(startClass);\n    }, 5000);\n    div.classList.add(startClass);\n  }\n\n  function addToRemoteDataLabel(newText, dataTrackSID) {\n    let remoteDataLabel = document.getElementById(dataTrackSID);\n    remoteDataLabel.innerHTML = newText;\n    animateDataLabel(remoteDataLabel, \"appear\");\n  }\n\n  useEffect(() => {\n    setVideoTracks(trackpubsToTracks(user.videoTracks));\n    setAudioTracks(trackpubsToTracks(user.audioTracks));\n\n    user.videoTracks.forEach((track) => {\n      track.on(\"trackEnabled\", toggleVmute.bind(this, false));\n      track.on(\"trackDisabled\", toggleVmute.bind(this, true));\n    });\n\n    user.audioTracks.forEach((track) => {\n      track.on(\"trackEnabled\", toggleMute.bind(this, false));\n      track.on(\"trackDisabled\", toggleMute.bind(this, true));\n    });\n\n    const trackSubscribed = (track) => {\n      console.log(track, \"track subs\");\n      if (track.kind === \"video\") {\n        setVmute(!track.isEnabled);\n        setVideoTracks((videoTracks) => [...videoTracks, track]);\n      } else if (track.kind === \"audio\") {\n        setMute(!track.isEnabled);\n        setAudioTracks((audioTracks) => [...audioTracks, track]);\n      } else if (track.kind == \"data\") {\n        // Registering addToRemoteDataLabel(...) event handler Remote Data Track receive\n        track.on(\"message\", (data) => {\n          console.log(\"DATA REACTION\");\n          console.log(JSON.parse(data).emojiData, track.sid);\n          console.log(JSON.parse(data).user, \"reaction id\");\n          // setReaction(JSON.parse(data).emojiData);\n          attachRemoteDataTrack(JSON.parse(data).user, track);\n          addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\n        });\n        // Attaching the data track to a display label\n        //attachRemoteDataTrack(JSON.parse(data).id, track);\n        console.log(\"TRACK\");\n        console.log(\"TRACK\", track);\n      }\n    };\n\n    const trackUnsubscribed = (track) => {\n      if (track.kind === \"video\") {\n        setVideoTracks((videoTracks) => videoTracks.filter((v) => v !== track));\n      } else if (track.kind === \"audio\") {\n        setAudioTracks((audioTracks) => audioTracks.filter((a) => a !== track));\n      }\n      // else if (track.kind === \"data\") {\n      //   document.getElementById(track.sid).remove();\n      // }\n    };\n\n    user.on(\"trackSubscribed\", trackSubscribed);\n    user.on(\"trackUnsubscribed\", trackUnsubscribed);\n\n    return () => {\n      setVideoTracks([]);\n      setAudioTracks([]);\n      user.removeAllListeners();\n    };\n  }, [user]);\n\n  useEffect(() => {\n    const videoTrack = videoTracks[0];\n    if (videoTrack) {\n      console.log(\"User.js attach()\", user.identity);\n      videoTrack.attach(videoref.current);\n      return () => {\n        console.log(\"User.js detach()\", user.identity);\n        videoTrack.detach();\n      };\n    }\n  }, [videoTracks]);\n\n  useEffect(() => {\n    const audioTrack = audioTracks[0];\n    if (audioTrack) {\n      audioTrack.attach(audioref.current);\n      return () => {\n        audioTrack.detach();\n      };\n    }\n  }, [audioTracks]);\n\n  if (local === \"i\") {\n    locals = \"participant-video-emptyi\";\n  } else {\n    locals = \"participant-video-empty\";\n  }\n\n  return (\n    <div className=\"user-camera\">\n      <div id={user.sid} className=\"user-camera-reaction\"></div>\n\n      <div className=\"user-camera-box\">\n        {vmute ? (\n          <div className=\"black-box\">fds</div>\n        ) : (\n          // <video className={\"participant-video-empty\"} height=\"120\"></video>\n          \"\"\n        )}\n        {vmute ? (\n          <FontAwesomeIcon\n            className={\"empty-icon-video\"}\n            icon={faCamera}\n            size=\"2x\"\n          />\n        ) : (\n          // <video className={\"participant-video-empty\"} height=\"120\"></video>\n          \"\"\n        )}\n\n        {vmute ? (\n          <video className={locals} width=\"100%\" ref={videoref} />\n        ) : (\n          // <video className={\"participant-video-empty\"} height=\"120\"></video>\n          <video\n            className={\"participant-video\"}\n            width=\"100%\"\n            ref={videoref}\n            autoPlay={true}\n          />\n        )}\n      </div>\n\n      <div className=\"participant-border\">\n        <div className=\"participant-border-name\">{user.identity}</div>\n\n        {muted ? (\n          <div className=\"muted-bg\">\n            <FontAwesomeIcon\n              className={\"muted\"}\n              icon={faMicrophoneSlash}\n              size=\"1x\"\n            />\n          </div>\n        ) : (\n          \"\"\n        )}\n      </div>\n      {mute ? (\n        <audio ref={audioref} autoPlay={true} muted />\n      ) : (\n        <audio ref={audioref} autoPlay={true} muted />\n      )}\n    </div>\n  );\n};\n\nexport default User;\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Row, Col, Button, Container } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMehBlank,\n  faGrinStars,\n  faMeh,\n  faTired,\n  faFrownOpen,\n  faSadTear,\n  faLaughBeam,\n  faAngry,\n  faUsers,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst DominantUser = ({ room }) => {\n  const [videoTrackss, setVideoTrackss] = useState([]);\n  const [audioTrackss, setAudioTrackss] = useState([]);\n  const [emotion, setEmotion] = useState(\"-\");\n  const [emotion_style, setEmotion_Style] = useState(\"participant-video\");\n  const [dominant, setDominant] = useState(null);\n\n  const videoref = useRef();\n  const audioref = useRef();\n\n  function attachRemoteDataTrack(div, track) {\n    console.log(div);\n    let d = document.getElementById(div);\n    console.log(d, \"user.id DIV\");\n    let dataDiv = document.createElement(\"div\");\n    dataDiv.setAttribute(\"id\", track.sid);\n    dataDiv.setAttribute(\"class\", \"emoji\");\n    d.appendChild(dataDiv);\n  }\n\n  function addToRemoteDataLabel(newText, dataTrackSID) {\n    let remoteDataLabel = document.getElementById(dataTrackSID);\n    remoteDataLabel.innerHTML = newText;\n    // animateDataLabel(remoteDataLabel, \"appear\");\n  }\n\n  useEffect(() => {\n    const ParticipantDominantSpeaker = (user) => {\n      setDominant(user);\n      console.log(\"new dominant speaker Dominant.js\");\n    };\n    if (room !== null) {\n      room.on(\"dominantSpeakerChanged\", ParticipantDominantSpeaker);\n    }\n  }, [room]);\n\n  const trackpubsToTracks = (trackMap) =>\n    Array.from(trackMap.values())\n      .map((publication) => publication.track)\n      .filter((track) => track !== null);\n\n  useEffect(() => {\n    if (dominant != null) {\n      setVideoTrackss(trackpubsToTracks(dominant.videoTracks));\n      setAudioTrackss(trackpubsToTracks(dominant.audioTracks));\n\n      const trackSubscribed = (track) => {\n        if (track.kind === \"video\") {\n          setVideoTrackss((videoTracks) => [...videoTracks, track]);\n        } else if (track.kind === \"audio\") {\n          setAudioTrackss((audioTracks) => [...audioTracks, track]);\n        } else if (track.kind == \"data\") {\n          track.on(\"message\", (data) => {\n            // attachRemoteDataTrack(JSON.parse(data).user, track);\n            // addToRemoteDataLabel(JSON.parse(data).emojiData, track.sid);\n            console.log(\n              JSON.parse(data).user,\n              JSON.parse(data).emojiData,\n              JSON.parse(data).identity,\n              \"Dominant-REACTION\"\n            );\n          });\n        }\n      };\n\n      const trackUnsubscribed = (track) => {\n        if (track.kind === \"video\") {\n          setVideoTrackss((videoTracks) =>\n            videoTracks.filter((v) => v !== track)\n          );\n        } else if (track.kind === \"audio\") {\n          setAudioTrackss((audioTracks) =>\n            audioTracks.filter((v) => v !== track)\n          );\n        }\n      };\n\n      dominant.on(\"trackSubscribed\", trackSubscribed);\n      dominant.on(\"trackUnsubscribed\", trackUnsubscribed);\n\n      return () => {\n        setVideoTrackss([]);\n        setAudioTrackss([]);\n        dominant.removeAllListeners();\n      };\n    }\n  }, [dominant]);\n\n  const takeSnapshot = (videoElement) => {\n    var imageCapture = new ImageCapture(videoElement);\n    imageCapture\n      .grabFrame()\n      .then((bitmap) => {\n        let canvas = document.createElement(\"canvas\");\n        canvas.width = bitmap.width;\n        canvas.height = bitmap.height;\n        let context = canvas.getContext(\"2d\");\n\n        context.drawImage(bitmap, 0, 0);\n        canvas.toBlob(function (blob) {\n          var reader = new FileReader();\n          reader.addEventListener(\"loadend\", () => {\n            fetch(reader.result)\n              .then((res) => res.blob())\n              .then((blob) => {\n                const fetchUrl =\n                  \"/video/snapShot?identity=\" +\n                  dominant.identity +\n                  \"&room=\" +\n                  room.name;\n                fetch(fetchUrl, {\n                  method: \"POST\",\n                  body: blob,\n                  headers: {\n                    \"Content-Type\": \"application/octet-stream\",\n                  },\n                }).then(() => {\n                  //Update the UI Sentiment to display the most up-to-date sentiment, according to backend\n                  fetchSentiment();\n                });\n              });\n          });\n          reader.readAsDataURL(blob);\n        }, \"image/jpeg\");\n      })\n      .catch(function (error) {\n        console.log(\"takePhoto() error: \", error);\n      });\n  };\n\n  const fetchSentiment = async () => {\n    const getUrl =\n      \"/emotion?identity=\" + dominant.identity + \"&room=\" + room.name;\n    const data = await fetch(getUrl, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    }).then((res) => res.json());\n\n    setEmotion(data);\n  };\n\n  const startRecording = (audioElement, lengthInMS) => {\n    let recorder = new MediaRecorder(audioElement);\n    let data = [];\n\n    recorder.ondataavailable = (event) => data.push(event.data);\n    recorder.start();\n    // console.log(recorder.state + \" for \" + lengthInMS / 1000 + \" seconds...\");\n\n    let stopped = new Promise((resolve, reject) => {\n      recorder.onstop = resolve;\n      recorder.onerror = (event) => reject(event.name);\n    });\n\n    let recorded = wait(lengthInMS).then(\n      () => recorder.state == \"recording\" && recorder.stop()\n    );\n\n    return Promise.all([stopped, recorded]).then(() => data);\n  };\n\n  const recordAudio = (audioElement, lengthInMS) => {\n    const MediaStreamer = new MediaStream();\n    MediaStreamer.addTrack(audioElement);\n    const recorder = new MediaRecorder(MediaStreamer);\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: true,\n      })\n      .then(() => startRecording(MediaStreamer, lengthInMS))\n      .then((recordedChunks) => {\n        let recordedBlob = new Blob(recordedChunks, {\n          type: \"application/octet-stream\",\n        });\n        var reader = new FileReader();\n        reader.addEventListener(\"loadend\", () => {\n          fetch(reader.result)\n            .then((res) => res.blob())\n            .then((recordedBlob) => {\n              const fetchUrl =\n                \"/audio/snapShot?identity=\" +\n                dominant.identity +\n                \"&room=\" +\n                room.name;\n              fetch(fetchUrl, {\n                method: \"POST\",\n                body: recordedBlob,\n                headers: {\n                  \"Content-Type\": \"application/octet-stream\",\n                },\n              }).then(() => {\n                //Update the UI Sentiment to display the most up-to-date sentiment, according to backend\n                fetchSentiment();\n              });\n            });\n        });\n        reader.readAsDataURL(recordedBlob);\n      });\n  };\n\n  function wait(delayInMS) {\n    return new Promise((resolve) => setTimeout(resolve, delayInMS));\n  }\n\n  function stop(stream) {\n    stream.getTracks().forEach((track) => track.stop());\n    console.log(\"Recording stopped\");\n  }\n\n  useEffect(() => {\n    if (dominant != null) {\n      const videoTrack = videoTrackss[0];\n      if (videoTrack) {\n        videoTrack.attach(videoref.current);\n      }\n      // return () => {\n      //   console.log(\"User.js detach()\");\n      //   videoTrack.detach();\n      // };\n    }\n  }, [videoTrackss]);\n\n  //Takes a snapshot, which calls to backend API to update emotion, every time there is a change in who the Dominant User is AND every 2 seconds\n  useEffect(() => {\n    const videoSnapshotInterval = setInterval(() => {\n      if (dominant != null && videoTrackss[0].isEnabled) {\n        const videoTrack = videoTrackss[0];\n        if (videoTrack) {\n          takeSnapshot(videoTrack.mediaStreamTrack);\n        }\n      }\n    }, 2000);\n    return () => {\n      clearInterval(videoSnapshotInterval);\n    }\n  }, [videoTrackss]);\n\n  //Start a new audio recording interval and stop the old one for parsing every 6 seconds\n  useEffect(() => {\n    const intervalInMS = 10000;\n    const audioSnapshotInterval = setInterval(() => {\n      console.log(\"New function called\");\n      if (dominant != null && !videoTrackss[0].isEnabled) {\n        const audioTrack = audioTrackss[0];\n        if (audioTrack) {\n          // audioTrack.attach(audioref.current);\n          recordAudio(audioTrack.mediaStreamTrack, intervalInMS);\n        }\n      }\n    }, intervalInMS);\n    return () => {\n      clearInterval(audioSnapshotInterval);\n      //TODO: Place something here that stops the recordAudio function for the previous dominant user\n      //when the dominant user changes. This will allow the interval to restart for the new\n      //dominant user right when the change happens, giving us more accurate audio (hopefully)\n    };\n  }, [audioTrackss]);\n\n  let emoji;\n  let emotiontext;\n  if (emotion.emotion === \"happiness\") {\n    emoji = (\n      // <img\n      //   className=\"dominant-emotion-happy-img\"\n      //   src=\"https://img.icons8.com/color/48/000000/happy--v1.png\"\n      // />\n\n      <FontAwesomeIcon\n        className={\"dominant-emotion-happy emotion\"}\n        icon={faLaughBeam}\n        size=\"2x\"\n      />\n    );\n\n    emotiontext = \"HAPPY\";\n  } else if (emotion.emotion === \"anger\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-angry emotion\"}\n        icon={faAngry}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"ANGRY\";\n  } else if (emotion.emotion === \"sadness\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-sadness emotion\"}\n        icon={faSadTear}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"SADNESS\";\n  } else if (emotion.emotion === \"fear\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-fear emotion\"}\n        icon={faFrownOpen}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"FEAR\";\n  } else if (emotion.emotion === \"disgust\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-disgust emotion\"}\n        icon={faTired}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"DISGUST\";\n  } else if (emotion.emotion === \"neutral\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-neutral emotion\"}\n        icon={faMeh}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"NEUTRAL\";\n  } else if (emotion.emotion === \"surprise\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-surprised emotion\"}\n        icon={faGrinStars}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"SURPRISE\";\n  } else if (emotion.emotion === \"-\") {\n    emoji = (\n      <FontAwesomeIcon\n        className={\"dominant-emotion-undefined emotion\"}\n        icon={faMehBlank}\n        size=\"2x\"\n      />\n    );\n    emotiontext = \"UNDEFINED\";\n  }\n\n  return (\n    <Row className=\"dominant-camera\">\n      <div id={\"das\"} className=\"dominant-camera-reaction\"></div>\n\n      {dominant ? (\n        <video\n          className={\"participant-video-dominant\"}\n          width=\"100%\"\n          height=\"100%\"\n          ref={videoref}\n          autoPlay={true}\n        />\n      ) : (\n        <div className={\"default-video-dominant\"}>\n          <FontAwesomeIcon\n            className={\"dominant-camera-default\"}\n            icon={faUsers}\n            size=\"2x\"\n          />\n        </div>\n      )}\n\n      <div className=\"dominant-border-emotion-icon\">\n        <h3 className=\"dominant-border-emotion-header\">Emotion</h3>\n        <div className=\"dominant-icon\">{emoji}</div>\n      </div>\n\n      <div className=\"dominant-border\">\n        {dominant ? (\n          <div className=\"dominant-border-name\">{dominant.identity}</div>\n        ) : (\n          \"\"\n        )}\n        <div className=\"dominant-border-emotion-background\">\n          <div className=\"dominant-border-emotion-text\">{emotiontext}</div>\n        </div>\n      </div>\n    </Row>\n  );\n};\n\nexport default DominantUser;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport Video from \"twilio-video\";\nimport User from \"./User\";\nimport DominantUser from \"./DominantUser\";\nimport { Container, Row, Col, Button, Navbar, Nav } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faTimes,\n  faVideoSlash,\n  faMicrophoneSlash,\n  faMicrophone,\n  faDesktop,\n  faVideo,\n  faThumbsUp,\n  faHeadphones,\n  faRssSquare,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst Room = ({ meetingname, token, emotion, logout, test }) => {\n  const [room, setRoom] = useState(null);\n  const [user, setUser] = useState([]);\n  //create user array here\n  //implement\n  const [newDomName, setNewDomName] = useState(\"\");\n  const [mute, setMute] = useState(false);\n  const [videomute, setVideomute] = useState(false);\n  const [deafenmute, setDeafenmute] = useState(false);\n  var intervalID;\n  var sentiment_intervalID;\n\n  // const reaction = require(\"./reaction\");\n  // const activateEmojiButtons = reaction.activateEmojiButtons;\n  // const addLocalData = reaction.addLocalData;\n  // activateEmojiButtons();\n  // addLocalData();\n  // const dataTrack = reaction.dataTrack;\n\n  const helpers = require(\"./helpers\");\n  const muteYourAudio = helpers.muteYourAudio;\n  const unmuteYourAudio = helpers.unmuteYourAudio;\n\n  const { LocalDataTrack } = require(`twilio-video`);\n\n  console.log(\"Room.js render\");\n\n  const takeSnapshot = (room, users) => {\n    if (!room.localParticipant.videoTracks.entries().next()) {\n      var videoElement = room.localParticipant.videoTracks.entries().next()\n        .value[1].track.mediaStreamTrack;\n      var imageCapture = new ImageCapture(videoElement);\n      imageCapture\n        .grabFrame()\n        .then((bitmap) => {\n          console.log(\"bitmap :\", bitmap);\n          let canvas = document.createElement(\"canvas\");\n          canvas.width = bitmap.width;\n          canvas.height = bitmap.height;\n          let context = canvas.getContext(\"2d\");\n\n          context.drawImage(bitmap, 0, 0);\n          canvas.toBlob(function (blob) {\n            // console.log(blob);\n            var reader = new FileReader();\n            reader.addEventListener(\"loadend\", () => {\n              fetch(reader.result)\n                .then((res) => res.blob())\n                .then((blob) => {\n                  // console.log(\"here is your binary: \", blob);\n                  fetch(\n                    \"/video/snapShot?identity=\" +\n                      room.localParticipant.identity +\n                      \"&room=\" +\n                      room.name,\n                    {\n                      method: \"POST\",\n                      body: blob,\n                      headers: {\n                        \"Content-Type\": \"application/octet-stream\",\n                      },\n                    }\n                  );\n                });\n            });\n            reader.readAsDataURL(blob);\n          }, \"image/jpeg\");\n        })\n        .catch(function (error) {\n          console.log(\"takePhoto() error: \", error);\n        });\n    }\n  };\n\n  //passing array here\n  //user state = array for rendering\n  const updateUserSentiments = (users) => {\n    console.log(users);\n    users.forEach((u) => {\n      fetch(\"/video/emotion?identity=\" + u.identity + \"&room=\" + room.name, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((res) => {\n        u.emotion = res.body.emotion;\n      });\n    });\n  };\n\n  const restartSentiment = (user) => {\n    if (sentiment_intervalID) {\n      window.clearInterval(sentiment_intervalID);\n    }\n    sentiment_intervalID = window.setInterval(\n      updateUserSentiments,\n      10000,\n      user\n    );\n  };\n\n  useEffect(() => {\n    console.log(\"dominant speacjer Room.js effect\");\n\n    const participantConnected = (new_user) => {\n      console.log(\"Room.js - particiapnt connected\", new_user);\n      //add user to array\n      setUser((prevusers) => [...prevusers, new_user]);\n\n      restartSentiment(user);\n    };\n\n    const participantDisconnected = (gone_user) => {\n      console.log(\"Room.js - particiapnt disconnected\", gone_user, user);\n\n      //remove user from array\n      setUser((prevusers) => prevusers.filter((p) => p !== gone_user));\n      // setUser((prevusers) => prevusers.splice(prevusers.indexOf(gone_user), 1));\n      restartSentiment(user);\n      console.log(user);\n    };\n\n    const ParticipantNewDominantSpeaker = (user) => {\n      if (user !== null) {\n        // console.log(\"new dominant speaker Room.js\");\n        setNewDomName(user.identity);\n      } else if (user === null) {\n        setNewDomName(null);\n      }\n    };\n\n    const participantRemoteVideoMuted = (track, user) => {\n      // console.log(\"Room.js - Track disable\", track, user);\n    };\n\n    const participantRemotedAudioMuted = (track, user) => {};\n\n    let dataTrack; // add this at the top with the other variable declarations\n\n    function addToLocalDataLabel(newText) {\n      let localDataLabel = document.getElementById(\"datalocal\");\n      localDataLabel.innerHTML = newText;\n      animateDataLabel(localDataLabel, \"appear\");\n    }\n\n    function sendDataToRoom(data, id, identity) {\n      dataTrack.send(\n        JSON.stringify({\n          emojiData: data,\n          user: id,\n          identity: identity,\n        })\n      );\n    }\n\n    function emojiButtonHandler(event) {\n      let emojiButton = event.target;\n      let emojiText = emojiButton.innerHTML;\n      addToLocalDataLabel(emojiText);\n\n      setRoom((currentRoom) => {\n        console.log(\"id\", currentRoom);\n        sendDataToRoom(\n          emojiText,\n          currentRoom.localParticipant.sid,\n          currentRoom.identity\n        );\n        return currentRoom;\n      });\n      console.log(\"id\", room, \"fdsafsadas\");\n    }\n\n    function activateEmojiButtons() {\n      let emojiButtonGroup = document.getElementsByClassName(\"emojibuttons\");\n      let emojiButton;\n      for (let i = 0; i < emojiButtonGroup.length; i++) {\n        emojiButton = emojiButtonGroup[i];\n        emojiButton.addEventListener(\"click\", emojiButtonHandler);\n      }\n    }\n\n    activateEmojiButtons();\n\n    function addLocalData() {\n      // Creates a Local Data Track\n      var localDataTrack = new LocalDataTrack();\n      dataTrack = localDataTrack;\n    }\n    addLocalData();\n\n    function animateDataLabel(div, startClass) {\n      setTimeout(function () {\n        div.classList.remove(startClass);\n      }, 1000);\n      div.classList.add(startClass);\n    }\n\n    Video.connect(token, {\n      name: meetingname,\n      dominantSpeaker: true,\n      audio: true,\n      video: true,\n    }).then((room) => {\n      console.log(\"Room.js - line 59 - video.connect\", room);\n      setRoom(room);\n      // Publishing the local Data Track to the Room\n      // room.localParticipant.publishTrack(dataTrack);\n      //intervalID = window.setInterval(takeSnapshot, 10000, room,user);\n      room.on(\"participantConnected\", participantConnected);\n      room.on(\"participantDisconnected\", participantDisconnected);\n      room.on(\"dominantSpeakerChanged\", ParticipantNewDominantSpeaker);\n      room.on(\"trackDisabled\", participantRemoteVideoMuted);\n      room.localParticipant.publishTrack(dataTrack);\n      room.participants.forEach(participantConnected);\n      intervalID = window.setInterval(takeSnapshot, 50000, room, user);\n    });\n\n    return () => {\n      if (intervalID) {\n        window.clearInterval(intervalID);\n      }\n      setRoom((currentRoom) => {\n        if (currentRoom && currentRoom.localParticipant.state === \"connected\") {\n          currentRoom.localParticipant.tracks.forEach(function (\n            trackPublication\n          ) {\n            trackPublication.track.stop();\n          });\n          console.log(\"disconnect!!!!!!\");\n          currentRoom.disconnect();\n          return null;\n        } else {\n          return currentRoom;\n        }\n      });\n    };\n  }, [meetingname, token]);\n\n  const mutecallback = useCallback(() => {\n    console.log(\"called mutecallback, button pressed\");\n    if (mute === false && room !== null) {\n      helpers.muteYourAudio(room);\n      setMute(true);\n    } else if (mute === true && room !== null) {\n      helpers.unmuteYourAudio(room);\n      setMute(false);\n    }\n  }, [mute, room]);\n\n  const mutevideocallback = useCallback(() => {\n    console.log(\"called mutevideocallback, button pressed\");\n    if (videomute === false && room !== null) {\n      helpers.muteYourVideo(room);\n      setVideomute(true);\n    } else if (videomute === true && room !== null) {\n      helpers.unmuteYourVideo(room);\n      setVideomute(false);\n    }\n  }, [videomute, room]);\n\n  const defeancallback = useCallback(() => {\n    console.log(\"called deafencallback, button pressed\");\n    if (deafenmute === false && room !== null) {\n      muteYourAudio(room);\n      setDeafenmute(true);\n    } else if (deafenmute === true && room != null) {\n      unmuteYourAudio(room);\n      setDeafenmute(false);\n    }\n  }, [room, deafenmute]);\n\n  const logoutcallback = useCallback(() => {\n    console.log(\"testing - line 125!!!!!!\", room);\n    if (room && room.localParticipant.state === \"connected\") {\n      room.localParticipant.tracks.forEach(function (trackPublication) {\n        if (\n          trackPublication.track.kind == \"video\" ||\n          trackPublication.track.kind == \"audio\"\n        ) {\n          trackPublication.track.stop();\n        }\n      });\n      //debugger;\n      room.disconnect();\n    }\n    logout();\n  }, [room]);\n\n  const remoteParticipants = user.map((user, index) => (\n    <User key={index} user={user} mute={deafenmute} />\n  ));\n\n  return (\n    <div className=\"room\">\n      <Container className=\"cameras\" fluid=\"true\">\n        <Row className=\"cameras-row\">\n          <Col sm={2} className=\"local-participant\">\n            {room ? (\n              <div className=\"local-participant-camera\">\n                <User\n                  key={room.localParticipant.sid}\n                  user={room.localParticipant}\n                  mute={deafenmute}\n                  local={\"i\"}\n                />\n                <div id=\"datalocal\" className=\"emoji\"></div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"remote-participants\">{remoteParticipants}</div>\n          </Col>\n          <Col sm={10} className=\"dominant\">\n            <DominantUser\n              className=\"dominant-user\"\n              key={\"dominant\"}\n              room={room}\n            />\n            <div className=\"dominant-header-bg\">\n              <div className=\"dominant-header\">\n                <div className=\"dominant-header-room\">\n                  Room Name: {meetingname}\n                </div>\n                <div className=\"dominant-header-speaker\">\n                  Talking: {newDomName}\n                </div>\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n      <Container fluid=\"true\">\n        <div className=\"toolbar\">\n          <div className=\"toolbar-items\">\n            <div className=\"logoutbutton\">\n              <button\n                className=\"logoutbutton-btn danger\"\n                onClick={logoutcallback}\n              >\n                LOG OUT\n              </button>\n            </div>\n            <div className=\"btns-toolbar\">\n              <div className=\"col-audio\">\n                {mute ? (\n                  <button className=\"btn1 info\" onClick={mutecallback}>\n                    <span className=\"btn2\">Mute</span>\n                    <FontAwesomeIcon\n                      className=\"btnsize\"\n                      icon={faMicrophoneSlash}\n                    />\n                  </button>\n                ) : (\n                  <button className=\"btn1 info\" onClick={mutecallback}>\n                    <span className=\"btn2\">Mute</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faMicrophone} />\n                  </button>\n                )}\n              </div>\n              <div className=\"col-video\">\n                {videomute ? (\n                  <button className=\"btn1 info\" onClick={mutevideocallback}>\n                    <span className=\"btn2\">Camera</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faVideoSlash} />\n                  </button>\n                ) : (\n                  <button className=\"btn1 info\" onClick={mutevideocallback}>\n                    <span className=\"btn2\">Camera</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faVideo} />\n                  </button>\n                )}\n              </div>\n              <div className=\"col-silence\">\n                {deafenmute ? (\n                  <button className=\"btn1 info\" onClick={defeancallback}>\n                    <span className=\"btn2\">Silence</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faTimes} />\n                  </button>\n                ) : (\n                  <button className=\"btn1 info\" onClick={defeancallback}>\n                    <span className=\"btn2\">Silence</span>\n                    <FontAwesomeIcon className=\"btnsize\" icon={faHeadphones} />\n                  </button>\n                )}\n              </div>\n            </div>\n            <div className=\"col-emoji\">\n              <div\n                className=\"emojiPanel\"\n                style={{\n                  padding: \"1rem\",\n                }}\n              >\n                <div className=\"reaction-container\">\n                  <span className=\"reaction-label-like\">Like</span>\n                  <button\n                    id=\"emoji-wink\"\n                    className=\"btn3 warning emojibuttons\"\n                    style={{\n                      marginRight: \"1rem\",\n                    }}\n                  >\n                    <span className=\"reaction-entity\">&#128077;</span>\n                  </button>\n                </div>\n\n                <div className=\"reaction-container\">\n                  <span className=\"reaction-label-dislike\">Dislike</span>\n                  <button\n                    id=\"emoji-eyes\"\n                    className=\"btn3 warning emojibuttons\"\n                    style={{\n                      marginRight: \"1rem\",\n                    }}\n                  >\n                    <span className=\"reaction-entity\">&#128078;</span>\n                  </button>\n                </div>\n\n                <div className=\"reaction-container\">\n                  <span className=\"reaction-label-love\">Love</span>\n                  <button\n                    id=\"emoji-heart\"\n                    className=\"btn3 warning emojibuttons\"\n                    style={{\n                      marginRight: \"1rem\",\n                    }}\n                  >\n                    <span className=\"reaction-entity\">&#10084;</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Container>\n    </div>\n  );\n};\n\nexport default Room;\n","import React, { useState, useCallback } from \"react\";\nimport ControlPanel from \"./ControlPanel\";\nimport Room from \"./Room\";\n\nconst Meeting = () => {\n  const [username, setUsername] = useState(\"\");\n  const [meetingname, setRoomName] = useState(\"\");\n  const [token, setToken] = useState(null);\n\n  const roomname_change = useCallback((event) => {\n    setRoomName(event.target.value);\n  }, []);\n\n  const username_change = useCallback((event) => {\n    setUsername(event.target.value);\n  }, []);\n\n  const submit = useCallback(\n    async (event) => {\n      event.preventDefault();\n\n      const data = await fetch(\"/video/token\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          identity: username,\n          room: meetingname,\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((res) => res.json());\n\n      setToken(data.token);\n    },\n    [meetingname, username]\n  );\n\n  const logout = useCallback((event) => {\n    setToken(null);\n  }, []);\n\n  let result;\n  if (token) {\n    result = <Room meetingname={meetingname} token={token} logout={logout} />;\n  } else {\n    result = (\n      <ControlPanel\n        username={username}\n        roomName={meetingname}\n        handleUsernameChange={username_change}\n        handleRoomNameChange={roomname_change}\n        handleSubmit={submit}\n      />\n    );\n  }\n  return result;\n};\n\nexport default Meeting;\n","import React from \"react\";\nimport Meeting from \"./components/Meeting\";\n// import {BrowserFouter as Router, Switch, Route} from \"react-router-dom\"\n\nfunction App() {\n  return (\n    <div>\n      <Meeting />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport \"./css/App.css\";\nimport \"./css/style.css\";\n\nimport App from \"./App\";\n\n// import reportWebVitals from './reportWebVitals';\n\n// button.addEventListener('click', () => {\n//   Twilio.Video.createLocalVideoTrack().then(track => {\n//     container.append(track.attach());\n//     button.remove();\n//   });\n//   button.remove();\n// })\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"body\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","\n\n/**\n * Mute/unmute your media in a Room.\n * @param {Room} room - The Room you have joined\n * @param {'audio'|'video'} kind - The type of media you want to mute/unmute\n * @param {'mute'|'unmute'} action - Whether you want to mute/unmute\n */\nfunction muteOrUnmuteYourMedia(room, kind, action) {\n  const publications = kind === 'audio'\n    ? room.localParticipant.audioTracks\n    : room.localParticipant.videoTracks;\n\n  publications.forEach(function(publication) {\n    if (action === 'mute') {\n      console.log(\"disable local audio\");\n      publication.track.disable();\n    } else {\n      publication.track.enable();\n    }\n  });\n}\n\n/**\n * Mute your audio in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction muteYourAudio(room) {\n  muteOrUnmuteYourMedia(room, 'audio', 'mute');\n}\n\n/**\n * Mute your video in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction muteYourVideo(room) {\n  muteOrUnmuteYourMedia(room, 'video', 'mute');\n}\n\n/**\n * Unmute your audio in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction unmuteYourAudio(room) {\n  muteOrUnmuteYourMedia(room, 'audio', 'unmute');\n}\n\n/**\n * Unmute your video in a Room.\n * @param {Room} room - The Room you have joined\n * @returns {void}\n */\nfunction unmuteYourVideo(room) {\n  muteOrUnmuteYourMedia(room, 'video', 'unmute');\n}\n\n/**\n * A RemoteParticipant muted or unmuted its media.\n * @param {Room} room - The Room you have joined\n * @param {function} onMutedMedia - Called when a RemoteParticipant muted its media\n * @param {function} onUnmutedMedia - Called when a RemoteParticipant unmuted its media\n * @returns {void}\n */\nfunction participantMutedOrUnmutedMedia(room, onMutedMedia, onUnmutedMedia) {\n  room.on('trackSubscribed', function(track, publication, participant) {\n    track.on('disabled', function() {\n      return onMutedMedia(track, participant);\n    });\n    track.on('enabled', function() {\n      return onUnmutedMedia(track, participant);\n    });\n  });\n}\n\nexports.muteYourAudio = muteYourAudio;\nexports.muteYourVideo = muteYourVideo;\nexports.unmuteYourAudio = unmuteYourAudio;\nexports.unmuteYourVideo = unmuteYourVideo;\nexports.participantMutedOrUnmutedMedia = participantMutedOrUnmutedMedia;"]}}